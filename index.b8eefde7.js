!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},n.parcelRequired7c6=a),a.register("iE7OH",(function(t,n){var r,i;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var a={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)a[t[n]]=e[t[n]]},i=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a.register("hKHmD",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}})),a.register("kMC0W",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return r.default(e)};var n,r=(n=a("8NIkP"))&&n.__esModule?n:{default:n}})),a.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}})),a.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),a.register("8CtQK",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),a.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return r.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r.default(e,t)};var n,r=(n=a("8NIkP"))&&n.__esModule?n:{default:n}})),a.register("8slrw",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return e}})),a.register("ifqQW",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),a.register("ds8z5",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}})),a.register("gD1JV",(function(e,t){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return n(e,t)}})),a.register("ge8co",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){return o.apply(null,arguments)};var n,r=(n=a("gD1JV"))&&n.__esModule?n:{default:n};function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return(o=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r.default(a,n.prototype),a}).apply(null,arguments)}})),a.register("cZGw3",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}})),a.register("fVNic",(function(e,t){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return n(e)}})),a.register("aTHs7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}})),a.register("jmhxu",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return!t||"object"!==r.default(t)&&"function"!=typeof t?n.default(e):t};var n=i(a("ds8z5")),r=i(a("l5bVx"));function i(e){return e&&e.__esModule?e:{default:e}}})),a.register("l5bVx",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e}})),a.register("2mz0K",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r.default(e)););return e};var n,r=(n=a("fVNic"))&&n.__esModule?n:{default:n}})),a.register("aNJCr",(function(t,n){var r;e(t.exports,"getBundleURL",(function(){return r}),(function(e){return r=e}));var i={};function a(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=i[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return a(e[2])}return"/"}(),i[e]=t),t}})),a("iE7OH").register(JSON.parse('{"EVgbq":"index.b8eefde7.js","6n1Ny":"default_User.ca0598e8.jpg","02qM7":"default_image_large.b44717ef.jpg","jONvu":"PageNotFound.9c0cb30e.jpg"}'));var o={};function s(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,u,"next",e)}function u(e){s(a,r,i,o,u,"throw",e)}o(void 0)}))}};var u={};Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var c={};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=function(e,t,n){t&&l(e.prototype,t);n&&l(e,n);return e};var f=a("hKHmD"),h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e){return d.default(e)||p.default(e)||y.default(e)||v.default()};var d=m(a("kMC0W")),p=m(a("7AJDX")),v=m(a("8CtQK")),y=m(a("auk6i"));function m(e){return e&&e.__esModule?e:{default:e}}var g={},k=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};u(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(C([])));b&&b!==n&&r.call(b,a)&&(k=b);var _=g.prototype=y.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:t,done:!0}}return m.prototype=g,u(_,"constructor",g),u(g,"constructor",m),m.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},E(x.prototype),u(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(_),u(_,s,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(g);try{regeneratorRuntime=k}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=k:Function("r","regeneratorRuntime = r")(k)}var w={};Object.defineProperty(w,"__esModule",{value:!0}),w.default=function(e,t){return b.default(e)||_.default(e,t)||x.default(e,t)||E.default()};var b=I(a("8slrw")),_=I(a("7AJDX")),E=I(a("ifqQW")),x=I(a("auk6i"));function I(e){return e&&e.__esModule?e:{default:e}}var T=a("ds8z5"),S={};Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C.default(e,t)};var A,C=(A=a("gD1JV"))&&A.__esModule?A:{default:A};var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.default=function(e){return M(e)};var R=L(a("ge8co")),N=L(a("cZGw3")),D=L(a("fVNic")),P=L(a("gD1JV"));function L(e){return e&&e.__esModule?e:{default:e}}function M(e){var t="function"==typeof Map?new Map:void 0;return M=function(e){if(null===e||!N.default(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return R.default(e,arguments,D.default(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),P.default(n,e)},M(e)}var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.default=function(e){var t=F.default();return function(){var n,r=B.default(e);if(t){var i=B.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return V.default(this,n)}};var F=j(a("aTHs7")),B=j(a("fVNic")),V=j(a("jmhxu"));function j(e){return e&&e.__esModule?e:{default:e}}var q,z,H,K=q={};function G(){throw new Error("setTimeout has not been defined")}function W(){throw new Error("clearTimeout has not been defined")}function Q(e){if(z===setTimeout)return setTimeout(e,0);if((z===G||!z)&&setTimeout)return z=setTimeout,setTimeout(e,0);try{return z(e,0)}catch(t){try{return z.call(null,e,0)}catch(t){return z.call(this,e,0)}}}!function(){try{z="function"==typeof setTimeout?setTimeout:G}catch(e){z=G}try{H="function"==typeof clearTimeout?clearTimeout:W}catch(e){H=W}}();var J,X=[],Y=!1,$=-1;function Z(){Y&&J&&(Y=!1,J.length?X=J.concat(X):$=-1,X.length&&ee())}function ee(){if(!Y){var e=Q(Z);Y=!0;for(var t=X.length;t;){for(J=X,X=[];++$<t;)J&&J[$].run();$=-1,t=X.length}J=null,Y=!1,function(e){if(H===clearTimeout)return clearTimeout(e);if((H===W||!H)&&clearTimeout)return H=clearTimeout,clearTimeout(e);try{H(e)}catch(t){try{return H.call(null,e)}catch(t){return H.call(this,e)}}}(e)}}function te(e,t){this.fun=e,this.array=t}function ne(){}K.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];X.push(new te(e,t)),1!==X.length||Y||Q(ee)},te.prototype.run=function(){this.fun.apply(null,this.array)},K.title="browser",K.browser=!0,K.env={},K.argv=[],K.version="",K.versions={},K.on=ne,K.addListener=ne,K.once=ne,K.off=ne,K.removeListener=ne,K.removeAllListeners=ne,K.emit=ne,K.prependListener=ne,K.prependOnceListener=ne,K.listeners=function(e){return[]},K.binding=function(e){throw new Error("process.binding is not supported")},K.cwd=function(){return"/"},K.chdir=function(e){throw new Error("process.chdir is not supported")},K.umask=function(){return 0};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var re=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(re(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new ae;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ae=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){var e;return t(u)(this,r),(e=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="DecodeBase64StringError",e}return r}(t(O)(Error)),oe=function(e){return function(e){var t=re(e);return ie.encodeByteArray(t,!0)}(e).replace(/\./g,"")},se=function(e){try{return ie.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ue=function(){
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},ce=function(){try{return ue()||function(){if(void 0!==q&&void 0!==q.env);}()||function(){if("undefined"!=typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var t=e&&se(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},le=function(e){var t,n;return null===(n=null===(t=ce())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},fe=function(e){var t=le(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},he=function(){var e;return null===(e=ce())||void 0===e?void 0:e.config},de=function(e){var t;return null===(t=ce())||void 0===t?void 0:t["_".concat(e)]},pe=function(){"use strict";function e(){var n=this;t(u)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return t(c)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ve(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(a)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function me(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function ge(){try{return"object"==typeof indexedDB}catch(e){return!1}}function ke(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function we(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a){var o;return t(u)(this,r),(o=n.call(this,i)).code=e,o.customData=a,o.name="FirebaseError",Object.setPrototypeOf(t(T)(o),r.prototype),Error.captureStackTrace&&Error.captureStackTrace(t(T)(o),_e.prototype.create),o}return r}(t(O)(Error)),_e=function(){"use strict";function e(n,r,i){t(u)(this,e),this.service=n,this.serviceName=r,this.errors=i}return t(c)(e,[{key:"create",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0]||{},a="".concat(this.service,"/").concat(e),o=this.errors[e],s=o?Ee(o,i):"Error",u="".concat(this.serviceName,": ").concat(s," (").concat(a,")."),c=new be(a,u,i);return c}}]),e}();function Ee(e,t){return e.replace(xe,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var xe=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Te(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t),i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(!r.includes(c))return!1;var l=e[c],f=t[c];if(Se(l)&&Se(f)){if(!Te(l,f))return!1}else if(l!==f)return!1}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var h=!0,d=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var m=v.value;if(!n.includes(m))return!1}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}return!0}function Se(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ae(e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=function(e,r){var i=t(w)(r.value,2),a=i[0],o=i[1];Array.isArray(o)?o.forEach((function(e){n.push(encodeURIComponent(a)+"="+encodeURIComponent(e))})):n.push(encodeURIComponent(a)+"="+encodeURIComponent(o))},u=Object.entries(e)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n.length?"&"+n.join("&"):""}function Ce(e){var n={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var r=t(w)(e.split("="),2),i=r[0],a=r[1];n[decodeURIComponent(i)]=decodeURIComponent(a)}})),n}function Oe(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re=function(){"use strict";function e(n,r){var i=this;t(u)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then((function(){n(i)})).catch((function(e){i.error(e)}))}return t(c)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s in e&&"function"==typeof e[s])return!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ne),void 0===r.error&&(r.error=Ne),void 0===r.complete&&(r.complete=Ne);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ne(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var De=144e5;function Pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(De,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Le(e){return e&&e._delegate?e._delegate:e}var Me=function(){"use strict";function e(n,r,i){t(u)(this,e),this.name=n,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t(c)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ue="[DEFAULT]",Fe=function(){"use strict";function e(n,r){t(u)(this,e),this.name=n,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t(c)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new pe;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch(e){}var n=!0,r=!1,i=void 0;try{for(var a,o=this.instancesDeferred.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=t(w)(a.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:l});c.resolve(f)}catch(e){}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.from(e.instances.values()),n.next=3,Promise.all(t(h)(r.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))).concat(t(h)(r.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return n.stop()}}),n)})))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:i,options:r}),o=!0,s=!1,u=void 0;try{for(var c,l=this.instancesDeferred.entries()[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=t(w)(c.value,2),h=f[0],d=f[1],p=this.normalizeInstanceIdentifier(h);i===p&&d.resolve(a)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;try{u(e,t)}catch(e){}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ue?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(e){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue;return this.component?this.component.multipleInstances?e:Ue:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,Ve,je=function(){"use strict";function e(n){t(u)(this,e),this.name=n,this.providers=new Map}return t(c)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Fe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),qe=(f=a("hKHmD"),[]);(Ve=Be||(Be={}))[Ve.DEBUG=0]="DEBUG",Ve[Ve.VERBOSE=1]="VERBOSE",Ve[Ve.INFO=2]="INFO",Ve[Ve.WARN=3]="WARN",Ve[Ve.ERROR=4]="ERROR",Ve[Ve.SILENT=5]="SILENT";var ze,He={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},Ke=Be.INFO,Ge=(ze={},t(f)(ze,Be.DEBUG,"log"),t(f)(ze,Be.VERBOSE,"log"),t(f)(ze,Be.INFO,"info"),t(f)(ze,Be.WARN,"warn"),t(f)(ze,Be.ERROR,"error"),ze),We=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o;if(!(n<e.logLevel)){var s=(new Date).toISOString(),u=Ge[n];if(!u)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(n,")"));(o=console)[u].apply(o,["[".concat(s,"]  ").concat(e.name,":")].concat(t(h)(i)))}},Qe=function(){"use strict";function e(n){t(u)(this,e),this.name=n,this._logLevel=Ke,this._logHandler=We,this._userLogHandler=null,qe.push(this)}return t(c)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Be))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?He[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Be.DEBUG].concat(t(h)(n))),this._logHandler.apply(this,[this,Be.DEBUG].concat(t(h)(n)))}},{key:"log",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Be.VERBOSE].concat(t(h)(n))),this._logHandler.apply(this,[this,Be.VERBOSE].concat(t(h)(n)))}},{key:"info",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Be.INFO].concat(t(h)(n))),this._logHandler.apply(this,[this,Be.INFO].concat(t(h)(n)))}},{key:"warn",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Be.WARN].concat(t(h)(n))),this._logHandler.apply(this,[this,Be.WARN].concat(t(h)(n)))}},{key:"error",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,Be.ERROR].concat(t(h)(n))),this._logHandler.apply(this,[this,Be.ERROR].concat(t(h)(n)))}}]),e}();var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.default=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xe.default(e,t,n[t])}))}return e};var Xe=function(e){return e&&e.__esModule?e:{default:e}}(a("hKHmD"));var Ye,$e;var Ze=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakMap;var it={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return et.get(e);if("objectStoreNames"===t)return e.objectStoreNames||tt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return st(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function at(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($e||($e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ut(this),n),st(Ze.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return st(e.apply(ut(this),n))}:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o,s=(o=e).call.apply(o,[ut(this),n].concat(t(h)(i)));return tt.set(s,n.sort?n.sort():[n]),st(s)}}function ot(e){return"function"==typeof e?at(e):(e instanceof IDBTransaction&&function(e){if(!et.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));et.set(e,t)}}(e),t=e,(Ye||(Ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,it):e);var t}function st(e){if(e instanceof IDBRequest)return t=e,(n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(st(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)}))).then((function(e){e instanceof IDBCursor&&Ze.set(e,t)})).catch((function(){})),rt.set(n,t),n;var t,n;if(nt.has(e))return nt.get(e);var r=ot(e);return r!==e&&(nt.set(e,r),rt.set(r,e)),r}var ut=function(e){return rt.get(e)};function ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=st(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(st(s.result),e.oldVersion,e.newVersion,st(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}var lt=["get","getKey","getAll","getAllKeys","count"],ft=["put","add","delete","clear"],ht=new Map;function dt(e,n){if(e instanceof IDBDatabase&&!(n in e)&&"string"==typeof n){if(ht.get(n))return ht.get(n);var r=n.replace(/FromIndex$/,""),i=n!==r,a=ft.includes(r);if(r in(i?IDBIndex:IDBObjectStore).prototype&&(a||lt.includes(r))){var s,u=(s=t(o)(t(g).mark((function e(n){var o,s,u,c,l,f,d=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=d.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=d[u];return l=this.transaction(n,a?"readwrite":"readonly"),f=l.store,i&&(f=f.index(s.shift())),e.next=7,Promise.all([(c=f)[r].apply(c,t(h)(s)),a&&l.done]);case 7:return e.abrupt("return",e.sent[0]);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)});return ht.set(n,u),u}}}it=function(e){return t(Je)({},e,{get:function(t,n,r){return dt(t,n)||e.get(t,n,r)},has:function(t,n){return!!dt(t,n)||e.has(t,n)}})}(it);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pt=function(){"use strict";function e(n){t(u)(this,e),this.container=n}return t(c)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var vt,yt,mt="@firebase/app",gt="0.9.23",kt=new Qe("@firebase/app"),wt="[DEFAULT]",bt=(vt={},t(f)(vt,mt,"fire-core"),t(f)(vt,"@firebase/app-compat","fire-core-compat"),t(f)(vt,"@firebase/analytics","fire-analytics"),t(f)(vt,"@firebase/analytics-compat","fire-analytics-compat"),t(f)(vt,"@firebase/app-check","fire-app-check"),t(f)(vt,"@firebase/app-check-compat","fire-app-check-compat"),t(f)(vt,"@firebase/auth","fire-auth"),t(f)(vt,"@firebase/auth-compat","fire-auth-compat"),t(f)(vt,"@firebase/database","fire-rtdb"),t(f)(vt,"@firebase/database-compat","fire-rtdb-compat"),t(f)(vt,"@firebase/functions","fire-fn"),t(f)(vt,"@firebase/functions-compat","fire-fn-compat"),t(f)(vt,"@firebase/installations","fire-iid"),t(f)(vt,"@firebase/installations-compat","fire-iid-compat"),t(f)(vt,"@firebase/messaging","fire-fcm"),t(f)(vt,"@firebase/messaging-compat","fire-fcm-compat"),t(f)(vt,"@firebase/performance","fire-perf"),t(f)(vt,"@firebase/performance-compat","fire-perf-compat"),t(f)(vt,"@firebase/remote-config","fire-rc"),t(f)(vt,"@firebase/remote-config-compat","fire-rc-compat"),t(f)(vt,"@firebase/storage","fire-gcs"),t(f)(vt,"@firebase/storage-compat","fire-gcs-compat"),t(f)(vt,"@firebase/firestore","fire-fst"),t(f)(vt,"@firebase/firestore-compat","fire-fst-compat"),t(f)(vt,"fire-js","fire-js"),t(f)(vt,"firebase","fire-js-all"),vt),_t=new Map,Et=new Map;function xt(e,t){try{e.container.addComponent(t)}catch(n){kt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function It(e){var t=e.name;if(Et.has(t))return kt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Et.set(t,e);var n=!0,r=!1,i=void 0;try{for(var a,o=_t.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){xt(a.value,e)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}function Tt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var St=(yt={},t(f)(yt,"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),t(f)(yt,"bad-app-name","Illegal App name: '{$appName}"),t(f)(yt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),t(f)(yt,"app-deleted","Firebase App named '{$appName}' already deleted"),t(f)(yt,"no-options","Need to provide options, when not being deployed to hosting via source."),t(f)(yt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),t(f)(yt,"invalid-log-argument","First argument to `onLog` must be null or a function."),t(f)(yt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),t(f)(yt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),t(f)(yt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),t(f)(yt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),yt),At=new _e("app","Firebase",St),Ct=function(){"use strict";function e(n,r,i){var a=this;t(u)(this,e),this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Me("app",(function(){return a}),"PUBLIC"))}return t(c)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw At.create("app-deleted",{appName:this._name})}}]),e}(),Ot="10.6.0";function Rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!=typeof t){var r=t;t={name:r}}var i=Object.assign({name:wt,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!=typeof a||!a)throw At.create("bad-app-name",{appName:String(a)});if(n||(n=he()),!n)throw At.create("no-options");var o=_t.get(a);if(o){if(Te(n,o.options)&&Te(i,o.config))return o;throw At.create("duplicate-app",{appName:a})}var s=new je(a),u=!0,c=!1,l=void 0;try{for(var f,h=Et.values()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;s.addComponent(d)}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}var p=new Ct(n,i,s);return _t.set(a,p),p}function Nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=_t.get(e);if(!t&&e===wt&&he())return Rt();if(!t)throw At.create("no-app",{appName:e});return t}function Dt(e,t,n){var r,i=null!==(r=bt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void kt.warn(s.join(" "))}It(new Me("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pt="firebase-heartbeat-store",Lt=null;function Mt(){return Lt||(Lt=ct("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Pt)}}).catch((function(e){throw At.create("idb-open",{originalErrorMessage:e.message})}))),Lt}function Ut(e){return Ft.apply(this,arguments)}function Ft(){return(Ft=t(o)(t(g).mark((function e(n){var r,i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mt();case 3:return r=e.sent,e.next=6,r.transaction(Pt).objectStore(Pt).get(jt(n));case 6:return i=e.sent,e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof be?kt.warn(e.t0.message):(a=At.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),kt.warn(a.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Bt(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=t(o)(t(g).mark((function e(n,r){var i,a,o,s;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mt();case 3:return i=e.sent,a=i.transaction(Pt,"readwrite"),o=a.objectStore(Pt),e.next=8,o.put(r,jt(n));case 8:return e.next=10,a.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof be?kt.warn(e.t0.message):(s=At.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),kt.warn(s.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function jt(e){return"".concat(e.name,"!").concat(e.options.appId)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt=function(){"use strict";function e(n){var r=this;t(u)(this,e),this.container=n,this._heartbeatsCache=null;var i=this.container.getProvider("app").getImmediate();this._storage=new Gt(i),this._heartbeatsCachePromise=this._storage.read().then((function(e){return r._heartbeatsCache=e,e}))}return t(c)(e,[{key:"triggerHeartbeat",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r,i,a,o;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.container.getProvider("platform-logger").getImmediate(),a=i.getPlatformInfoString(),o=zt(),null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)){t.next=8;break}return t.next=7,e._heartbeatsCachePromise;case 7:e._heartbeatsCache=t.sent;case 8:if(e._heartbeatsCache.lastSentHeartbeatDate!==o&&!e._heartbeatsCache.heartbeats.some((function(e){return e.date===o}))){t.next=12;break}return t.abrupt("return");case 12:e._heartbeatsCache.heartbeats.push({date:o,agent:a});case 13:return e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),t.abrupt("return",e._storage.overwrite(e._heartbeatsCache));case 15:case"end":return t.stop()}}),n)})))()}},{key:"getHeartbeatsHeader",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r,i,a,o,s,u;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e._heartbeatsCache){t.next=4;break}return t.next=4,e._heartbeatsCachePromise;case 4:if(null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)&&0!==e._heartbeatsCache.heartbeats.length){t.next=6;break}return t.abrupt("return","");case 6:if(i=zt(),a=Ht(e._heartbeatsCache.heartbeats),o=a.heartbeatsToSend,s=a.unsentEntries,u=oe(JSON.stringify({version:2,heartbeats:o})),e._heartbeatsCache.lastSentHeartbeatDate=i,!(s.length>0)){t.next=16;break}return e._heartbeatsCache.heartbeats=s,t.next=14,e._storage.overwrite(e._heartbeatsCache);case 14:t.next=17;break;case 16:e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache);case 17:return t.abrupt("return",u);case 18:case"end":return t.stop()}}),n)})))()}}]),e}();function zt(){return(new Date).toISOString().substring(0,10)}function Ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=[],r=e.slice(),i=!0,a=!1,o=void 0;try{for(var s,u=function(e,i){var a=i.value,o=n.find((function(e){return e.agent===a.agent}));if(o){if(o.dates.push(a.date),Wt(n)>t)return o.dates.pop(),"break"}else if(n.push({agent:a.agent,dates:[a.date]}),Wt(n)>t)return n.pop(),"break";r=r.slice(1)},c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=u(c,s);if("break"===l)break}}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return{heartbeatsToSend:n,unsentEntries:r}}var Kt,Gt=function(){"use strict";function e(n){t(u)(this,e),this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return t(c)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){return t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ge()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",ke().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})))()}},{key:"read",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._canUseIndexedDBPromise;case 2:if(t.sent){t.next=7;break}return t.abrupt("return",{heartbeats:[]});case 7:return t.next=9,Ut(e.app);case 9:return r=t.sent,t.abrupt("return",r||{heartbeats:[]});case 11:case"end":return t.stop()}}),n)})))()}},{key:"overwrite",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,n._canUseIndexedDBPromise;case 3:if(t.sent){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,n.read();case 10:return a=t.sent,t.abrupt("return",Bt(n.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:a.lastSentHeartbeatDate,heartbeats:e.heartbeats}));case 12:case"end":return t.stop()}}),r)})))()}},{key:"add",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a;return t(g).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,n._canUseIndexedDBPromise;case 3:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,n.read();case 10:return a=r.sent,r.abrupt("return",Bt(n.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:a.lastSentHeartbeatDate,heartbeats:t(h)(a.heartbeats).concat(t(h)(e.heartbeats))}));case 12:case"end":return r.stop()}}),r)})))()}}]),e}();function Wt(e){return oe(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt="",It(new Me("platform-logger",(function(e){return new pt(e)}),"PRIVATE")),It(new Me("heartbeat",(function(e){return new qt(e)}),"PRIVATE")),Dt(mt,gt,Kt),Dt(mt,gt,"esm2017"),Dt("fire-js","");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Dt("firebase","10.6.0","app");var Qt,Jt;f=a("hKHmD"),f=a("hKHmD");var Xt=new WeakMap,Yt=new WeakMap,$t=new WeakMap,Zt=new WeakMap,en=new WeakMap;var tn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Yt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return an(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function nn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Jt||(Jt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(on(this),n),an(Xt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return an(e.apply(on(this),n))}:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o,s=(o=e).call.apply(o,[on(this),n].concat(t(h)(i)));return $t.set(s,n.sort?n.sort():[n]),an(s)}}function rn(e){return"function"==typeof e?nn(e):(e instanceof IDBTransaction&&function(e){if(!Yt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Yt.set(e,t)}}(e),t=e,(Qt||(Qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,tn):e);var t}function an(e){if(e instanceof IDBRequest)return t=e,(n=new Promise((function(e,n){var r=function(){t.removeEventListener("success",i),t.removeEventListener("error",a)},i=function(){e(an(t.result)),r()},a=function(){n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)}))).then((function(e){e instanceof IDBCursor&&Xt.set(e,t)})).catch((function(){})),en.set(n,t),n;var t,n;if(Zt.has(e))return Zt.get(e);var r=rn(e);return r!==e&&(Zt.set(e,r),en.set(r,e)),r}var on=function(e){return en.get(e)};function sn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=an(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(an(s.result),e.oldVersion,e.newVersion,an(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}var un=["get","getKey","getAll","getAllKeys","count"],cn=["put","add","delete","clear"],ln=new Map;function fn(e,n){if(e instanceof IDBDatabase&&!(n in e)&&"string"==typeof n){if(ln.get(n))return ln.get(n);var r=n.replace(/FromIndex$/,""),i=n!==r,a=cn.includes(r);if(r in(i?IDBIndex:IDBObjectStore).prototype&&(a||un.includes(r))){var s,u=(s=t(o)(t(g).mark((function e(n){var o,s,u,c,l,f,d=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=d.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=d[u];return l=this.transaction(n,a?"readwrite":"readonly"),f=l.store,i&&(f=f.index(s.shift())),e.next=7,Promise.all([(c=f)[r].apply(c,t(h)(s)),a&&l.done]);case 7:return e.abrupt("return",e.sent[0]);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)});return ln.set(n,u),u}}}!function(e){tn=e(tn)}((function(e){return t(Je)({},e,{get:function(t,n,r){return fn(t,n)||e.get(t,n,r)},has:function(t,n){return!!fn(t,n)||e.has(t,n)}})}));var hn,dn="@firebase/installations",pn="0.6.4",vn=1e4,yn="w:".concat(pn),mn="FIS_v2",gn=36e5,kn=(hn={},t(f)(hn,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),t(f)(hn,"not-registered","Firebase Installation is not registered."),t(f)(hn,"installation-not-found","Firebase Installation not found."),t(f)(hn,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),t(f)(hn,"app-offline","Could not process request. Application offline."),t(f)(hn,"delete-pending-registration","Can't delete installation while there is a pending registration request."),hn),wn=new _e("installations","Installations",kn);function bn(e){return e instanceof be&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function En(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function xn(e,t){return In.apply(this,arguments)}function In(){return(In=t(o)(t(g).mark((function e(n,r){var i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.json();case 2:return i=e.sent,a=i.error,e.abrupt("return",wn.create("request-failed",{requestName:n,serverCode:a.code,serverMessage:a.message,serverStatus:a.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tn(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Sn(e,t){var n=t.refreshToken,r=Tn(e);return r.append("Authorization",function(e){return"".concat(mn," ").concat(e)}(n)),r}function An(e){return Cn.apply(this,arguments)}function Cn(){return(Cn=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(!((r=e.sent).status>=500&&r.status<600)){e.next=5;break}return e.abrupt("return",n());case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function On(e,t){return Rn.apply(this,arguments)}function Rn(){return(Rn=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){var i,a,o,s,u,c,l,f,h,d,p,v;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.appConfig,a=n.heartbeatServiceProvider,o=r.fid,s=_n(i),u=Tn(i),!(c=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,c.getHeartbeatsHeader();case 7:(l=e.sent)&&u.append("x-firebase-client",l);case 9:return f={fid:o,authVersion:mn,appId:i.appId,sdkVersion:yn},h={method:"POST",headers:u,body:JSON.stringify(f)},e.next=13,An((function(){return fetch(s,h)}));case 13:if(!(d=e.sent).ok){e.next=22;break}return e.next=17,d.json();case 17:return p=e.sent,v={fid:p.fid||o,registrationStatus:2,refreshToken:p.refreshToken,authToken:En(p.authToken)},e.abrupt("return",v);case 22:return e.next=24,xn("Create Installation",d);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Dn=/^[cdef][\w-]{21}$/;function Pn(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var n=function(e){return(n=e,btoa((r=String).fromCharCode.apply(r,t(h)(n))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var n,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return Dn.test(n)?n:""}catch(e){return""}}function Ln(e){return"".concat(e.appName,"!").concat(e.appId)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn=new Map;function Un(e,t){var n=Ln(e);Fn(n,t),function(e,t){var n=Vn();n&&n.postMessage({key:e,fid:t});jn()}(n,t)}function Fn(e,t){var n=Mn.get(e);if(n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(0,o.value)(t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}}var Bn=null;function Vn(){return!Bn&&"BroadcastChannel"in self&&((Bn=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Fn(e.data.key,e.data.fid)}),Bn}function jn(){0===Mn.size&&Bn&&(Bn.close(),Bn=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn="firebase-installations-store",zn=null;function Hn(){return zn||(zn=sn("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(qn)}})),zn}function Kn(e,t){return Gn.apply(this,arguments)}function Gn(){return(Gn=t(o)(t(g).mark((function e(n,r){var i,a,o,s,u;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ln(n),e.next=3,Hn();case 3:return a=e.sent,o=a.transaction(qn,"readwrite"),s=o.objectStore(qn),e.next=8,s.get(i);case 8:return u=e.sent,e.next=11,s.put(r,i);case 11:return e.next=13,o.done;case 13:return u&&u.fid===r.fid||Un(n,r.fid),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wn(e){return Qn.apply(this,arguments)}function Qn(){return(Qn=t(o)(t(g).mark((function e(n){var r,i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ln(n),e.next=3,Hn();case 3:return i=e.sent,a=i.transaction(qn,"readwrite"),e.next=7,a.objectStore(qn).delete(r);case 7:return e.next=9,a.done;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jn(e,t){return Xn.apply(this,arguments)}function Xn(){return(Xn=t(o)(t(g).mark((function e(n,r){var i,a,o,s,u,c;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ln(n),e.next=3,Hn();case 3:return a=e.sent,o=a.transaction(qn,"readwrite"),s=o.objectStore(qn),e.next=8,s.get(i);case 8:if(u=e.sent,void 0!==(c=r(u))){e.next=15;break}return e.next=13,s.delete(i);case 13:e.next=17;break;case 15:return e.next=17,s.put(c,i);case 17:return e.next=19,o.done;case 19:return!c||u&&u.fid===c.fid||Un(n,c.fid),e.abrupt("return",c);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yn(e){return $n.apply(this,arguments)}function $n(){return($n=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n){var r,i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Jn(n.appConfig,(function(e){var t=Zn(e),i=er(n,t);return r=i.registrationPromise,i.installationEntry}));case 3:if(""!==(i=e.sent).fid){e.next=9;break}return e.next=7,r;case 7:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 9:return e.abrupt("return",{installationEntry:i,registrationPromise:r});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e){return ar(e||{fid:Pn(),registrationStatus:0})}function er(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(wn.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return tr.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:nr(e)}:{installationEntry:t}}function tr(){return(tr=t(o)(t(g).mark((function e(n,r){var i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,On(n,r);case 3:return i=e.sent,e.abrupt("return",Kn(n.appConfig,i));case 7:if(e.prev=7,e.t0=e.catch(0),!bn(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,Wn(n.appConfig);case 12:e.next=16;break;case 14:return e.next=16,Kn(n.appConfig,{fid:r.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function nr(e){return rr.apply(this,arguments)}function rr(){return(rr=t(o)(t(g).mark((function e(n){var r,i,a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ir(n.appConfig);case 2:r=e.sent;case 3:if(1!==r.registrationStatus){e.next=11;break}return e.next=6,Nn(100);case 6:return e.next=8,ir(n.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==r.registrationStatus){e.next=22;break}return e.next=14,Yn(n);case 14:if(i=e.sent,a=i.installationEntry,!(o=i.registrationPromise)){e.next=21;break}return e.abrupt("return",o);case 21:return e.abrupt("return",a);case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ir(e){return Jn(e,(function(e){if(!e)throw wn.create("installation-not-found");return ar(e)}))}function ar(e){return 1===(t=e).registrationStatus&&t.registrationTime+vn<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function or(e,t){return sr.apply(this,arguments)}function sr(){return(sr=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){var i,a,o,s,u,c,l,f,h,d,p;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.appConfig,a=n.heartbeatServiceProvider,o=ur(i,r),s=Sn(i,r),!(u=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(c=e.sent)&&s.append("x-firebase-client",c);case 9:return l={installation:{sdkVersion:yn,appId:i.appId}},f={method:"POST",headers:s,body:JSON.stringify(l)},e.next=13,An((function(){return fetch(o,f)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return d=e.sent,p=En(d),e.abrupt("return",p);case 22:return e.next=24,xn("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ur(e,t){var n=t.fid;return"".concat(_n(e),"/").concat(n,"/authTokens:generate")}function cr(e){return lr.apply(this,arguments)}function lr(){return lr=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n){var r,i,a,o,s=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]&&s[1],e.next=4,Jn(n.appConfig,(function(e){if(!yr(e))throw wn.create("not-registered");var t=e.authToken;if(!r&&mr(t))return e;if(1===t.requestStatus)return i=fr(n,r),e;if(!navigator.onLine)throw wn.create("app-offline");var a=gr(e);return i=pr(n,a),a}));case 4:if(a=e.sent,!i){e.next=11;break}return e.next=8,i;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=a.authToken;case 12:return o=e.t0,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function fr(e,t){return hr.apply(this,arguments)}function hr(){return(hr=t(o)(t(g).mark((function e(n,r){var i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(n.appConfig);case 2:i=e.sent;case 3:if(1!==i.authToken.requestStatus){e.next=11;break}return e.next=6,Nn(100);case 6:return e.next=8,dr(n.appConfig);case 8:i=e.sent,e.next=3;break;case 11:if(0!==(a=i.authToken).requestStatus){e.next=16;break}return e.abrupt("return",cr(n,r));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dr(e){return Jn(e,(function(e){if(!yr(e))throw wn.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+vn<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function pr(e,t){return vr.apply(this,arguments)}function vr(){return(vr=t(o)(t(g).mark((function e(n,r){var i,a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,or(n,r);case 3:return i=e.sent,a=Object.assign(Object.assign({},r),{authToken:i}),e.next=7,Kn(n.appConfig,a);case 7:return e.abrupt("return",i);case 10:if(e.prev=10,e.t0=e.catch(0),!bn(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,Wn(n.appConfig);case 15:e.next=20;break;case 17:return o=Object.assign(Object.assign({},r),{authToken:{requestStatus:0}}),e.next=20,Kn(n.appConfig,o);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function yr(e){return void 0!==e&&2===e.registrationStatus}function mr(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+gn}(e)}function gr(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function kr(){return(kr=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n){var r,i,a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,e.next=3,Yn(r);case 3:return i=e.sent,a=i.installationEntry,(o=i.registrationPromise)?o.catch(console.error):cr(r).catch(console.error),e.abrupt("return",a.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wr(){return wr=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n){var r,i,a,o=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]&&o[1],i=n,e.next=4,br(i);case 4:return e.next=6,cr(i,r);case 6:return a=e.sent,e.abrupt("return",a.token);case 8:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}function br(e){return _r.apply(this,arguments)}function _r(){return(_r=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(n);case 2:if(!(r=e.sent.registrationPromise)){e.next=6;break}return e.next=6,r;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Er(e){return wn.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr="installations",Ir=function(e){var t=Tt(e.getProvider("app").getImmediate(),xr).getImmediate(),n={getId:function(){return function(e){return kr.apply(this,arguments)}(t)},getToken:function(e){return function(e){return wr.apply(this,arguments)}(t,e)}};return n};It(new Me(xr,(function(e){var t=e.getProvider("app").getImmediate(),n=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){if(!e||!e.options)throw Er("App Configuration");if(!e.name)throw Er("App Name");var t=!0,n=!1,r=void 0;try{for(var i,a=["projectId","apiKey","appId"][Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!e.options[o])throw Er(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Tt(t,"heartbeat"),_delete:function(){return Promise.resolve()}}}),"PUBLIC")),It(new Me("installations-internal",Ir,"PRIVATE")),Dt(dn,pn),Dt(dn,pn,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Tr,Sr="analytics",Ar=6e4,Cr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Or="https://www.googletagmanager.com/gtag/js",Rr=new Qe("@firebase/analytics"),Nr=(Tr={},t(f)(Tr,"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),t(f)(Tr,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),t(f)(Tr,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),t(f)(Tr,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),t(f)(Tr,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),t(f)(Tr,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),t(f)(Tr,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),t(f)(Tr,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),t(f)(Tr,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),t(f)(Tr,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),t(f)(Tr,"no-client-id",'The "client_id" field is empty.'),t(f)(Tr,"invalid-gtag-resource","Trusted Types detected an invalid gtag resource: {$gtagURL}."),Tr),Dr=new _e("analytics","Analytics",Nr);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pr(e){if(!e.startsWith(Or)){var t=Dr.create("invalid-gtag-resource",{gtagURL:e});return Rr.warn(t.message),""}return e}function Lr(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function Mr(e,t){var n=function(e,t){var n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Pr}),r=document.createElement("script"),i="".concat(Or,"?l=").concat(e,"&id=").concat(t);r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Ur(e,t,n,r,i,a){return Fr.apply(this,arguments)}function Fr(){return(Fr=t(o)(t(g).mark((function e(n,r,i,a,o,s){var u,c,l;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=a[o],e.prev=1,!u){e.next=7;break}return e.next=5,r[u];case 5:e.next=14;break;case 7:return e.next=9,Lr(i);case 9:if(c=e.sent,!(l=c.find((function(e){return e.measurementId===o})))){e.next=14;break}return e.next=14,r[l.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),Rr.error(e.t0);case 19:n("config",o,s);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function Br(e,t,n,r,i){return Vr.apply(this,arguments)}function Vr(){return(Vr=t(o)(t(g).mark((function e(n,r,i,a,o){var s,u,c,l,f,h,d,p,v,y,m;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=[],!o||!o.send_to){e.next=38;break}return u=o.send_to,Array.isArray(u)||(u=[u]),e.next=7,Lr(i);case 7:c=e.sent,l=!0,f=!1,h=void 0,e.prev=9,d=u[Symbol.iterator]();case 11:if(l=(p=d.next()).done){e.next=24;break}if(v=p.value,y=c.find((function(e){return e.measurementId===v})),!(m=y&&r[y.appId])){e.next=19;break}s.push(m),e.next=21;break;case 19:return s=[],e.abrupt("break",24);case 21:l=!0,e.next=11;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(9),f=!0,h=e.t0;case 30:e.prev=30,e.prev=31,l||null==d.return||d.return();case 33:if(e.prev=33,!f){e.next=36;break}throw h;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return 0===s.length&&(s=Object.values(r)),e.next=41,Promise.all(s);case 41:n("event",a,o||{}),e.next=47;break;case 44:e.prev=44,e.t1=e.catch(0),Rr.error(e.t1);case 47:case"end":return e.stop()}}),e,null,[[0,44],[9,26,30,38],[31,,33,37]])})))).apply(this,arguments)}function jr(e,n,r,i,a){var s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[i].push(arguments)};return window[a]&&"function"==typeof window[a]&&(s=window[a]),window[a]=function(e,n,r,i){function a(){return a=t(o)(t(g).mark((function a(o){var s,u,c,l,f,d,p,v,y,m,k,b,_,E,x,I,T,S=arguments;return t(g).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(s=S.length,u=new Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=S[c];if(a.prev=1,"event"!==o){a.next=8;break}return l=t(w)(u,2),f=l[0],d=l[1],a.next=6,Br(e,n,r,f,d);case 6:a.next=15;break;case 8:if("config"!==o){a.next=14;break}return p=t(w)(u,2),v=p[0],y=p[1],a.next=12,Ur(e,n,r,i,v,y);case 12:a.next=15;break;case 14:"consent"===o?(m=t(w)(u,1),k=m[0],e("consent","update",k)):"get"===o?(b=t(w)(u,3),_=b[0],E=b[1],x=b[2],e("get",_,E,x)):"set"===o?(I=t(w)(u,1),T=I[0],e("set",T)):e.apply(void 0,[o].concat(t(h)(u)));case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(1),Rr.error(a.t0);case 20:case"end":return a.stop()}}),a,null,[[1,17]])}))),a.apply(this,arguments)}return function(e){return a.apply(this,arguments)}}(s,e,n,r),{gtagCore:s,wrappedGtag:window[a]}}function qr(e){var t=window.document.getElementsByTagName("script"),n=!0,r=!1,i=void 0;try{for(var a,o=Object.values(t)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.src&&s.src.includes(Or)&&s.src.includes(e))return s}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zr=function(){"use strict";function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t(u)(this,e),this.throttleMetadata=n,this.intervalMillis=r}return t(c)(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),Hr=new zr;function Kr(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Gr(e){return Wr.apply(this,arguments)}function Wr(){return(Wr=t(o)(t(g).mark((function e(n){var r,i,a,o,s,u,c,l;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.appId,a=n.apiKey,o={method:"GET",headers:Kr(a)},s=Cr.replace("{app-id}",i),e.next=6,fetch(s,o);case 6:if(200===(u=e.sent).status||304===u.status){e.next=19;break}return c="",e.prev=9,e.next=12,u.json();case 12:l=e.sent,(null===(r=l.error)||void 0===r?void 0:r.message)&&(c=l.error.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:throw Dr.create("config-fetch-failed",{httpStatus:u.status,responseMessage:c});case 19:return e.abrupt("return",u.json());case 20:case"end":return e.stop()}}),e,null,[[9,16]])})))).apply(this,arguments)}function Qr(e){return Jr.apply(this,arguments)}function Jr(){return Jr=t(o)(t(g).mark((function e(n){var r,i,a,s,u,c,l,f,h=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:Hr,i=h.length>2?h[2]:void 0,a=n.options,s=a.appId,u=a.apiKey,c=a.measurementId,s){e.next=4;break}throw Dr.create("no-app-id");case 4:if(u){e.next=8;break}if(!c){e.next=7;break}return e.abrupt("return",{measurementId:c,appId:s});case 7:throw Dr.create("no-api-key");case 8:return l=r.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new ni,setTimeout(t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==i?i:Ar),e.abrupt("return",Xr({appId:s,apiKey:u,measurementId:c},l,f,r));case 12:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}function Xr(e,t,n){return Yr.apply(this,arguments)}function Yr(){return Yr=t(o)(t(g).mark((function e(n,r,i){var a,o,s,u,c,l,f,h,d,p,v=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.throttleEndTimeMillis,o=r.backoffCount,s=v.length>3&&void 0!==v[3]?v[3]:Hr,c=n.appId,l=n.measurementId,e.prev=3,e.next=6,$r(i,a);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!l){e.next=13;break}return Rr.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===e.t0||void 0===e.t0?void 0:e.t0.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,Gr(n);case 17:return f=e.sent,s.deleteThrottleMetadata(c),e.abrupt("return",f);case 22:if(e.prev=22,e.t1=e.catch(14),Zr(h=e.t1)){e.next=33;break}if(s.deleteThrottleMetadata(c),!l){e.next=32;break}return Rr.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==h?void 0:h.message,"]")),e.abrupt("return",{appId:c,measurementId:l});case 32:throw e.t1;case 33:return d=503===Number(null===(u=null==h?void 0:h.customData)||void 0===u?void 0:u.httpStatus)?Pe(o,s.intervalMillis,30):Pe(o,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:o+1},s.setThrottleMetadata(c,p),Rr.debug("Calling attemptFetch again in ".concat(d," millis")),e.abrupt("return",Xr(n,p,i,s));case 38:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),Yr.apply(this,arguments)}function $r(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(Dr.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Zr(e){if(!(e instanceof be&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var ei,ti,ni=function(){"use strict";function e(){t(u)(this,e),this.listeners=[]}return t(c)(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return(ri=t(o)(t(g).mark((function e(n,r,i,a,o){var s,u;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!o.global){e.next=5;break}return n("event",i,a),e.abrupt("return");case 5:return e.next=7,r;case 7:s=e.sent,u=Object.assign(Object.assign({},a),{send_to:s}),n("event",i,u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ii(e){ti=e}function ai(e){ei=e}function oi(){return si.apply(this,arguments)}function si(){return(si=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ge()){e.next=5;break}return Rr.warn(Dr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,ke();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),Rr.warn(Dr.create("indexeddb-unavailable",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function ui(){return(ui=t(o)(t(g).mark((function e(n,r,i,a,o,s,u){var c,l,f,h,d,p,v;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=Qr(n)).then((function(e){i[e.measurementId]=e.appId,n.options.measurementId&&e.measurementId!==n.options.measurementId&&Rr.warn("The measurement ID in the local Firebase config (".concat(n.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return Rr.error(e)})),r.push(l),f=oi().then((function(e){return e?a.getId():void 0})),e.t0=t(w),e.next=8,Promise.all([l,f]);case 8:return e.t1=e.sent,h=(0,e.t0)(e.t1,2),d=h[0],p=h[1],qr(s)||Mr(s,d.measurementId),ti&&(o("consent","default",ti),ii(void 0)),o("js",new Date),(v=null!==(c=null==u?void 0:u.config)&&void 0!==c?c:{}).origin="firebase",v.update=!0,null!=p&&(v.firebase_id=p),o("config",d.measurementId,v),ei&&(o("set",ei),ai(void 0)),e.abrupt("return",d.measurementId);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci,li,fi=function(){"use strict";function e(n){t(u)(this,e),this.app=n}return t(c)(e,[{key:"_delete",value:function(){return delete hi[this.app.options.appId],Promise.resolve()}}]),e}(),hi={},di=[],pi={},vi="dataLayer",yi="gtag",mi=!1;function gi(e,t,n){!function(){var e=[];if(me()&&e.push("This is a browser extension environment."),we()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=Dr.create("invalid-analytics-context",{errorInfo:t});Rr.warn(n.message)}}();var r,i,a=e.options.appId;if(!a)throw Dr.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Dr.create("no-api-key");Rr.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=hi[a])throw Dr.create("already-exists",{id:a});if(!mi){r=vi,i=[],Array.isArray(window[r])?i=window[r]:window[r]=i;var o=jr(hi,di,pi,vi,yi),s=o.wrappedGtag,u=o.gtagCore;li=s,ci=u,mi=!0}return hi[a]=function(e,t,n,r,i,a,o){return ui.apply(this,arguments)}(e,di,pi,t,ci,vi,n),new fi(e)}function ki(e,t,n,r){e=Le(e),function(e,t,n,r,i){return ri.apply(this,arguments)}(li,hi[e.app.options.appId],t,n,r).catch((function(e){return Rr.error(e)}))}var wi="@firebase/analytics",bi="0.10.0";It(new Me(Sr,(function(e,t){var n=t.options;return gi(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),It(new Me("analytics-internal",(function(e){try{var t=e.getProvider(Sr).getImmediate();return{logEvent:function(e,n,r){return ki(t,e,n,r)}}}catch(e){throw Dr.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Dt(wi,bi),Dt(wi,bi,"esm2017");var _i=a("ge8co"),Ei={};Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.default=function(e,t,n){return Ii(e,t,n)};var xi=function(e){return e&&e.__esModule?e:{default:e}}(a("2mz0K"));function Ii(e,t,n){return(Ii="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=xi.default(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n||e):i.value}})(e,t,n)}var Ti,Si=a("fVNic"),Ai=a("jmhxu"),Ci=a("l5bVx"),Oi=(Si=a("fVNic"),Ci=a("l5bVx"),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{}),Ri={},Ni=Ni||{},Di=Oi||self;function Pi(e){var n=void 0===e?"undefined":t(Ci)(e);return"array"==(n="object"!=n?n:e?Array.isArray(e)?"array":n:"null")||"object"==n&&"number"==typeof e.length}function Li(e){var n=void 0===e?"undefined":t(Ci)(e);return"object"==n&&null!=e||"function"==n}var Mi="closure_uid_"+(1e9*Math.random()>>>0),Ui=0;function Fi(e,t,n){return e.call.apply(e.bind,arguments)}function Bi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Vi(e,t,n){return(Vi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fi:Bi).apply(null,arguments)}function ji(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function qi(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function zi(){this.s=this.s,this.o=this.o}zi.prototype.s=!1,zi.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Mi)&&e[Mi]||(e[Mi]=++Ui))},zi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Hi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ki(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Gi(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Pi(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Wi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Wi.prototype.h=function(){this.defaultPrevented=!0};var Qi=function(){if(!Di.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Di.addEventListener("test",(function(){}),t),Di.removeEventListener("test",(function(){}),t)}catch(e){}return e}();function Ji(e){return/^[\s\xa0]*$/.test(e)}function Xi(){var e=Di.navigator;return e&&(e=e.userAgent)?e:""}function Yi(e){return-1!=Xi().indexOf(e)}function $i(e){return $i[" "](e),e}$i[" "]=function(){};var Zi,ea,ta,na=Yi("Opera"),ra=Yi("Trident")||Yi("MSIE"),ia=Yi("Edge"),aa=ia||ra,oa=Yi("Gecko")&&!(-1!=Xi().toLowerCase().indexOf("webkit")&&!Yi("Edge"))&&!(Yi("Trident")||Yi("MSIE"))&&!Yi("Edge"),sa=-1!=Xi().toLowerCase().indexOf("webkit")&&!Yi("Edge");function ua(){var e=Di.document;return e?e.documentMode:void 0}e:{var ca="",la=(ea=Xi(),oa?/rv:([^\);]+)(\)|;)/.exec(ea):ia?/Edge\/([\d\.]+)/.exec(ea):ra?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ea):sa?/WebKit\/(\S+)/.exec(ea):na?/(?:Version)[ \/]?(\S+)/.exec(ea):void 0);if(la&&(ca=la?la[1]:""),ra){var fa=ua();if(null!=fa&&fa>parseFloat(ca)){Zi=String(fa);break e}}Zi=ca}if(Di.document&&ra){var ha=ua();ta=ha||(parseInt(Zi,10)||void 0)}else ta=void 0;var da=ta;function pa(e,t){if(Wi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(oa){e:{try{$i(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:va[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&pa.$.h.call(this)}}qi(pa,Wi);var va={2:"touch",3:"pen",4:"mouse"};pa.prototype.h=function(){pa.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ya="closure_listenable_"+(1e6*Math.random()|0),ma=0;function ga(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++ma,this.fa=this.ia=!1}function ka(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function wa(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ba(e){var t={};for(var n in e)t[n]=e[n];return t}var _a="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ea(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<_a.length;a++)n=_a[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function xa(e){this.src=e,this.g={},this.h=0}function Ia(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Hi(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ka(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ta(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}xa.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ta(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ga(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Sa="closure_lm_"+(1e6*Math.random()|0),Aa={};function Ca(e,t,n,r,i){if(r&&r.once)return Ra(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ca(e,t[a],n,r,i);return null}return n=Fa(n),e&&e[ya]?e.O(t,n,Li(r)?!!r.capture:!!r,i):Oa(e,t,n,!1,r,i)}function Oa(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Li(i)?!!i.capture:!!i,s=Ma(e);if(s||(e[Sa]=s=new xa(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=La;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Qi||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Pa(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ra(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ra(e,t[a],n,r,i);return null}return n=Fa(n),e&&e[ya]?e.P(t,n,Li(r)?!!r.capture:!!r,i):Oa(e,t,n,!0,r,i)}function Na(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Na(e,t[a],n,r,i);else r=Li(r)?!!r.capture:!!r,n=Fa(n),e&&e[ya]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ta(a=e.g[t],n,r,i))&&(ka(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ma(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ta(t,n,r,i)),(n=-1<e?t[e]:null)&&Da(n))}function Da(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ya])Ia(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Pa(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ma(t))?(Ia(n,e),0==n.h&&(n.src=null,t[Sa]=null)):ka(e)}}}function Pa(e){return e in Aa?Aa[e]:Aa[e]="on"+e}function La(e,t){if(e.fa)e=!0;else{t=new pa(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Da(e),e=n.call(r,t)}return e}function Ma(e){return(e=e[Sa])instanceof xa?e:null}var Ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fa(e){return"function"==typeof e?e:(e[Ua]||(e[Ua]=function(t){return e.handleEvent(t)}),e[Ua])}function Ba(){zi.call(this),this.i=new xa(this),this.S=this,this.J=null}function Va(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new Wi(t,e);else if(t instanceof Wi)t.target=t.target||e;else{var i=t;Ea(t=new Wi(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ja(o,r,!0,t)&&i}if(i=ja(o=t.g=e,r,!0,t)&&i,i=ja(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ja(o=t.g=n[a],r,!1,t)&&i}function ja(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Ia(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}qi(Ba,zi),Ba.prototype[ya]=!0,Ba.prototype.removeEventListener=function(e,t,n,r){Na(this,e,t,n,r)},Ba.prototype.N=function(){if(Ba.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ka(n[r]);delete t.g[e],t.h--}}this.J=null},Ba.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ba.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var qa=Di.JSON.stringify,za=function(){"use strict";function e(n,r){t(u)(this,e),this.i=n,this.j=r,this.h=0,this.g=null}return t(c)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Ha(){var e=$a,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ka=function(){"use strict";function e(){t(u)(this,e),this.h=this.g=null}return t(c)(e,[{key:"add",value:function(e,t){var n=Ga.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ga=new za((function(){return new Wa}),(function(e){return e.reset()})),Wa=function(){"use strict";function e(){t(u)(this,e),this.next=this.g=this.h=null}return t(c)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Qa(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ja(e){Di.setTimeout((function(){throw e}),0)}var Xa,Ya=!1,$a=new Ka,Za=function(){var e=Di.Promise.resolve(void 0);Xa=function(){e.then(eo)}},eo=function(){for(var e;e=Ha();){try{e.h.call(e.g)}catch(e){Ja(e)}var t=Ga;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ya=!1};function to(e,t){Ba.call(this),this.h=e||1,this.g=t||Di,this.j=Vi(this.qb,this),this.l=Date.now()}function no(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ro(e,t,n){if("function"==typeof e)n&&(e=Vi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Vi(e.handleEvent,e)}return 2147483647<Number(t)?-1:Di.setTimeout(e,t||0)}function io(e){e.g=ro((function(){e.g=null,e.i&&(e.i=!1,io(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}qi(to,Ba),(Ti=to.prototype).ga=!1,Ti.T=null,Ti.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Va(this,"tick"),this.ga&&(no(this),this.start()))}},Ti.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ti.N=function(){to.$.N.call(this),no(this),delete this.g};var ao=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this)).m=e,a.j=i,a.h=null,a.i=!1,a.g=null,a}return t(c)(r,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:io(this)}},{key:"N",value:function(){t(Ei)(t(Si)(r.prototype),"N",this).call(this),this.g&&(Di.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),r}(zi);function oo(e){zi.call(this),this.h=e,this.g={}}qi(oo,zi);var so=[];function uo(e,t,n,r){Array.isArray(n)||(n&&(so[0]=n.toString()),n=so);for(var i=0;i<n.length;i++){var a=Ca(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function co(e){wa(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Da(e)}),e),e.g={}}function lo(){this.g=!0}function fo(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return qa(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}oo.prototype.N=function(){oo.$.N.call(this),co(this)},oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lo.prototype.Ea=function(){this.g=!1},lo.prototype.info=function(){};var ho={},po=null;function vo(){return po=po||new Ba}function yo(e){Wi.call(this,ho.Ta,e)}function mo(e){var t=vo();Va(t,new yo(t))}function go(e,t){Wi.call(this,ho.STAT_EVENT,e),this.stat=t}function ko(e){var t=vo();Va(t,new go(t,e))}function wo(e,t){Wi.call(this,ho.Ua,e),this.size=t}function bo(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Di.setTimeout((function(){e()}),t)}ho.Ta="serverreachability",qi(yo,Wi),ho.STAT_EVENT="statevent",qi(go,Wi),ho.Ua="timingevent",qi(wo,Wi);var _o={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Eo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function xo(){}function Io(e){return e.h||(e.h=e.i())}function To(){}xo.prototype.h=null;var So,Ao={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Co(){Wi.call(this,"d")}function Oo(){Wi.call(this,"c")}function Ro(){}function No(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new oo(this),this.P=Po,e=aa?125:void 0,this.V=new to(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Do}function Do(){this.i=null,this.g="",this.h=!1}qi(Co,Wi),qi(Oo,Wi),qi(Ro,xo),Ro.prototype.g=function(){return new XMLHttpRequest},Ro.prototype.i=function(){return{}},So=new Ro;var Po=45e3,Lo={},Mo={};function Uo(e,t,n){e.L=1,e.v=ns(Yo(t)),e.s=n,e.S=!0,Fo(e,null)}function Fo(e,t){e.G=Date.now(),qo(e),e.A=Yo(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),vs(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Do,e.g=vu(e.l,n?t:null,!e.s),0<e.O&&(e.M=new ao(Vi(e.Pa,e,e.g),e.O)),uo(e.U,e.g,"readystatechange",e.nb),t=e.I?ba(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),mo(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Bo(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Vo(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=jo(e,n))==Mo){4==t&&(e.o=4,ko(14),i=!1),fo(e.j,e.m,null,"[Incomplete Response]");break}if(r==Lo){e.o=4,ko(15),fo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}fo(e.j,e.m,r,null),Wo(e,r)}Bo(e)&&r!=Mo&&r!=Lo&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ko(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),su(t),t.M=!0,ko(11))):(fo(e.j,e.m,n,"[Invalid Chunked Response]"),Go(e),Ko(e))}function jo(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Mo:(n=Number(t.substring(n,r)),isNaN(n)?Lo:(r+=1)+n>t.length?Mo:(t=t.slice(r,r+n),e.C=r+n,t))}function qo(e){e.Y=Date.now()+e.P,zo(e,e.P)}function zo(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=bo(Vi(e.lb,e),t)}function Ho(e){e.B&&(Di.clearTimeout(e.B),e.B=null)}function Ko(e){0==e.l.H||e.J||lu(e.l,e)}function Go(e){Ho(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,no(e.V),co(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Wo(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||_s(n.i,e)))if(!e.K&&_s(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;cu(n),Zs(n)}ou(n),ko(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=bo(Vi(n.ib,n),6e3));if(1>=bs(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else hu(n,11)}else if((e.K||n.g==e)&&cu(n),!Ji(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Es(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ts(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=pu(r,r.J?r.pa:null,r.Y),d.K){xs(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Ho(p),qo(p)),r.g=d}else au(r);0<n.j.length&&tu(n)}else"stop"!=a[0]&&"close"!=a[0]||hu(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?hu(n,7):$s(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}mo()}catch(a){}}function Qo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Pi(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Pi(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Pi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ti=No.prototype).setTimeout=function(e){this.P=e},Ti.nb=function(e){e=e.target;var t=this.M;t&&3==Gs(e)?t.l():this.Pa(e)},Ti.Pa=function(e){try{if(e==this.g)e:{var t=Gs(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||aa||this.g&&(this.h.h||this.g.ja()||Ws(this.g)))){this.J||4!=t||7==n||mo(),Ho(this);var r=this.g.da();this.ca=r;t:if(Bo(this)){var i=Ws(this.g);e="";var a=i.length,o=4==Gs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Go(this),Ko(this);var s="";break t}this.h.i=new Di.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ji(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ko(12),Go(this),Ko(this);break e}fo(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wo(this,r)}this.S?(Vo(this,t,s),aa&&this.i&&3==t&&(uo(this.U,this.V,"tick",this.mb),this.V.start())):(fo(this.j,this.m,s,null),Wo(this,s)),4==t&&Go(this),this.i&&!this.J&&(4==t?lu(this.l,this):(this.i=!1,qo(this)))}else(function(e){var t={};e=(e.g&&2<=Gs(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Ji(e[n])){var r=Qa(e[n]),i=r[0];if("string"==typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,ko(12)):(this.o=0,ko(13)),Go(this),Ko(this)}}}catch(t){}},Ti.mb=function(){if(this.g){var e=Gs(this.g),t=this.g.ja();this.C<t.length&&(Ho(this),Vo(this,e,t),this.i&&4!=e&&qo(this))}},Ti.cancel=function(){this.J=!0,Go(this)},Ti.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(mo(),ko(17)),Go(this),this.o=2,Ko(this)):zo(this,this.Y-e)};var Jo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xo(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Xo){this.h=e.h,$o(this,e.j),this.s=e.s,this.g=e.g,Zo(this,e.m),this.l=e.l;var t=e.i,n=new fs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),es(this,n),this.o=e.o}else e&&(t=String(e).match(Jo))?(this.h=!1,$o(this,t[1]||"",!0),this.s=rs(t[2]||""),this.g=rs(t[3]||"",!0),Zo(this,t[4]),this.l=rs(t[5]||"",!0),es(this,t[6]||"",!0),this.o=rs(t[7]||"")):(this.h=!1,this.i=new fs(null,this.h))}function Yo(e){return new Xo(e)}function $o(e,t,n){e.j=n?rs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function es(e,t,n){t instanceof fs?(e.i=t,function(e,t){t&&!e.j&&(hs(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ds(this,t),vs(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=is(t,cs)),e.i=new fs(t,e.h))}function ts(e,t,n){e.i.set(t,n)}function ns(e){return ts(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function rs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function is(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,as),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function as(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Xo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(is(t,os,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(is(t,os,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(is(n,"/"==n.charAt(0)?us:ss,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",is(n,ls)),e.join("")};var os=/[#\/\?@]/g,ss=/[#\?:]/g,us=/[#\?]/g,cs=/[#\?@]/g,ls=/#/g;function fs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function hs(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ds(e,t){hs(e),t=ys(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ps(e,t){return hs(e),t=ys(e,t),e.g.has(t)}function vs(e,t,n){ds(e,t),0<n.length&&(e.i=null,e.g.set(ys(e,t),Ki(n)),e.h+=n.length)}function ys(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ti=fs.prototype).add=function(e,t){hs(this),this.i=null,e=ys(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ti.forEach=function(e,t){hs(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ti.ta=function(){hs(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ti.Z=function(e){hs(this);var t=[];if("string"==typeof e)ps(this,e)&&(t=t.concat(this.g.get(ys(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ti.set=function(e,t){return hs(this),this.i=null,ps(this,e=ys(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ti.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ti.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var ms=function e(n,r){"use strict";t(u)(this,e),this.g=n,this.map=r};function gs(e){this.l=e||ks,Di.PerformanceNavigationTiming?e=0<(e=Di.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Di.g&&Di.g.Ka&&Di.g.Ka()&&Di.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ks=10;function ws(e){return!!e.h||!!e.g&&e.g.size>=e.j}function bs(e){return e.h?1:e.g?e.g.size:0}function _s(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Es(e,t){e.g?e.g.add(t):e.h=t}function xs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Is(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t=e.i,n=!0,r=!1,i=void 0;try{for(var a,o=e.g.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t=t.concat(s.F)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}return Ki(e.i)}gs.prototype.cancel=function(){if(this.i=Is(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e=!0,t=!1,n=void 0;try{for(var r,i=this.g.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.cancel()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.g.clear()}};var Ts=function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,[{key:"stringify",value:function(e){return Di.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Di.JSON.parse(e,void 0)}}]),e}();function Ss(){this.g=new Ts}function As(e,t,n){var r=n||"";try{Qo(e,(function(e,n){var i=e;Li(e)&&(i=qa(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Cs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Os(e){this.l=e.ec||null,this.j=e.ob||!1}function Rs(e,t){Ba.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ns,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qi(Os,xo),Os.prototype.g=function(){return new Rs(this.l,this.j)},Os.prototype.i=function(e){return function(){return e}}({}),qi(Rs,Ba);var Ns=0;function Ds(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Ps(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ls(e)}function Ls(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ti=Rs.prototype).open=function(e,t){if(this.readyState!=Ns)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ls(this)},Ti.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Di).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ti.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ps(this)),this.readyState=Ns},Ti.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Di.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ds(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ti.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ps(this):Ls(this),3==this.readyState&&Ds(this)}},Ti.Za=function(e){this.g&&(this.response=this.responseText=e,Ps(this))},Ti.Ya=function(e){this.g&&(this.response=e,Ps(this))},Ti.ka=function(){this.g&&Ps(this)},Ti.setRequestHeader=function(e,t){this.v.append(e,t)},Ti.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ti.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ms=Di.JSON.parse;function Us(e){Ba.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Fs,this.L=this.M=!1}qi(Us,Ba);var Fs="",Bs=/^https?$/i,Vs=["POST","PUT"];function js(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qs(e),Hs(e)}function qs(e){e.F||(e.F=!0,Va(e,"complete"),Va(e,"error"))}function zs(e){if(e.h&&void 0!==Ni&&(!e.C[1]||4!=Gs(e)||2!=e.da()))if(e.v&&4==Gs(e))ro(e.La,0,e);else if(Va(e,"readystatechange"),4==Gs(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Jo)[1]||null;!a&&Di.self&&Di.self.location&&(a=Di.self.location.protocol.slice(0,-1)),i=!Bs.test(a?a.toLowerCase():"")}t=i}if(t)Va(e,"complete"),Va(e,"success");else{e.m=6;try{var o=2<Gs(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.da()+"]",qs(e)}}finally{Hs(e)}}}function Hs(e,t){if(e.g){Ks(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Va(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Ks(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Di.clearTimeout(e.A),e.A=null)}function Gs(e){return e.g?e.g.readyState:0}function Ws(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Fs:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Qs(e){var t="";return wa(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Js(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Qs(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ts(e,t,n))}function Xs(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ys(e){this.Ga=0,this.j=[],this.l=new lo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xs("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xs("baseRetryDelayMs",5e3,e),this.hb=Xs("retryDelaySeedMs",1e4,e),this.eb=Xs("forwardChannelMaxRetries",2,e),this.xa=Xs("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new gs(e&&e.concurrentRequestLimit),this.Ja=new Ss,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function $s(e){if(eu(e),3==e.H){var t=e.W++,n=Yo(e.I);if(ts(n,"SID",e.K),ts(n,"RID",t),ts(n,"TYPE","terminate"),ru(e,n),(t=new No(e,e.l,t)).L=2,t.v=ns(Yo(n)),n=!1,Di.navigator&&Di.navigator.sendBeacon)try{n=Di.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&Di.Image&&((new Image).src=t.v,n=!0),n||(t.g=vu(t.l,null),t.g.ha(t.v)),t.G=Date.now(),qo(t)}du(e)}function Zs(e){e.g&&(su(e),e.g.cancel(),e.g=null)}function eu(e){Zs(e),e.u&&(Di.clearTimeout(e.u),e.u=null),cu(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Di.clearTimeout(e.m),e.m=null)}function tu(e){if(!ws(e.i)&&!e.m){e.m=!0;var t=e.Na;Xa||Za(),Ya||(Xa(),Ya=!0),$a.add(t,e),e.C=0}}function nu(e,t){var n;n=t?t.m:e.W++;var r=Yo(e.I);ts(r,"SID",e.K),ts(r,"RID",n),ts(r,"AID",e.V),ru(e,r),e.o&&e.s&&Js(r,e.o,e.s),n=new No(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=iu(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Es(e.i,n),Uo(n,r,t)}function ru(e,t){e.na&&wa(e.na,(function(e,n){ts(t,n,e)})),e.h&&Qo({},(function(e,n){ts(t,n,e)}))}function iu(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Vi(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{As(l,o,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function au(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Xa||Za(),Ya||(Xa(),Ya=!0),$a.add(t,e),e.A=0}}function ou(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=bo(Vi(e.Ma,e),fu(e,e.A)),e.A++,!0)}function su(e){null!=e.B&&(Di.clearTimeout(e.B),e.B=null)}function uu(e){e.g=new No(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Yo(e.wa);ts(t,"RID","rpc"),ts(t,"SID",e.K),ts(t,"AID",e.V),ts(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ts(t,"TO",e.qa),ts(t,"TYPE","xmlhttp"),ru(e,t),e.o&&e.s&&Js(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=ns(Yo(t)),n.s=null,n.S=!0,Fo(n,e)}function cu(e){null!=e.v&&(Di.clearTimeout(e.v),e.v=null)}function lu(e,t){var n=null;if(e.g==t){cu(e),su(e),e.g=null;var r=2}else{if(!_s(e.i,t))return;n=t.F,xs(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Va(r=vo(),new wo(r,n)),tu(e)}else au(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(bs(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=bo(Vi(e.Na,e,t),fu(e,e.C)),e.C++,0)))}(e,t)||2==r&&ou(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:hu(e,5);break;case 4:hu(e,10);break;case 3:hu(e,6);break;default:hu(e,2)}}function fu(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function hu(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Vi(e.pb,e);n||(n=new Xo("//www.google.com/images/cleardot.gif"),Di.location&&"http"==Di.location.protocol||$o(n,"https"),ns(n)),function(e,t){var n=new lo;if(Di.Image){var r=new Image;r.onload=ji(Cs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ji(Cs,n,r,"TestLoadImage: error",!1,t),r.onabort=ji(Cs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ji(Cs,n,r,"TestLoadImage: timeout",!1,t),Di.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ko(2);e.H=0,e.h&&e.h.za(t),du(e),eu(e)}function du(e){if(e.H=0,e.ma=[],e.h){var t=Is(e.i);0==t.length&&0==e.j.length||(Gi(e.ma,t),Gi(e.ma,e.j),e.i.i.length=0,Ki(e.j),e.j.length=0),e.h.ya()}}function pu(e,t,n){var r=n instanceof Xo?Yo(n):new Xo(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Zo(r,r.m);else{var i=Di.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Xo(null);r&&$o(a,r),t&&(a.g=t),i&&Zo(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ts(r,n,t),ts(r,"VER",e.ra),ru(e,r),r}function vu(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Us(new Os({ob:!0})):new Us(e.va)).Oa(e.J),t}function yu(){}function mu(){if(ra&&!(10<=Number(da)))throw Error("Environmental error: no available transport.")}function gu(e,t){Ba.call(this),this.g=new Ys(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ji(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ji(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bu(this)}function ku(e){Co.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wu(){Oo.call(this),this.status=1}function bu(e){this.g=e}function _u(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Eu(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function xu(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Ti=Us.prototype).Oa=function(e){this.M=e},Ti.ha=function(e,n,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);n=n?n.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():So.g(),this.C=this.u?Io(this.u):Io(So),this.g.onreadystatechange=Vi(this.La,this);try{this.G=!0,this.g.open(n,String(e),!0),this.G=!1}catch(e){return void js(this,e)}if(e=r||"",r=new Map(this.headers),i){var a=!0,o=!1,s=void 0;if(Object.getPrototypeOf(i)===Object.prototype)for(var u in i)r.set(u,i[u]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));try{for(var c,l=i.keys()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;r.set(f,i.get(f))}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}}i=Array.from(r.keys()).find((function(e){return"content-type"==e.toLowerCase()})),u=Di.FormData&&e instanceof Di.FormData,!(0<=Hi(Vs,n))||i||u||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var h=!0,d=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var m=t(w)(v.value,2),g=m[0],k=m[1];this.g.setRequestHeader(g,k)}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ks(this),0<this.B&&((this.L=function(e){return ra&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vi(this.ua,this)):this.A=ro(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){js(this,e)}},Ti.ua=function(){void 0!==Ni&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Va(this,"timeout"),this.abort(8))},Ti.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Va(this,"complete"),Va(this,"abort"),Hs(this))},Ti.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hs(this,!0)),Us.$.N.call(this)},Ti.La=function(){this.s||(this.G||this.v||this.l?zs(this):this.kb())},Ti.kb=function(){zs(this)},Ti.isActive=function(){return!!this.g},Ti.da=function(){try{return 2<Gs(this)?this.g.status:-1}catch(e){return-1}},Ti.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Ti.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ms(t)}},Ti.Ia=function(){return this.m},Ti.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ti=Ys.prototype).ra=8,Ti.H=1,Ti.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new No(this,this.l,e),n=this.s;if(this.U&&(n?Ea(n=ba(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=iu(this,t,r),ts(i=Yo(this.I),"RID",e),ts(i,"CVER",22),this.F&&ts(i,"X-HTTP-Session-Id",this.F),ru(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Qs(n)))+"&"+r:this.o&&Js(i,this.o,n)),Es(this.i,t),this.bb&&ts(i,"TYPE","init"),this.P?(ts(i,"$req",r),ts(i,"SID","null"),t.aa=!0,Uo(t,i,null)):Uo(t,i,r),this.H=2}}else 3==this.H&&(e?nu(this,e):0==this.j.length||ws(this.i)||nu(this))},Ti.Ma=function(){if(this.u=null,uu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=bo(Vi(this.jb,this),e)}},Ti.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ko(10),Zs(this),uu(this))},Ti.ib=function(){null!=this.v&&(this.v=null,Zs(this),ou(this),ko(19))},Ti.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ko(2)):(this.l.info("Failed to ping google.com"),ko(1))},Ti.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ti=yu.prototype).Ba=function(){},Ti.Aa=function(){},Ti.za=function(){},Ti.ya=function(){},Ti.isActive=function(){return!0},Ti.Va=function(){},mu.prototype.g=function(e,t){return new gu(e,t)},qi(gu,Ba),gu.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ko(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=pu(e,null,e.Y),tu(e)},gu.prototype.close=function(){$s(this.g)},gu.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=qa(e),e=n);t.j.push(new ms(t.fb++,e)),3==t.H&&tu(t)},gu.prototype.N=function(){this.g.h=null,delete this.j,$s(this.g),delete this.g,gu.$.N.call(this)},qi(ku,Co),qi(wu,Oo),qi(bu,yu),bu.prototype.Ba=function(){Va(this.g,"a")},bu.prototype.Aa=function(e){Va(this.g,new ku(e))},bu.prototype.za=function(e){Va(this.g,new wu)},bu.prototype.ya=function(){Va(this.g,"b")},qi(_u,(function(){this.blockSize=-1})),_u.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},_u.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Eu(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Eu(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Eu(this,r),i=0;break}}this.h=i,this.i+=t},_u.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Iu={};function Tu(e){return-128<=e&&128>e?function(e,t){var n=Iu;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new xu([0|e],0>e?-1:0)})):new xu([0|e],0>e?-1:0)}function Su(e){if(isNaN(e)||!isFinite(e))return Cu;if(0>e)return Pu(Su(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Au;return new xu(t,0)}var Au=4294967296,Cu=Tu(0),Ou=Tu(1),Ru=Tu(16777216);function Nu(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Du(e){return-1==e.h}function Pu(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new xu(n,~e.h).add(Ou)}function Lu(e,t){return e.add(Pu(t))}function Mu(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Uu(e,t){this.g=e,this.h=t}function Fu(e,t){if(Nu(t))throw Error("division by zero");if(Nu(e))return new Uu(Cu,Cu);if(Du(e))return t=Fu(Pu(e),t),new Uu(Pu(t.g),Pu(t.h));if(Du(t))return t=Fu(e,Pu(t)),new Uu(Pu(t.g),t.h);if(30<e.g.length){if(Du(e)||Du(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ou,r=t;0>=r.X(e);)n=Bu(n),r=Bu(r);var i=Vu(n,1),a=Vu(r,1);for(r=Vu(r,2),n=Vu(n,2);!Nu(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Vu(r,1),n=Vu(n,1)}return t=Lu(e,i.R(t)),new Uu(i,t)}for(i=Cu;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Su(n)).R(t);Du(o)||0<o.X(e);)o=(a=Su(n-=r)).R(t);Nu(a)&&(a=Ou),i=i.add(a),e=Lu(e,o)}return new Uu(i,e)}function Bu(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new xu(n,e.h)}function Vu(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new xu(i,e.h)}(Ti=xu.prototype).ea=function(){if(Du(this))return-Pu(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Au+r)*t,t*=Au}return e},Ti.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Nu(this))return"0";if(Du(this))return"-"+Pu(this).toString(e);for(var t=Su(Math.pow(e,6)),n=this,r="";;){var i=Fu(n,t).g,a=((0<(n=Lu(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Nu(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ti.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ti.X=function(e){return Du(e=Lu(this,e))?-1:Nu(e)?0:1},Ti.abs=function(){return Du(this)?Pu(this):this},Ti.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new xu(n,-2147483648&n[n.length-1]?-1:0)},Ti.R=function(e){if(Nu(this)||Nu(e))return Cu;if(Du(this))return Du(e)?Pu(this).R(Pu(e)):Pu(Pu(this).R(e));if(Du(e))return Pu(this.R(Pu(e)));if(0>this.X(Ru)&&0>e.X(Ru))return Su(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,Mu(n,2*r+2*i),n[2*r+2*i+1]+=a*u,Mu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,Mu(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,Mu(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new xu(n,0)},Ti.gb=function(e){return Fu(this,e).h},Ti.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new xu(n,this.h&e.h)},Ti.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new xu(n,this.h|e.h)},Ti.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new xu(n,this.h^e.h)},mu.prototype.createWebChannel=mu.prototype.g,gu.prototype.send=gu.prototype.u,gu.prototype.open=gu.prototype.m,gu.prototype.close=gu.prototype.close,_o.NO_ERROR=0,_o.TIMEOUT=8,_o.HTTP_ERROR=6,Eo.COMPLETE="complete",To.EventType=Ao,Ao.OPEN="a",Ao.CLOSE="b",Ao.ERROR="c",Ao.MESSAGE="d",Ba.prototype.listen=Ba.prototype.O,Us.prototype.listenOnce=Us.prototype.P,Us.prototype.getLastError=Us.prototype.Sa,Us.prototype.getLastErrorCode=Us.prototype.Ia,Us.prototype.getStatus=Us.prototype.da,Us.prototype.getResponseJson=Us.prototype.Wa,Us.prototype.getResponseText=Us.prototype.ja,Us.prototype.send=Us.prototype.ha,Us.prototype.setWithCredentials=Us.prototype.Oa,_u.prototype.digest=_u.prototype.l,_u.prototype.reset=_u.prototype.reset,_u.prototype.update=_u.prototype.j,xu.prototype.add=xu.prototype.add,xu.prototype.multiply=xu.prototype.R,xu.prototype.modulo=xu.prototype.gb,xu.prototype.compare=xu.prototype.X,xu.prototype.toNumber=xu.prototype.ea,xu.prototype.toString=xu.prototype.toString,xu.prototype.getBits=xu.prototype.D,xu.fromNumber=Su,xu.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Pu(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Su(Math.pow(n,8)),i=Cu,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=Su(Math.pow(n,o)),i=i.R(o).add(Su(s))):i=(i=i.R(r)).add(Su(s))}return i};var ju=Ri.createWebChannelTransport=function(){return new mu},qu=Ri.getStatEventTarget=function(){return vo()},zu=Ri.ErrorCode=_o,Hu=Ri.EventType=Eo,Ku=Ri.Event=ho,Gu=Ri.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Wu=Ri.FetchXmlHttpFactory=Os,Qu=Ri.WebChannel=To,Ju=Ri.XhrIo=Us,Xu=Ri.Md5=_u,Yu=Ri.Integer=xu,$u="@firebase/firestore",Zu=function(){"use strict";function e(n){t(u)(this,e),this.uid=n}return t(c)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Zu.UNAUTHENTICATED=new Zu(null),Zu.GOOGLE_CREDENTIALS=new Zu("google-credentials-uid"),Zu.FIRST_PARTY=new Zu("first-party-uid"),Zu.MOCK_USER=new Zu("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ec="10.5.2",tc=new Qe("@firebase/firestore");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(){return tc.logLevel}function rc(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(tc.logLevel<=Be.DEBUG){var a,o=r.map(oc);(a=tc).debug.apply(a,["Firestore (".concat(ec,"): ").concat(e)].concat(t(h)(o)))}}function ic(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(tc.logLevel<=Be.ERROR){var a,o=r.map(oc);(a=tc).error.apply(a,["Firestore (".concat(ec,"): ").concat(e)].concat(t(h)(o)))}}function ac(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(tc.logLevel<=Be.WARN){var a,o=r.map(oc);(a=tc).warn.apply(a,["Firestore (".concat(ec,"): ").concat(e)].concat(t(h)(o)))}}function oc(e){if("string"==typeof e)return e;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return t=e,JSON.stringify(t)}catch(t){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ec,") INTERNAL ASSERTION FAILED: ")+e;throw ic(t),new Error(t)}function uc(e,t){e||sc()}function cc(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fc=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this,e,i)).code=e,a.message=i,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},t(Ai)(a)}return r}(be),hc=function e(){"use strict";var n=this;t(u)(this,e),this.promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))},dc=function e(n,r){"use strict";t(u)(this,e),this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(n))},pc=function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Zu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),vc=function(){"use strict";function e(n){t(u)(this,e),this.token=n,this.changeListener=null}return t(c)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yc=function(){"use strict";function e(n){t(u)(this,e),this.t=n,this.currentUser=Zu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return t(c)(e,[{key:"start",value:function(e,n){var r=this,i=this.i,a=function(e){return r.i!==i?(i=r.i,n(e)):Promise.resolve()},s=new hc;this.o=function(){var t=r;r.i++,r.currentUser=r.u(),s.resolve(),s=new hc,e.enqueueRetryable((function(){return a(t.currentUser)}))};var u=function(){var n=s,i=r;e.enqueueRetryable(t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.promise;case 2:return e.next=4,a(i.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){rc("FirebaseAuthCredentialsProvider","Auth detected"),r.auth=e,r.auth.addAuthTokenListener(r.o),u()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!r.auth){var e=r.t.getImmediate({optional:!0});e?c(e):(rc("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hc)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(rc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(uc("string"==typeof n.accessToken),new dc(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return uc(null===e||"string"==typeof e),new Zu(e)}}]),e}(),mc=function(){"use strict";function e(n,r,i){t(u)(this,e),this.l=n,this.h=r,this.P=i,this.type="FirstParty",this.user=Zu.FIRST_PARTY,this.I=new Map}return t(c)(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),gc=function(){"use strict";function e(n,r,i){t(u)(this,e),this.l=n,this.h=r,this.P=i}return t(c)(e,[{key:"getToken",value:function(){return Promise.resolve(new mc(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Zu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),kc=function e(n){"use strict";t(u)(this,e),this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)},wc=function(){"use strict";function e(n){t(u)(this,e),this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null}return t(c)(e,[{key:"start",value:function(e,t){var n=this;this.o=function(r){e.enqueueRetryable((function(){return function(e){null!=e.error&&rc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,rc("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()}(r)}))};var r=function(e){rc("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?r(e):rc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(uc("string"==typeof t.token),e.R=t.token,new kc(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bc(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _c=function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,null,[{key:"newId",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=bc(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ec(e,t){return e<t?-1:e>t?1:0}function xc(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ic=function(){"use strict";function e(n,r){if(t(u)(this,e),this.seconds=n,this.nanoseconds=r,r<0)throw new fc(lc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new fc(lc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new fc(lc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new fc(lc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}return t(c)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ec(this.nanoseconds,e.nanoseconds):Ec(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Tc=function(){"use strict";function e(n){t(u)(this,e),this.timestamp=n}return t(c)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ic(0,0))}},{key:"max",value:function(){return new e(new Ic(253402300799,999999999))}}]),e}(),Sc=function(){"use strict";function e(n,r,i){t(u)(this,e),void 0===r?r=0:r>n.length&&sc(),void 0===i?i=n.length-r:i>n.length-r&&sc(),this.segments=n,this.offset=r,this.len=i}return t(c)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ac=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.apply(this,arguments)}return t(c)(r,[{key:"construct",value:function(e,t,n){return new r(e,t,n)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=[],o=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f,d=c.value;if(d.indexOf("//")>=0)throw new fc(lc.INVALID_ARGUMENT,"Invalid segment (".concat(d,"). Paths must not contain // in them."));(f=a).push.apply(f,t(h)(d.split("/").filter((function(e){return e.length>0}))))}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return new r(a)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(Sc),Cc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Oc=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.apply(this,arguments)}return t(c)(r,[{key:"construct",value:function(e,t,n){return new r(e,t,n)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Cc.test(e)}},{key:"keyField",value:function(){return new r(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],n="",i=0,a=function(){if(0===n.length)throw new fc(lc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new fc(lc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new fc(lc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(n+=s,i++):(a(),i++)}if(a(),o)throw new fc(lc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new r(t)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(Sc),Rc=function(){"use strict";function e(n){t(u)(this,e),this.path=n}return t(c)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ac.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ac.fromString(t))}},{key:"fromName",value:function(t){return new e(Ac.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ac.emptyPath())}},{key:"comparator",value:function(e,t){return Ac.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ac(t.slice()))}}]),e}(),Nc=function e(n,r,i,a){"use strict";t(u)(this,e),this.indexId=n,this.collectionGroup=r,this.fields=i,this.indexState=a};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nc.UNKNOWN_ID=-1;function Dc(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Tc.fromTimestamp(1e9===r?new Ic(n+1,0):new Ic(n,r));return new Lc(i,Rc.empty(),t)}function Pc(e){return new Lc(e.readTime,e.key,-1)}var Lc=function(){"use strict";function e(n,r,i){t(u)(this,e),this.readTime=n,this.documentKey=r,this.largestBatchId=i}return t(c)(e,null,[{key:"min",value:function(){return new e(Tc.min(),Rc.empty(),-1)}},{key:"max",value:function(){return new e(Tc.max(),Rc.empty(),-1)}}]),e}();function Mc(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Rc.comparator(e.documentKey,t.documentKey))?n:Ec(e.largestBatchId,t.largestBatchId)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fc=function(){"use strict";function e(){t(u)(this,e),this.onCommittedListeners=[]}return t(c)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Bc(e){return Vc.apply(this,arguments)}function Vc(){return(Vc=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code===lc.FAILED_PRECONDITION&&n.message===Uc){e.next=2;break}throw n;case 2:rc("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jc=function(){"use strict";function e(n){var r=this;t(u)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n((function(e){r.isDone=!0,r.result=e,r.nextCallback&&r.nextCallback(e)}),(function(e){r.isDone=!0,r.error=e,r.catchCallback&&r.catchCallback(e)}))}return t(c)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&sc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){var a=r;r.nextCallback=function(n){a.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){a.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n=e.resolve(!1),r=!0,i=!1,a=void 0;try{for(var o,s=function(t,r){var i=r.value;n=n.next((function(t){return t?e.resolve(t):i()}))},u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=function(i){var u=i;n(t[u]).next((function(t){o[u]=t,++s===a&&e(o)}),(function(e){return r(e)}))},a=t.length,o=new Array(a),s=0,u=0;u<a;u++)i(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){var i=function(){!0===t()?n().next((function(){i()}),r):e()};i()}))}}]),e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(e){return"IndexedDbTransactionError"===e.name}var zc=function(){"use strict";function e(n,r){var i=this;t(u)(this,e),this.previousValue=n,r&&(r.sequenceNumberHandler=function(e){return i.se(e)},this.oe=function(e){return r.writeSequenceNumber(e)})}return t(c)(e,[{key:"se",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.oe&&this.oe(e),e}}]),e}();function Hc(e){return null==e}function Kc(e){return 0===e&&1/e==-1/0}function Gc(e){return"number"==typeof e&&Number.isInteger(e)&&!Kc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zc._e=-1;var Wc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qc=(t(h)(Wc).concat(["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Jc=Qc;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t(h)(Jc).concat(["indexConfiguration","indexState","indexEntries"]);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $c(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zc=function(){"use strict";function e(n,r){t(u)(this,e),this.comparator=n,this.root=r||tl.EMPTY}return t(c)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tl.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tl.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new el(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new el(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new el(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new el(this.root,e,this.comparator,!0)}}]),e}(),el=function(){"use strict";function e(n,r,i,a){t(u)(this,e),this.isReverse=a,this.nodeStack=[];for(var o=1;!n.isEmpty();)if(o=r?i(n.key,r):1,r&&a&&(o*=-1),o<0)n=this.isReverse?n.left:n.right;else{if(0===o){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}return t(c)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),tl=function(){"use strict";function e(n,r,i,a,o){t(u)(this,e),this.key=n,this.value=r,this.color=null!=i?i:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return t(c)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw sc();if(this.right.isRed())throw sc();var e=this.left.check();if(e!==this.right.check())throw sc();return e+(this.isRed()?0:1)}}]),e}();tl.EMPTY=null,tl.RED=!0,tl.BLACK=!1,tl.EMPTY=new(function(){"use strict";function e(){t(u)(this,e),this.size=0}return t(c)(e,[{key:"key",get:function(){throw sc()}},{key:"value",get:function(){throw sc()}},{key:"color",get:function(){throw sc()}},{key:"left",get:function(){throw sc()}},{key:"right",get:function(){throw sc()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new tl(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var nl=function(){"use strict";function e(n){t(u)(this,e),this.comparator=n,this.data=new Zc(this.comparator)}return t(c)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new rl(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new rl(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),rl=function(){"use strict";function e(n){t(u)(this,e),this.iter=n}return t(c)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var il=function(){"use strict";function e(n){t(u)(this,e),this.fields=n,n.sort(Oc.comparator)}return t(c)(e,[{key:"unionWith",value:function(t){var n=new nl(Oc.comparator),r=!0,i=!1,a=void 0;try{for(var o,s=this.fields[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n=n.add(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=!0,l=!1,f=void 0;try{for(var h,d=t[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;n=n.add(p)}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}return new e(n.toArray())}},{key:"covers",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.fields[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.isPrefixOf(e))return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"isEqual",value:function(e){return xc(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),al=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){var e;return t(u)(this,r),(e=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="Base64DecodeError",t(Ai)(e)}return r}(t(O)(Error));
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ol=Symbol.iterator,sl=function(){"use strict";function e(n){t(u)(this,e),this.binaryString=n}return t(c)(e,[{key:ol,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ec(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new al("Invalid base64 string: "+e):e}}(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sl.EMPTY_BYTE_STRING=new sl("");var ul=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cl(e){if(uc(!!e),"string"==typeof e){var t=0,n=ul.exec(e);if(uc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ll(e.seconds),nanos:ll(e.nanos)}}function ll(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function fl(e){return"string"==typeof e?sl.fromBase64String(e):sl.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function dl(e){var t=e.mapValue.fields.__previous_value__;return hl(t)?dl(t):t}function pl(e){var t=cl(e.mapValue.fields.__local_write_time__.timestampValue);return new Ic(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vl=function e(n,r,i,a,o,s,c,l,f){"use strict";t(u)(this,e),this.databaseId=n,this.appId=r,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=f},yl=function(){"use strict";function e(n,r){t(u)(this,e),this.projectId=n,this.database=r||"(default)"}return t(c)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),ml={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hl(e)?4:Nl(e)?9007199254740991:10:sc()}function kl(e,t){if(e===t)return!0;var n,r=gl(e);if(r!==gl(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pl(e).isEqual(pl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=cl(e.timestampValue),r=cl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,fl(e.bytesValue).isEqual(fl(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ll(e.geoPointValue.latitude)===ll(t.geoPointValue.latitude)&&ll(e.geoPointValue.longitude)===ll(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ll(e.integerValue)===ll(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ll(e.doubleValue),r=ll(t.doubleValue);return n===r?Kc(n)===Kc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xc(e.arrayValue.values||[],t.arrayValue.values||[],kl);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xc(n)!==Xc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!kl(n[i],r[i])))return!1;return!0}(e,t);default:return sc()}}function wl(e,t){return void 0!==(e.values||[]).find((function(e){return kl(e,t)}))}function bl(e,t){if(e===t)return 0;var n,r,i,a,o=gl(e),s=gl(t);if(o!==s)return Ec(o,s);switch(o){case 0:case 9007199254740991:return 0;case 1:return Ec(e.booleanValue,t.booleanValue);case 2:return r=t,i=ll((n=e).integerValue||n.doubleValue),a=ll(r.integerValue||r.doubleValue),i<a?-1:i>a?1:i===a?0:isNaN(i)?isNaN(a)?0:-1:1;case 3:return _l(e.timestampValue,t.timestampValue);case 4:return _l(pl(e),pl(t));case 5:return Ec(e.stringValue,t.stringValue);case 6:return function(e,t){var n=fl(e),r=fl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ec(n[i],r[i]);if(0!==a)return a}return Ec(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ec(ll(e.latitude),ll(t.latitude));return 0!==n?n:Ec(ll(e.longitude),ll(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=bl(n[i],r[i]);if(a)return a}return Ec(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ml.mapValue&&t===ml.mapValue)return 0;if(e===ml.mapValue)return 1;if(t===ml.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Ec(r[o],a[o]);if(0!==s)return s;var u=bl(n[r[o]],i[a[o]]);if(0!==u)return u}return Ec(r.length,a.length)}(e.mapValue,t.mapValue);default:throw sc()}}function _l(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ec(e,t);var n=cl(e),r=cl(t),i=Ec(n.seconds,r.seconds);return 0!==i?i:Ec(n.nanos,r.nanos)}function El(e){return xl(e)}function xl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(t=e.timestampValue,n=cl(t),"time(".concat(n.seconds,",").concat(n.nanos,")")):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return fl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Rc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t="[",n=!0,r=!0,i=!1,a=void 0;try{for(var o,s=(e.values||[])[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n?n=!1:t+=",",t+=xl(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t+"]"}(e.arrayValue):"mapValue"in e?function(e){var t=Object.keys(e.fields||{}).sort(),n="{",r=!0,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r?r=!1:n+=",",n+="".concat(c,":").concat(xl(e.fields[c]))}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n+"}"}(e.mapValue):sc();var t,n}function Il(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Tl(e){return!!e&&"integerValue"in e}function Sl(e){return!!e&&"arrayValue"in e}function Al(e){return!!e&&"nullValue"in e}function Cl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ol(e){return!!e&&"mapValue"in e}function Rl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Yc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Rl(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Rl(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Nl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Dl=function(){"use strict";function e(n){t(u)(this,e),this.value=n}return t(c)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ol(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rl(t)}},{key:"setAll",value:function(e){var t=this,n=Oc.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Rl(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ol(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return kl(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ol(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Yc(t,(function(t,n){return e[t]=n}));var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;delete e[u]}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"clone",value:function(){return new e(Rl(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Pl(e){var t=[];return Yc(e.fields,(function(e,n){var r=new Oc([e]);if(Ol(n)){var i=Pl(n.mapValue).fields,a=!0,o=!1,s=void 0;if(0===i.length)t.push(r);else try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;t.push(r.child(l))}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}else t.push(r)})),new il(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ll=function(){"use strict";function e(n,r,i,a,o,s,c){t(u)(this,e),this.key=n,this.documentType=r,this.version=i,this.readTime=a,this.createTime=o,this.data=s,this.documentState=c}return t(c)(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Tc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Dl.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Dl.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Tc.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Tc.min(),Tc.min(),Tc.min(),Dl.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Tc.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Tc.min(),Tc.min(),Dl.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Tc.min(),Tc.min(),Dl.empty(),2)}}]),e}(),Ml=function e(n,r){"use strict";t(u)(this,e),this.position=n,this.inclusive=r};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Rc.comparator(Rc.fromName(o.referenceValue),n.key):bl(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Fl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!kl(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bl=function e(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";t(u)(this,e),this.field=n,this.dir=r};function Vl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jl=function e(){"use strict";t(u)(this,e)},ql=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a){var o;return t(u)(this,r),(o=n.call(this)).field=e,o.op=i,o.value=a,t(Ai)(o)}return t(c)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(bl(t,this.value)):null!==t&&gl(this.value)===gl(t)&&this.matchesComparison(bl(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sc()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}}],[{key:"create",value:function(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Xl(e,t,n):"array-contains"===t?new ef(e,n):"in"===t?new tf(e,n):"not-in"===t?new nf(e,n):"array-contains-any"===t?new rf(e,n):new r(e,t,n)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Yl(e,n):new $l(e,n)}}]),r}(jl),zl=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this)).filters=e,a.op=i,a.ue=null,t(Ai)(a)}return t(c)(r,[{key:"matches",value:function(e){return Hl(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ue||(this.ue=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ue}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}}],[{key:"create",value:function(e,t){return new r(e,t)}}]),r}(jl);function Hl(e){return"and"===e.op}function Kl(e){return Gl(e)&&Hl(e)}function Gl(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.filters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value instanceof zl)return!1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}function Wl(e){if(e instanceof ql)return e.field.canonicalString()+e.op.toString()+El(e.value);if(Kl(e))return e.filters.map((function(e){return Wl(e)})).join(",");var t=e.filters.map((function(e){return Wl(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ql(e,t){return e instanceof ql?(n=e,(r=t)instanceof ql&&n.op===r.op&&n.field.isEqual(r.field)&&kl(n.value,r.value)):e instanceof zl?function(e,t){return t instanceof zl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ql(n,t.filters[r])}),!0)}(e,t):void sc();var n,r}function Jl(e){return e instanceof ql?"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(El(t.value)):e instanceof zl?function(e){return e.op.toString()+" {"+e.getFilters().map(Jl).join(" ,")+"}"}(e):"Filter";var t}var Xl=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a){var o;return t(u)(this,r),(o=n.call(this,e,i,a)).key=Rc.fromName(a.referenceValue),t(Ai)(o)}return t(c)(r,[{key:"matches",value:function(e){var t=Rc.comparator(e.key,this.key);return this.matchesComparison(t)}}]),r}(ql),Yl=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this,e,"in",i)).keys=Zl("in",i),t(Ai)(a)}return t(c)(r,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),r}(ql),$l=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this,e,"not-in",i)).keys=Zl("not-in",i),t(Ai)(a)}return t(c)(r,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),r}(ql);function Zl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Rc.fromName(e.referenceValue)}))}var ef=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){return t(u)(this,r),n.call(this,e,"array-contains",i)}return t(c)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Sl(t)&&wl(t.arrayValue,this.value)}}]),r}(ql),tf=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){return t(u)(this,r),n.call(this,e,"in",i)}return t(c)(r,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&wl(this.value.arrayValue,t)}}]),r}(ql),nf=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){return t(u)(this,r),n.call(this,e,"not-in",i)}return t(c)(r,[{key:"matches",value:function(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!wl(this.value.arrayValue,t)}}]),r}(ql),rf=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){return t(u)(this,r),n.call(this,e,"array-contains-any",i)}return t(c)(r,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Sl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return wl(t.value.arrayValue,e)}))}}]),r}(ql),af=function e(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;t(u)(this,e),this.path=n,this.collectionGroup=r,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=s,this.endAt=c,this.ce=null};function of(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new af(e,t,n,r,i,a,o)}function sf(e){var t=cc(e);if(null===t.ce){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Wl(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.canonicalString()+t.dir;var t})).join(","),Hc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return El(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return El(e)})).join(",")),t.ce=n}return t.ce}function uf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Vl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ql(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fl(e.startAt,t.startAt)&&Fl(e.endAt,t.endAt)}function cf(e){return Rc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lf=function e(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;t(u)(this,e),this.path=n,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt};function ff(e,t,n,r,i,a,o,s){return new lf(e,t,n,r,i,a,o,s)}function hf(e){return new lf(e)}function df(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function pf(e){return null!==e.collectionGroup}function vf(e){var t,n,r=cc(e);if(null===r.le){r.le=[];var i=new Set,a=!0,o=!1,s=void 0;try{for(var u,c=r.explicitOrderBy[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;r.le.push(l),i.add(l.field.canonicalString())}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var f=r.explicitOrderBy.length>0?r.explicitOrderBy[r.explicitOrderBy.length-1].dir:"asc";(t=r,n=new nl(Oc.comparator),t.filters.forEach((function(e){e.getFlattenedFilters().forEach((function(e){e.isInequality()&&(n=n.add(e.field))}))})),n).forEach((function(e){i.has(e.canonicalString())||e.isKeyField()||r.le.push(new Bl(e,f))})),i.has(Oc.keyField().canonicalString())||r.le.push(new Bl(Oc.keyField(),f))}return r.le}function yf(e){var t=cc(e);return t.he||(t.he=mf(t,vf(e))),t.he}function mf(e,t){if("F"===e.limitType)return of(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new Bl(e.field,t)}));var n=e.endAt?new Ml(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ml(e.startAt.position,e.startAt.inclusive):null;return of(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function gf(e,t){var n=e.filters.concat([t]);return new lf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function kf(e,t,n){return new lf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wf(e,t){return uf(yf(e),yf(t))&&e.limitType===t.limitType}function bf(e){return"".concat(sf(yf(e)),"|lt:").concat(e.limitType)}function _f(e){return"Query(target=".concat((t=yf(e),n=t.path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: [".concat(t.filters.map((function(e){return Jl(e)})).join(", "),"]")),Hc(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: [".concat(t.orderBy.map((function(e){return"".concat((t=e).field.canonicalString()," (").concat(t.dir,")");var t})).join(", "),"]")),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return El(e)})).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return El(e)})).join(",")),"Target(".concat(n,")")),"; limitType=").concat(e.limitType,")");var t,n}function Ef(e,t){return t.isFoundDocument()&&(i=e,o=(a=t).key.path,null!==i.collectionGroup?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Rc.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o))&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=vf(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!s.field.isKeyField()&&null===t.data.field(s.field))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e.filters[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(!a.value.matches(t))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){var r=Ul(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,vf(n),r)||n.endAt&&!function(e,t,n){var r=Ul(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,vf(n),r)));var n,r,i,a,o}function xf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function If(e){return function(t,n){var r=!1,i=!0,a=!1,o=void 0;try{for(var s,u=vf(e)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=Tf(c,t,n);if(0!==l)return l;r=r||c.field.isKeyField()}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return 0}}function Tf(e,t,n){var r,i,a,o,s=e.field.isKeyField()?Rc.comparator(t.key,n.key):(r=e.field,i=n,a=t.data.field(r),o=i.data.field(r),null!==a&&null!==o?bl(a,o):sc());switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return sc()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sf=function(){"use strict";function e(n,r){t(u)(this,e),this.mapKeyFn=n,this.equalsFn=r,this.inner={},this.innerSize=0}return t(c)(e,[{key:"get",value:function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){var i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=t(w)(s.value,2),l=c[0],f=c[1];if(this.equalsFn(l,e))return f}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Yc(this.inner,(function(n,r){var i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=t(w)(s.value,2),l=c[0],f=c[1];e(l,f)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}))}},{key:"isEmpty",value:function(){return $c(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Af=new Zc(Rc.comparator);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(){return Af}var Of=new Zc(Rc.comparator);function Rf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Of,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r.insert(c.key,c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}function Nf(e){var t=Of;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Df(){return Lf()}function Pf(){return Lf()}function Lf(){return new Sf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Mf=new Zc(Rc.comparator),Uf=new nl(Rc.comparator);function Ff(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Uf,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r.add(c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}var Bf=new nl(Ec);function Vf(){return Bf}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(t)?"-0":t}}function qf(e){return{integerValue:""+e}}function zf(e,t){return Gc(t)?qf(t):jf(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hf=function e(){"use strict";t(u)(this,e),this._=void 0};function Kf(e,t,n){return e instanceof Qf?(i=t,a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&hl(i)&&(i=dl(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}):e instanceof Jf?Xf(e,t):e instanceof Yf?$f(e,t):function(e,t){var n=Wf(e,t),r=eh(n)+eh(e.Ie);return Tl(n)&&Tl(e.Ie)?qf(r):jf(e.serializer,r)}(e,t);var r,i,a}function Gf(e,t,n){return e instanceof Jf?Xf(e,t):e instanceof Yf?$f(e,t):n}function Wf(e,t){return e instanceof Zf?Tl(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}var Qf=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.apply(this,arguments)}return r}(Hf),Jf=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e){var i;return t(u)(this,r),(i=n.call(this)).elements=e,t(Ai)(i)}return r}(Hf);function Xf(e,t){var n=th(t),r=!0,i=!1,a=void 0;try{for(var o,s=function(e,t){var r=t.value;n.some((function(e){return kl(e,r)}))||n.push(r)},u=e.elements[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var Yf=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e){var i;return t(u)(this,r),(i=n.call(this)).elements=e,t(Ai)(i)}return r}(Hf);function $f(e,t){var n=th(t),r=!0,i=!1,a=void 0;try{for(var o,s=function(e,t){var r=t.value;n=n.filter((function(e){return!kl(e,r)}))},u=e.elements[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s(0,o)}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var Zf=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this)).serializer=e,a.Ie=i,t(Ai)(a)}return r}(Hf);function eh(e){return ll(e.integerValue||e.doubleValue)}function th(e){return Sl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nh=function e(n,r){"use strict";t(u)(this,e),this.field=n,this.transform=r};var rh=function e(n,r){"use strict";t(u)(this,e),this.version=n,this.transformResults=r},ih=function(){"use strict";function e(n,r){t(u)(this,e),this.updateTime=n,this.exists=r}return t(c)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ah(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var oh=function e(){"use strict";t(u)(this,e)};function sh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kh(e.key,ih.none()):new hh(e.key,e.data,ih.none());var n=e.data,r=Dl.empty(),i=new nl(Oc.comparator),a=!0,o=!1,s=void 0;try{for(var u,c=t.fields[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;if(!i.has(l)){var f=n.field(l);null===f&&l.length>1&&(l=l.popLast(),f=n.field(l)),null===f?r.delete(l):r.set(l,f),i=i.add(l)}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return new dh(e.key,r,new il(i.toArray()),ih.none())}function uh(e,t,n){var r,i,a,o,s;e instanceof hh?(i=t,a=n,o=(r=e).value.clone(),s=vh(r.fieldTransforms,i,a.transformResults),o.setAll(s),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()):e instanceof dh?function(e,t,n){if(ah(e.precondition,t)){var r=vh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ph(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ch(e,t,n,r){return e instanceof hh?function(e,t,n,r){if(!ah(e.precondition,t))return n;var i=e.value.clone(),a=yh(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof dh?function(e,t,n,r){if(!ah(e.precondition,t))return n;var i=yh(e.fieldTransforms,r,t),a=t.data;return a.setAll(ph(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):(i=t,a=n,ah(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a);var i,a}function lh(e,t){var n=null,r=!0,i=!1,a=void 0;try{for(var o,s=e.fieldTransforms[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=t.data.field(u.field),l=Wf(u.transform,c||null);null!=l&&(null===n&&(n=Dl.empty()),n.set(u.field,l))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n||null}function fh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&xc(n,r,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Jf&&r instanceof Jf||n instanceof Yf&&r instanceof Yf?xc(n.elements,r.elements,kl):n instanceof Zf&&r instanceof Zf?kl(n.Ie,r.Ie):n instanceof Qf&&r instanceof Qf);var n,r}(e,t)}))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}var hh=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t(u)(this,r),(o=n.call(this)).key=e,o.value=i,o.precondition=a,o.fieldTransforms=s,o.type=0,t(Ai)(o)}return t(c)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(oh),dh=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a,o){var s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return t(u)(this,r),(s=n.call(this)).key=e,s.data=i,s.fieldMask=a,s.precondition=o,s.fieldTransforms=c,s.type=1,t(Ai)(s)}return t(c)(r,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),r}(oh);function ph(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function vh(e,t,n){var r=new Map;uc(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Gf(o,s,n[i]))}return r}function yh(e,t,n){var r=new Map,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.transform,f=n.data.field(c.field);r.set(c.field,Kf(l,f,t))}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}var mh,gh,kh=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this)).key=e,a.precondition=i,a.type=2,a.fieldTransforms=[],t(Ai)(a)}return t(c)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(oh),wh=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this)).key=e,a.precondition=i,a.type=3,a.fieldTransforms=[],t(Ai)(a)}return t(c)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(oh),bh=function(){"use strict";function e(n,r,i,a){t(u)(this,e),this.batchId=n,this.localWriteTime=r,this.baseMutations=i,this.mutations=a}return t(c)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&uh(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.baseMutations[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.key.isEqual(e.key)&&(t=ch(s,e,t,this.localWriteTime))}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=!0,c=!1,l=void 0;try{for(var f,h=this.mutations[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;d.key.isEqual(e.key)&&(t=ch(d,e,t,this.localWriteTime))}}catch(e){c=!0,l=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Pf();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=sh(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Tc.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ff())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&xc(this.mutations,e.mutations,(function(e,t){return fh(e,t)}))&&xc(this.baseMutations,e.baseMutations,(function(e,t){return fh(e,t)}))}}]),e}(),_h=function(){"use strict";function e(n,r,i,a){t(u)(this,e),this.batch=n,this.commitVersion=r,this.mutationResults=i,this.docVersions=a}return t(c)(e,null,[{key:"from",value:function(t,n,r){uc(t.mutations.length===r.length);for(var i=Mf,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Eh=function(){"use strict";function e(n,r){t(u)(this,e),this.largestBatchId=n,this.mutation=r}return t(c)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),xh=function e(n,r){"use strict";t(u)(this,e),this.count=n,this.unchangedNames=r};function Ih(e){switch(e){default:return sc();case lc.CANCELLED:case lc.UNKNOWN:case lc.DEADLINE_EXCEEDED:case lc.RESOURCE_EXHAUSTED:case lc.INTERNAL:case lc.UNAVAILABLE:case lc.UNAUTHENTICATED:return!1;case lc.INVALID_ARGUMENT:case lc.NOT_FOUND:case lc.ALREADY_EXISTS:case lc.PERMISSION_DENIED:case lc.FAILED_PRECONDITION:case lc.ABORTED:case lc.OUT_OF_RANGE:case lc.UNIMPLEMENTED:case lc.DATA_LOSS:return!0}}function Th(e){if(void 0===e)return ic("GRPC error has no .code"),lc.UNKNOWN;switch(e){case mh.OK:return lc.OK;case mh.CANCELLED:return lc.CANCELLED;case mh.UNKNOWN:return lc.UNKNOWN;case mh.DEADLINE_EXCEEDED:return lc.DEADLINE_EXCEEDED;case mh.RESOURCE_EXHAUSTED:return lc.RESOURCE_EXHAUSTED;case mh.INTERNAL:return lc.INTERNAL;case mh.UNAVAILABLE:return lc.UNAVAILABLE;case mh.UNAUTHENTICATED:return lc.UNAUTHENTICATED;case mh.INVALID_ARGUMENT:return lc.INVALID_ARGUMENT;case mh.NOT_FOUND:return lc.NOT_FOUND;case mh.ALREADY_EXISTS:return lc.ALREADY_EXISTS;case mh.PERMISSION_DENIED:return lc.PERMISSION_DENIED;case mh.FAILED_PRECONDITION:return lc.FAILED_PRECONDITION;case mh.ABORTED:return lc.ABORTED;case mh.OUT_OF_RANGE:return lc.OUT_OF_RANGE;case mh.UNIMPLEMENTED:return lc.UNIMPLEMENTED;case mh.DATA_LOSS:return lc.DATA_LOSS;default:return sc()}}(gh=mh||(mh={}))[gh.OK=0]="OK",gh[gh.CANCELLED=1]="CANCELLED",gh[gh.UNKNOWN=2]="UNKNOWN",gh[gh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gh[gh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gh[gh.NOT_FOUND=5]="NOT_FOUND",gh[gh.ALREADY_EXISTS=6]="ALREADY_EXISTS",gh[gh.PERMISSION_DENIED=7]="PERMISSION_DENIED",gh[gh.UNAUTHENTICATED=16]="UNAUTHENTICATED",gh[gh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gh[gh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gh[gh.ABORTED=10]="ABORTED",gh[gh.OUT_OF_RANGE=11]="OUT_OF_RANGE",gh[gh.UNIMPLEMENTED=12]="UNIMPLEMENTED",gh[gh.INTERNAL=13]="INTERNAL",gh[gh.UNAVAILABLE=14]="UNAVAILABLE",gh[gh.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sh=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ch=new Yu([4294967295,4294967295],0);function Oh(e){var t=Ah().encode(e),n=new Xu;return n.update(t),new Uint8Array(n.digest())}function Rh(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Yu([n,r],0),new Yu([i,a],0)]}var Nh=function(){"use strict";function e(n,r,i){if(t(u)(this,e),this.bitmap=n,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Dh("Invalid padding: ".concat(r));if(i<0)throw new Dh("Invalid hash count: ".concat(i));if(n.length>0&&0===this.hashCount)throw new Dh("Invalid hash count: ".concat(i));if(0===n.length&&0!==r)throw new Dh("Invalid padding when bitmap length is 0: ".concat(r));this.Te=8*n.length-r,this.Ee=Yu.fromNumber(this.Te)}return t(c)(e,[{key:"de",value:function(e,t,n){var r=e.add(t.multiply(Yu.fromNumber(n)));return 1===r.compare(Ch)&&(r=new Yu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}},{key:"Ae",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Te)return!1;for(var n=Oh(e),r=t(w)(Rh(n),2),i=r[0],a=r[1],o=0;o<this.hashCount;o++){var s=this.de(i,a,o);if(!this.Ae(s))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Te)for(var n=Oh(e),r=t(w)(Rh(n),2),i=r[0],a=r[1],o=0;o<this.hashCount;o++){var s=this.de(i,a,o);this.Re(s)}}},{key:"Re",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Dh=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){var e;return t(u)(this,r),(e=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).name="BloomFilterError",t(Ai)(e)}return r}(t(O)(Error)),Ph=function(){"use strict";function e(n,r,i,a,o){t(u)(this,e),this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}return t(c)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Lh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Tc.min(),i,new Zc(Ec),Cf(),Ff())}}]),e}(),Lh=function(){"use strict";function e(n,r,i,a,o){t(u)(this,e),this.resumeToken=n,this.current=r,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}return t(c)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Ff(),Ff(),Ff())}}]),e}(),Mh=function e(n,r,i,a){"use strict";t(u)(this,e),this.Ve=n,this.removedTargetIds=r,this.key=i,this.me=a},Uh=function e(n,r){"use strict";t(u)(this,e),this.targetId=n,this.fe=r},Fh=function e(n,r){"use strict";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sl.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t(u)(this,e),this.state=n,this.targetIds=r,this.resumeToken=i,this.cause=a},Bh=function(){"use strict";function e(){t(u)(this,e),this.ge=0,this.pe=qh(),this.ye=sl.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}return t(c)(e,[{key:"current",get:function(){return this.we}},{key:"resumeToken",get:function(){return this.ye}},{key:"be",get:function(){return 0!==this.ge}},{key:"De",get:function(){return this.Se}},{key:"Ce",value:function(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}},{key:"ve",value:function(){var e=Ff(),t=Ff(),n=Ff();return this.pe.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:sc()}})),new Lh(this.ye,this.we,e,t,n)}},{key:"Fe",value:function(){this.Se=!1,this.pe=qh()}},{key:"Me",value:function(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}},{key:"xe",value:function(e){this.Se=!0,this.pe=this.pe.remove(e)}},{key:"Oe",value:function(){this.ge+=1}},{key:"Ne",value:function(){this.ge-=1}},{key:"Be",value:function(){this.Se=!0,this.we=!0}}]),e}(),Vh=function(){"use strict";function e(n){t(u)(this,e),this.Le=n,this.ke=new Map,this.qe=Cf(),this.Qe=jh(),this.Ke=new Zc(Ec)}return t(c)(e,[{key:"$e",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.Ve[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.me&&e.me.isFoundDocument()?this.Ue(o,e.me):this.We(o,e.key,e.me)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var s=!0,u=!1,c=void 0;try{for(var l,f=e.removedTargetIds[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;this.We(h,e.key,e.me)}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}},{key:"Ge",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ze(n);switch(e.state){case 0:t.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||t.removeTarget(n);break;case 3:t.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:t.je(n)&&(t.He(n),r.Ce(e.resumeToken));break;default:sc()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((function(e,r){n.je(r)&&t(r)}))}},{key:"Je",value:function(e){var t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){var i=r.target;if(cf(i))if(0===n){var a=new Rc(i.path);this.We(t,a,Ll.newNoDocument(a,Tc.min()))}else uc(1===n);else{var o=this.Ze(t);if(o!==n){var s=this.Xe(e),u=s?this.et(s,e,o):1;if(0!==u){this.He(t);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}null==Sh||Sh.tt(function(e,t,n,r,i){var a,o,s,u,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(u=null===(s=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===s?void 0:s.length)&&void 0!==u?u:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.fe,this.Le.nt(),s,u))}}}}},{key:"Xe",value:function(e){var t=e.fe.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,s=i.padding,u=void 0===s?0:s,c=t.hashCount,l=void 0===c?0:c;try{n=fl(o).toUint8Array()}catch(e){if(e instanceof al)return ac("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new Nh(n,u,l)}catch(e){return ac(e instanceof Dh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Te?null:r}},{key:"et",value:function(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}},{key:"rt",value:function(e,t){var n=this,r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Le.nt(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.We(t,r,null),i++)})),i}},{key:"it",value:function(e){var t=this,n=new Map;this.ke.forEach((function(r,i){var a=t.Ye(i);if(a){if(r.current&&cf(a.target)){var o=new Rc(a.target.path);null!==t.qe.get(o)||t.st(i,o)||t.We(i,o,Ll.newNoDocument(o,e))}r.De&&(n.set(i,r.ve()),r.Fe())}}));var r=Ff();this.Qe.forEach((function(e,n){var i=t,a=!0;n.forEachWhile((function(e){var t=i.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.qe.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ph(e,n,this.Ke,this.qe,r);return this.qe=Cf(),this.Qe=jh(),this.Ke=new Zc(Ec),i}},{key:"Ue",value:function(e,t){if(this.je(e)){var n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}}},{key:"We",value:function(e,t,n){if(this.je(e)){var r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}}},{key:"removeTarget",value:function(e){this.ke.delete(e)}},{key:"Ze",value:function(e){var t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Oe",value:function(e){this.ze(e).Oe()}},{key:"ze",value:function(e){var t=this.ke.get(e);return t||(t=new Bh,this.ke.set(e,t)),t}},{key:"ot",value:function(e){var t=this.Qe.get(e);return t||(t=new nl(Ec),this.Qe=this.Qe.insert(e,t)),t}},{key:"je",value:function(e){var t=null!==this.Ye(e);return t||rc("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ye",value:function(e){var t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}},{key:"He",value:function(e){var t=this;this.ke.set(e,new Bh),this.Le.getRemoteKeysForTarget(e).forEach((function(n){t.We(e,n,null)}))}},{key:"st",value:function(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}]),e}();function jh(){return new Zc(Rc.comparator)}function qh(){return new Zc(Rc.comparator)}var zh={asc:"ASCENDING",desc:"DESCENDING"},Hh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kh={and:"AND",or:"OR"},Gh=function e(n,r){"use strict";t(u)(this,e),this.databaseId=n,this.useProto3Json=r};function Wh(e,t){return e.useProto3Json||Hc(t)?t:{value:t}}function Qh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xh(e,t){return Qh(e,t.toTimestamp())}function Yh(e){return uc(!!e),Tc.fromTimestamp((t=cl(e),new Ic(t.seconds,t.nanos)));var t}function $h(e,t){return(n=e,new Ac(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function Zh(e){var t=Ac.fromString(e);return uc(md(t)),t}function ed(e,t){return $h(e.databaseId,t.path)}function td(e,t){var n=Zh(t);if(n.get(1)!==e.databaseId.projectId)throw new fc(lc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fc(lc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rc(ad(n))}function nd(e,t){return $h(e.databaseId,t)}function rd(e){var t=Zh(e);return 4===t.length?Ac.emptyPath():ad(t)}function id(e){return new Ac(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ad(e){return uc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function od(e,t,n){return{name:ed(e,t),fields:n.value.mapValue.fields}}function sd(e,t){var n,r,i;if(t instanceof hh)n={update:od(e,t.key,t.value)};else if(t instanceof kh)n={delete:ed(e,t.key)};else if(t instanceof dh)n={update:od(e,t.key,t.data),updateMask:(r=t.fieldMask,i=[],r.fields.forEach((function(e){return i.push(e.canonicalString())})),{fieldPaths:i})};else{if(!(t instanceof wh))return sc();n={verify:ed(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Qf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Yf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Zf)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw sc()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Xh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:sc()}(e,t.precondition)),n}function ud(e,t){return{documents:[nd(e,t.path)]}}function cd(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=nd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=nd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return yd(zl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return{field:pd((t=e).field),direction:hd(t.dir)};var t}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=Wh(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ld(e){var t=rd(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){uc(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o,s,u=[];n.where&&(o=n.where,u=(s=fd(o))instanceof zl&&Kl(s)?s.getFilters():[s]);var c=[];n.orderBy&&(c=n.orderBy.map((function(e){return new Bl(vd((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));var l=null;n.limit&&(l=function(e){var t;return Hc(t="object"==typeof e?e.value:e)?null:t}(n.limit));var f=null;n.startAt&&(f=function(e){var t=!!e.before,n=e.values||[];return new Ml(n,t)}(n.startAt));var h=null;return n.endAt&&(h=function(e){var t=!e.before,n=e.values||[];return new Ml(n,t)}(n.endAt)),ff(t,i,c,u,l,"F",f,h)}function fd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=vd(e.unaryFilter.field);return ql.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=vd(e.unaryFilter.field);return ql.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vd(e.unaryFilter.field);return ql.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=vd(e.unaryFilter.field);return ql.create(i,"!=",{nullValue:"NULL_VALUE"});default:return sc()}}(e):void 0!==e.fieldFilter?(n=e,ql.create(vd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sc()}}(n.fieldFilter.op),n.fieldFilter.value)):void 0!==e.compositeFilter?(t=e,zl.create(t.compositeFilter.filters.map((function(e){return fd(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return sc()}}(t.compositeFilter.op))):sc();var t,n}function hd(e){return zh[e]}function dd(e){return Hh[e]}function pd(e){return{fieldPath:e.canonicalString()}}function vd(e){return Oc.fromServerFormat(e.fieldPath)}function yd(e){return e instanceof ql?function(e){if("=="===e.op){if(Cl(e.value))return{unaryFilter:{field:pd(e.field),op:"IS_NAN"}};if(Al(e.value))return{unaryFilter:{field:pd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Cl(e.value))return{unaryFilter:{field:pd(e.field),op:"IS_NOT_NAN"}};if(Al(e.value))return{unaryFilter:{field:pd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pd(e.field),op:dd(e.op),value:e.value}}}(e):e instanceof zl?(r=(t=e).getFilters().map((function(e){return yd(e)})),1===r.length?r[0]:{compositeFilter:{op:(n=t.op,Kh[n]),filters:r}}):sc();var t,n,r}function md(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gd=function(){"use strict";function e(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tc.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tc.min(),c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:sl.EMPTY_BYTE_STRING,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;t(u)(this,e),this.target=n,this.targetId=r,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}return t(c)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),kd=function e(n){"use strict";t(u)(this,e),this.ut=n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(e){var t=ld({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?kf(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bd=function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,[{key:"ht",value:function(e,t){this.Pt(e,t),t.It()}},{key:"Pt",value:function(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(ll(e.integerValue));else if("doubleValue"in e){var n=ll(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Kc(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){var r=e.timestampValue;this.Tt(t,20),"string"==typeof r?t.dt(r):(t.dt("".concat(r.seconds||"")),t.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(fl(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?Nl(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):sc()}},{key:"At",value:function(e,t){this.Tt(t,25),this.wt(e,t)}},{key:"wt",value:function(e,t){t.dt(e)}},{key:"gt",value:function(e,t){var n=e.fields||{};this.Tt(t,55);var r=!0,i=!1,a=void 0;try{for(var o,s=Object.keys(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this.At(u,t),this.Pt(n[u],t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"yt",value:function(e,t){var n=e.values||[];this.Tt(t,50);var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this.Pt(u,t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"ft",value:function(e,t){var n=this;this.Tt(t,37),Rc.fromName(e).path.forEach((function(e){n.Tt(t,60),n.wt(e,t)}))}},{key:"Tt",value:function(e,t){e.Et(t)}},{key:"Rt",value:function(e){e.Et(2)}}]),e}();bd.St=new bd;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _d=function(){"use strict";function e(){t(u)(this,e),this.on=new Ed}return t(c)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.on.add(t),jc.resolve()}},{key:"getCollectionParents",value:function(e,t){return jc.resolve(this.on.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return jc.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return jc.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return jc.resolve()}},{key:"createTargetIndexes",value:function(e,t){return jc.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return jc.resolve(null)}},{key:"getIndexType",value:function(e,t){return jc.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return jc.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return jc.resolve(null)}},{key:"getMinOffset",value:function(e,t){return jc.resolve(Lc.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return jc.resolve(Lc.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return jc.resolve()}},{key:"updateIndexEntries",value:function(e,t){return jc.resolve()}}]),e}(),Ed=function(){"use strict";function e(){t(u)(this,e),this.index={}}return t(c)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nl(Ac.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new nl(Ac.comparator)).toArray()}}]),e}();new Uint8Array(0);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xd=function(){"use strict";function e(n,r,i){t(u)(this,e),this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}return t(c)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xd.DEFAULT_COLLECTION_PERCENTILE=10,xd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xd.DEFAULT=new xd(41943040,xd.DEFAULT_COLLECTION_PERCENTILE,xd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xd.DISABLED=new xd(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Id=function(){"use strict";function e(n){t(u)(this,e),this.xn=n}return t(c)(e,[{key:"next",value:function(){return this.xn+=2,this.xn}}],[{key:"On",value:function(){return new e(0)}},{key:"Nn",value:function(){return new e(-1)}}]),e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Td=function(){"use strict";function e(){t(u)(this,e),this.changes=new Sf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return t(c)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ll.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?jc.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sd=function e(n,r){"use strict";t(u)(this,e),this.overlayedDocument=n,this.mutatedFields=r},Ad=function(){"use strict";function e(n,r,i,a){t(u)(this,e),this.remoteDocumentCache=n,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=a}return t(c)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&ch(r.mutation,e,il.empty(),Ic.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Ff()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ff(),r=this,i=Df();return this.populateOverlays(e,i,t).next((function(){return r.computeViews(e,t,i,n).next((function(e){var t=Rf();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Df();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Ff())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Cf(),a=Lf(),o=Lf();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof dh)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),ch(o.mutation,t,o.mutation.getFieldMask(),Ic.now())):a.set(t.key,il.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Sd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Lf(),i=new Zc((function(e,t){return e-t})),a=Ff();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n=!0,a=!1,o=void 0;try{for(var s,u=function(e,n){var a=n.value;a.keys().forEach((function(e){var n=t.get(e);if(null!==n){var o=r.get(e)||il.empty();o=a.applyToLocalView(n,o),r.set(e,o);var s=(i.get(a.batchId)||Ff()).add(e);i=i.insert(a.batchId,s)}}))},c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0)u(0,s)}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}})).next((function(){for(var o=[],s=i.getReverseIterator();s.hasNext();){var u=s.getNext(),c=u.key,l=u.value,f=Pf();l.forEach((function(e){if(!a.has(e)){var n=sh(t.get(e),r.get(e));null!==n&&f.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,c,f))}return jc.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return i=t,Rc.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):pf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=i,s=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):jc.resolve(Df()),u=-1,c=a;return s.next((function(t){return jc.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?jc.resolve():o.remoteDocumentCache.getEntry(e,t).next((function(e){c=c.insert(t,e)}))})).next((function(){return o.populateOverlays(e,t,a)})).next((function(){return o.computeViews(e,c,t,Ff())})).next((function(e){return{batchId:u,changes:Nf(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Rc(t)).next((function(e){var t=Rf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=Rf();return this.indexManager.getCollectionParents(e,a).next((function(s){return jc.forEach(s,(function(s){var u,c,l=(u=t,c=s.child(a),new lf(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));return i.getDocumentsMatchingCollectionQuery(e,l,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ll.newInvalidDocument(r)))}));var n=Rf();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&ch(a.mutation,r,il.empty(),Ic.now()),Ef(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),Cd=function(){"use strict";function e(n){t(u)(this,e),this.serializer=n,this.ur=new Map,this.cr=new Map}return t(c)(e,[{key:"getBundleMetadata",value:function(e,t){return jc.resolve(this.ur.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.ur.set(t.id,{id:(n=t).id,version:n.version,createTime:Yh(n.createTime)}),jc.resolve();var n}},{key:"getNamedQuery",value:function(e,t){return jc.resolve(this.cr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.cr.set(t.name,{name:(n=t).name,query:wd(n.bundledQuery),readTime:Yh(n.readTime)}),jc.resolve();var n}}]),e}(),Od=function(){"use strict";function e(){t(u)(this,e),this.overlays=new Zc(Rc.comparator),this.lr=new Map}return t(c)(e,[{key:"getOverlay",value:function(e,t){return jc.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Df();return jc.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.lt(e,t,i)})),jc.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.lr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.lr.delete(n)),jc.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Df(),i=t.length+1,a=new Rc(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return jc.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Zc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Df(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Df(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return jc.resolve(u)}},{key:"lt",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Eh(t,n));var a=this.lr.get(t);void 0===a&&(a=Ff(),this.lr.set(t,a)),this.lr.set(t,a.add(n.key))}}]),e}(),Rd=function(){"use strict";function e(){t(u)(this,e),this.hr=new nl(Nd.Pr),this.Ir=new nl(Nd.Tr)}return t(c)(e,[{key:"isEmpty",value:function(){return this.hr.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Nd(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}},{key:"Er",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.dr(new Nd(e,t))}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Rr",value:function(e){var t=this,n=new Rc(new Ac([])),r=new Nd(n,e),i=new Nd(n,e+1),a=[];return this.Ir.forEachInRange([r,i],(function(e){t.dr(e),a.push(e.key)})),a}},{key:"Vr",value:function(){var e=this;this.hr.forEach((function(t){return e.dr(t)}))}},{key:"dr",value:function(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}},{key:"mr",value:function(e){var t=new Rc(new Ac([])),n=new Nd(t,e),r=new Nd(t,e+1),i=Ff();return this.Ir.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Nd(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Nd=function(){"use strict";function e(n,r){t(u)(this,e),this.key=n,this.gr=r}return t(c)(e,null,[{key:"Pr",value:function(e,t){return Rc.comparator(e.key,t.key)||Ec(e.gr,t.gr)}},{key:"Tr",value:function(e,t){return Ec(e.gr,t.gr)||Rc.comparator(e.key,t.key)}}]),e}(),Dd=function(){"use strict";function e(n,r){t(u)(this,e),this.indexManager=n,this.referenceDelegate=r,this.mutationQueue=[],this.pr=1,this.yr=new nl(Nd.Pr)}return t(c)(e,[{key:"checkEmpty",value:function(e){return jc.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new bh(i,t,n,r);this.mutationQueue.push(a);var o=!0,s=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;this.yr=this.yr.add(new Nd(f.key,i)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast())}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return jc.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return jc.resolve(this.wr(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Sr(n),i=r<0?0:r;return jc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return jc.resolve(0===this.mutationQueue.length?-1:this.pr-1)}},{key:"getAllMutationBatches",value:function(e){return jc.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Nd(t,0),i=new Nd(t,Number.POSITIVE_INFINITY),a=[];return this.yr.forEachInRange([r,i],(function(e){var t=n.wr(e.gr);a.push(t)})),jc.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new nl(Ec);return t.forEach((function(e){var t=new Nd(e,0),i=new Nd(e,Number.POSITIVE_INFINITY);n.yr.forEachInRange([t,i],(function(e){r=r.add(e.gr)}))})),jc.resolve(this.br(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Rc.isDocumentKey(i)||(i=i.child(""));var a=new Nd(new Rc(i),0),o=new nl(Ec);return this.yr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),a),jc.resolve(this.br(o))}},{key:"br",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.wr(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;uc(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.yr;return jc.forEach(t.mutations,(function(i){var a=new Nd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.yr=r}))}},{key:"Fn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Nd(t,0),r=this.yr.firstAfterOrEqual(n);return jc.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,jc.resolve()}},{key:"Dr",value:function(e,t){return this.Sr(e)}},{key:"Sr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"wr",value:function(e){var t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Pd=function(){"use strict";function e(n){t(u)(this,e),this.Cr=n,this.docs=new Zc(Rc.comparator),this.size=0}return t(c)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return jc.resolve(n?n.document.mutableCopy():Ll.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Cf();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ll.newInvalidDocument(e))})),jc.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Cf(),a=t.path,o=new Rc(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Mc(Pc(l),n)<=0||(r.has(l.key)||Ef(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return jc.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){sc()}},{key:"vr",value:function(e,t){return jc.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ld(this)}},{key:"getSize",value:function(e){return jc.resolve(this.size)}}]),e}(),Ld=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e){var i;return t(u)(this,r),(i=n.call(this))._r=e,t(Ai)(i)}return t(c)(r,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t._r.addEntry(e,i)):t._r.removeEntry(r)})),jc.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this._r.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this._r.getEntries(e,t)}}]),r}(Td),Md=function(){"use strict";function e(n){t(u)(this,e),this.persistence=n,this.Fr=new Sf((function(e){return sf(e)}),uf),this.lastRemoteSnapshotVersion=Tc.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Rd,this.targetCount=0,this.Nr=Id.On()}return t(c)(e,[{key:"forEachTarget",value:function(e,t){return this.Fr.forEach((function(e,n){return t(n)})),jc.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return jc.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return jc.resolve(this.Mr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Nr.next(),jc.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),jc.resolve()}},{key:"kn",value:function(e){this.Fr.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Nr=new Id(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.kn(t),this.targetCount+=1,jc.resolve()}},{key:"updateTargetData",value:function(e,t){return this.kn(t),jc.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,jc.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fr.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Fr.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),jc.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return jc.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fr.get(t)||null;return jc.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Or.Er(t,n),jc.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Or.Ar(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),jc.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Or.Rr(t),jc.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Or.mr(t);return jc.resolve(n)}},{key:"containsKey",value:function(e,t){return jc.resolve(this.Or.containsKey(t))}}]),e}(),Ud=function(){"use strict";function e(n,r){var i=this;t(u)(this,e),this.Br={},this.overlays={},this.Lr=new zc(0),this.kr=!1,this.kr=!0,this.referenceDelegate=n(this),this.qr=new Md(this),this.indexManager=new _d,this.remoteDocumentCache=new Pd((function(e){return i.referenceDelegate.Qr(e)})),this.serializer=new kd(r),this.Kr=new Cd(this.serializer)}return t(c)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.kr=!1,Promise.resolve()}},{key:"started",get:function(){return this.kr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Od,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Br[e.toKey()];return n||(n=new Dd(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.qr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Kr}},{key:"runTransaction",value:function(e,t,n){var r=this;rc("MemoryPersistence","Starting transaction:",e);var i=new Fd(this.Lr.next());return this.referenceDelegate.$r(),n(i).next((function(e){return r.referenceDelegate.Ur(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Wr",value:function(e,t){return jc.or(Object.values(this.Br).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Fd=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e){var i;return t(u)(this,r),(i=n.call(this)).currentSequenceNumber=e,t(Ai)(i)}return r}(Fc),Bd=function(){"use strict";function e(n){t(u)(this,e),this.persistence=n,this.Gr=new Rd,this.zr=null}return t(c)(e,[{key:"Hr",get:function(){if(this.zr)return this.zr;throw sc()}},{key:"addReference",value:function(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),jc.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),jc.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hr.add(t.toString()),jc.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Gr.Rr(t.targetId).forEach((function(e){return n.Hr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){var t=n;e.forEach((function(e){return t.Hr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"$r",value:function(){this.zr=new Set}},{key:"Ur",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jc.forEach(this.Hr,(function(r){var i=Rc.fromPath(r);return t.Jr(e,i).next((function(e){e||n.removeEntry(i,Tc.min())}))})).next((function(){return t.zr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Jr(e,t).next((function(e){e?n.Hr.delete(t.toString()):n.Hr.add(t.toString())}))}},{key:"Qr",value:function(e){return 0}},{key:"Jr",value:function(e,t){var n=this;return jc.or([function(){return jc.resolve(n.Gr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Wr(e,t)}])}}],[{key:"jr",value:function(t){return new e(t)}}]),e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Vd=function(){"use strict";function e(n,r,i,a){t(u)(this,e),this.targetId=n,this.fromCache=r,this.ki=i,this.qi=a}return t(c)(e,null,[{key:"Qi",value:function(t,n){var r=Ff(),i=Ff(),a=!0,o=!1,s=void 0;try{for(var u,c=n.docChanges[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return new e(t,n.fromCache,r,i)}}]),e}(),jd=function(){"use strict";function e(){t(u)(this,e),this._documentReadCount=0}return t(c)(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),qd=function(){"use strict";function e(){t(u)(this,e),this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}return t(c)(e,[{key:"initialize",value:function(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.zi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.ji(e,t,r,n).next((function(e){a.result=e}))})).next((function(){var n=i;if(!a.result){var r=new jd;return i.Hi(e,t,r).next((function(i){if(a.result=i,n.$i)return n.Ji(e,t,r,i.size)}))}})).next((function(){return a.result}))}},{key:"Ji",value:function(e,t,n,r){return n.documentReadCount<this.Ui?(nc()<=Be.DEBUG&&rc("QueryEngine","SDK will not create cache indexes for query:",_f(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),jc.resolve()):(nc()<=Be.DEBUG&&rc("QueryEngine","Query:",_f(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(nc()<=Be.DEBUG&&rc("QueryEngine","The SDK decides to create cache indexes for query:",_f(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yf(t))):jc.resolve())}},{key:"zi",value:function(e,n){var r=this;if(df(n))return jc.resolve(null);var i=yf(n);return this.indexManager.getIndexType(e,i).next((function(a){return 0===a?null:(null!==n.limit&&1===a&&(n=kf(n,null,"F"),i=yf(n)),r.indexManager.getDocumentsMatchingTarget(e,i).next((function(a){var o=r,s=Ff.apply(void 0,t(h)(a));return r.Gi.getDocuments(e,s).next((function(t){return o.indexManager.getMinOffset(e,i).next((function(r){var i=o.Yi(n,t);return o.Zi(n,i,s,r.readTime)?o.zi(e,kf(n,null,"F")):o.Xi(e,i,n,r)}))}))})))}))}},{key:"ji",value:function(e,t,n,r){var i=this;return df(t)||r.isEqual(Tc.min())?jc.resolve(null):this.Gi.getDocuments(e,n).next((function(a){var o=i.Yi(t,a);return i.Zi(t,o,n,r)?jc.resolve(null):(nc()<=Be.DEBUG&&rc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_f(t)),i.Xi(e,o,t,Dc(r,-1)).next((function(e){return e})))}))}},{key:"Yi",value:function(e,t){var n=new nl(If(e));return t.forEach((function(t,r){Ef(e,r)&&(n=n.add(r))})),n}},{key:"Zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Hi",value:function(e,t,n){return nc()<=Be.DEBUG&&rc("QueryEngine","Using full collection scan to execute query:",_f(t)),this.Gi.getDocumentsMatchingQuery(e,t,Lc.min(),n)}},{key:"Xi",value:function(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),zd=function(){"use strict";function e(n,r,i,a){t(u)(this,e),this.persistence=n,this.es=r,this.serializer=a,this.ts=new Zc(Ec),this.ns=new Sf((function(e){return sf(e)}),uf),this.rs=new Map,this.ss=n.getRemoteDocumentCache(),this.qr=n.getTargetCache(),this.Kr=n.getBundleCache(),this.os(i)}return t(c)(e,[{key:"os",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ad(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ts)}))}}]),e}();
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(e,t,n,r){return new zd(e,t,n,r)}function Kd(e,t){return Gd.apply(this,arguments)}function Gd(){return(Gd=t(o)(t(g).mark((function e(n,r){var i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cc(n),e.next=3,i.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return i.mutationQueue.getAllMutationBatches(e).next((function(n){return t=n,i.os(r),i.mutationQueue.getAllMutationBatches(e)})).next((function(n){var r=[],a=[],o=Ff(),s=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;r.push(h.batchId);var d=!0,p=!1,v=void 0;try{for(var y,m=h.mutations[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var g=y.value;o=o.add(g.key)}}catch(e){p=!0,v=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}var k=!0,w=!1,b=void 0;try{for(var _,E=n[Symbol.iterator]();!(k=(_=E.next()).done);k=!0){var x=_.value;a.push(x.batchId);var I=!0,T=!1,S=void 0;try{for(var A,C=x.mutations[Symbol.iterator]();!(I=(A=C.next()).done);I=!0){var O=A.value;o=o.add(O.key)}}catch(e){T=!0,S=e}finally{try{I||null==C.return||C.return()}finally{if(T)throw S}}}}catch(e){w=!0,b=e}finally{try{k||null==E.return||E.return()}finally{if(w)throw b}}return i.localDocuments.getDocuments(e,o).next((function(e){return{_s:e,removedBatchIds:r,addedBatchIds:a}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wd(e,t){var n=cc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r,i,a,o,s,u,c,l=t.batch.keys(),f=n.ss.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,a=t,o=f,s=a.batch,u=s.keys(),c=jc.resolve(),u.forEach((function(e){c=c.next((function(){return o.getEntry(i,e)})).next((function(t){var n=a.docVersions.get(e);uc(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,a),t.isValidDocument()&&(t.setReadTime(a.commitVersion),o.addEntry(t)))}))})),c.next((function(){return r.mutationQueue.removeMutationBatch(i,s)}))).next((function(){return f.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,l,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Ff(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,l)}))}))}function Qd(e){var t=cc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qr.getLastRemoteSnapshotVersion(e)}))}function Jd(e,t){var n=cc(e),r=t.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.qr.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.qr.addMatchingKeys(e,a.addedDocuments,s)})));var c,l,f,h=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?h=h.withResumeToken(sl.EMPTY_BYTE_STRING,Tc.min()).withLastLimboFreeSnapshotVersion(Tc.min()):a.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(a.resumeToken,r)),i=i.insert(s,h),l=h,f=a,(0===(c=u).resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size>0)&&o.push(n.qr.updateTargetData(e,h))}}));var s=Cf(),u=Ff();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Xd(e,a,t.documentUpdates).next((function(e){s=e.us,u=e.cs}))),!r.isEqual(Tc.min())){var c=n.qr.getLastRemoteSnapshotVersion(e).next((function(t){return n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return jc.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.ts=i,e}))}function Xd(e,t,n){var r=Ff(),i=Ff();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Cf();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Tc.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):rc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{us:r,cs:i}}))}function Yd(e,t){var n=cc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function $d(e,t){var n=cc(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qr.getTargetData(e,t).next((function(i){return i?(r=i,jc.resolve(r)):n.qr.allocateTargetId(e).next((function(i){return r=new gd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}function Zd(e,t,n){return ep.apply(this,arguments)}function ep(){return(ep=t(o)(t(g).mark((function e(n,r,i){var a,o,s;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=cc(n),o=a.ts.get(r),s=i?"readwrite":"readwrite-primary",e.prev=1,e.t0=i,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",s,(function(e){return a.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),qc(e.t1)){e.next=12;break}throw e.t1;case 12:rc("LocalStore","Failed to update sequence numbers for target ".concat(r,": ").concat(e.t1));case 13:a.ts=a.ts.remove(r),a.ns.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function tp(e,t,n){var r=cc(e),i=Tc.min(),a=Ff();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return(o=r,s=e,u=yf(t),c=cc(o),l=c.ns.get(u),void 0!==l?jc.resolve(c.ts.get(l)):c.qr.getTargetData(s,u)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.es.getDocumentsMatchingQuery(e,t,n?i:Tc.min(),n?a:Ff())})).next((function(e){return np(r,xf(t),e),{documents:e,ls:a}}));var o,s,u,c,l}))}function np(e,t,n){var r=e.rs.get(t)||Tc.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}var rp=function(){"use strict";function e(){t(u)(this,e),this.activeTargetIds=Vf()}return t(c)(e,[{key:"ds",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"As",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Es",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ip=function(){"use strict";function e(){t(u)(this,e),this.eo=new rp,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t(c)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.eo.ds(e),this.no[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.no[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.eo.As(e)}},{key:"isLocalQueryTarget",value:function(e){return this.eo.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.no[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.eo.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.eo.activeTargetIds.has(e)}},{key:"start",value:function(){return this.eo=new rp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),ap=function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,[{key:"ro",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),op=function(){"use strict";function e(){var n=this;t(u)(this,e),this.io=function(){return n.so()},this.oo=function(){return n._o()},this.ao=[],this.uo()}return t(c)(e,[{key:"ro",value:function(e){this.ao.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}},{key:"uo",value:function(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}},{key:"so",value:function(){rc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.ao[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(0)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"_o",value:function(){rc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.ao[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(1)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),sp=null;function up(){return null===sp?sp=268435456+Math.round(2147483648*Math.random()):sp++,"0x"+sp.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},lp=function(){"use strict";function e(n){t(u)(this,e),this.co=n.co,this.lo=n.lo}return t(c)(e,[{key:"ho",value:function(e){this.Po=e}},{key:"Io",value:function(e){this.To=e}},{key:"onMessage",value:function(e){this.Eo=e}},{key:"close",value:function(){this.lo()}},{key:"send",value:function(e){this.co(e)}},{key:"Ao",value:function(){this.Po()}},{key:"Ro",value:function(e){this.To(e)}},{key:"Vo",value:function(e){this.Eo(e)}}]),e}(),fp="WebChannelConnection",hp=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e){var i;return t(u)(this,r),(i=n.call(this,e)).forceLongPolling=e.forceLongPolling,i.autoDetectLongPolling=e.autoDetectLongPolling,i.useFetchStreams=e.useFetchStreams,i.longPollingOptions=e.longPollingOptions,t(Ai)(i)}return t(c)(r,[{key:"Do",value:function(e,t,n,r){var i=up();return new Promise((function(a,o){var s=new Ju;s.setWithCredentials(!0),s.listenOnce(Hu.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case zu.NO_ERROR:var t=s.getResponseJson();rc(fp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case zu.TIMEOUT:rc(fp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new fc(lc.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:var n=s.getStatus();if(rc(fp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=(l=u.status,f=l.toLowerCase().replace(/_/g,"-"),Object.values(lc).indexOf(f)>=0?f:lc.UNKNOWN);o(new fc(c,u.message))}else o(new fc(lc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new fc(lc.UNAVAILABLE,"Connection failed."));break;default:sc()}}finally{rc(fp,"RPC '".concat(e,"' ").concat(i," completed."))}var l,f}));var u=JSON.stringify(r);rc(fp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"vo",value:function(e,t,n){var r=up(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ju(),o=qu(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new Wu({})),this.bo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");rc(fp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),f=!1,h=!1,d=new lp({co:function(t){h?rc(fp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(rc(fp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),rc(fp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},lo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Qu.EventType.OPEN,(function(){h||rc(fp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Qu.EventType.CLOSE,(function(){h||(h=!0,rc(fp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.Ro())})),p(l,Qu.EventType.ERROR,(function(t){h||(h=!0,ac(fp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.Ro(new fc(lc.UNAVAILABLE,"The operation could not be completed")))})),p(l,Qu.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];uc(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){rc(fp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=mh[e];if(void 0!==t)return Th(t)}(s),c=o.message;void 0===u&&(u=lc.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),h=!0,d.Ro(new fc(u,c)),l.close()}else rc(fp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.Vo(i)}})),p(o,Ku.STAT_EVENT,(function(t){t.stat===Gu.PROXY?rc(fp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Gu.NOPROXY&&rc(fp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Ao()}),0),d}}]),r}(function(){"use strict";function e(n){t(u)(this,e),this.databaseInfo=n,this.databaseId=n.databaseId;var r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo="projects/".concat(i,"/databases/").concat(a),this.po="(default)"===this.databaseId.database?"project_id=".concat(i):"project_id=".concat(i,"&database_id=").concat(a)}return t(c)(e,[{key:"yo",get:function(){return!1}},{key:"wo",value:function(e,t,n,r,i){var a=up(),o=this.So(e,t);rc("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(s,r,i),this.Do(e,o,s,n).then((function(t){return rc("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw ac("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Co",value:function(e,t,n,r,i,a){return this.wo(e,t,n,r,i)}},{key:"bo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ec,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"So",value:function(e,t){var n=cp[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(e){return new Gh(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vp=function(){"use strict";function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;t(u)(this,e),this.si=n,this.timerId=r,this.Fo=i,this.Mo=a,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}return t(c)(e,[{key:"reset",value:function(){this.Oo=0}},{key:"Lo",value:function(){this.Oo=this.xo}},{key:"ko",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&rc("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,i,(function(){return t.Bo=Date.now(),e()})),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}},{key:"Qo",value:function(){null!==this.No&&(this.No.skipDelay(),this.No=null)}},{key:"cancel",value:function(){null!==this.No&&(this.No.cancel(),this.No=null)}},{key:"qo",value:function(){return(Math.random()-.5)*this.Oo}}]),e}(),yp=function(){"use strict";function e(n,r,i,a,o,s,c,l){t(u)(this,e),this.si=n,this.Ko=i,this.$o=a,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new vp(n,r)}return t(c)(e,[{key:"jo",value:function(){return 1===this.state||5===this.state||this.Ho()}},{key:"Ho",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Jo()}},{key:"stop",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.jo(),!t.t0){t.next=4;break}return t.next=4,e.close(0);case 4:case"end":return t.stop()}}),n)})))()}},{key:"Yo",value:function(){this.state=0,this.zo.reset()}},{key:"Zo",value:function(){var e=this;this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(function(){return e.Xo()})))}},{key:"e_",value:function(e){this.t_(),this.stream.send(e)}},{key:"Xo",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.Ho()){t.next=2;break}return t.abrupt("return",e.close(0));case 2:case"end":return t.stop()}}),n)})))()}},{key:"t_",value:function(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}},{key:"n_",value:function(){this.Go&&(this.Go.cancel(),this.Go=null)}},{key:"close",value:function(e,n){var r=this;return t(o)(t(g).mark((function i(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===lc.RESOURCE_EXHAUSTED?(ic(n.toString()),ic("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===lc.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,t.next=9,r.listener.Io(n);case 9:case"end":return t.stop()}}),i)})))()}},{key:"r_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var n=this.i_(this.Uo),r=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(n){var i=t(w)(n,2),a=i[0],o=i[1];e.Uo===r&&e.s_(a,o)}),(function(t){var r=e;n((function(){var e=new fc(lc.UNKNOWN,"Fetching auth token failed: "+t.message);return r.o_(e)}))}))}},{key:"s_",value:function(e,t){var n=this,r=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((function(){var e=n;r((function(){return e.state=2,e.Go=e.si.enqueueAfterDelay(e.$o,1e4,(function(){return e.Ho()&&(e.state=3),Promise.resolve()})),e.listener.ho()}))})),this.stream.Io((function(e){var t=n;r((function(){return t.o_(e)}))})),this.stream.onMessage((function(e){var t=n;r((function(){return t.onMessage(e)}))}))}},{key:"Jo",value:function(){var e=this;this.state=5,this.zo.ko(t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),n)}))))}},{key:"o_",value:function(e){return rc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"i_",value:function(e){var t=this;return function(n){var r=t;t.si.enqueueAndForget((function(){return r.Uo===e?n():(rc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),mp=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a,o,s,c){var l;return t(u)(this,r),(l=n.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,c)).serializer=s,t(Ai)(l)}return t(c)(r,[{key:"__",value:function(e,t){return this.connection.vo("Listen",e,t)}},{key:"onMessage",value:function(e){this.zo.reset();var t=function(e,t){var n,r;if("targetChange"in t){t.targetChange;var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:sc(),a=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(uc(void 0===t||"string"==typeof t),sl.fromBase64String(t||"")):(uc(void 0===t||t instanceof Uint8Array),sl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,u=s&&function(e){var t=void 0===e.code?lc.UNKNOWN:Th(e.code);return new fc(t,e.message||"")}(s);n=new Fh(i,a,o,u||null)}else if("documentChange"in t){t.documentChange;var c=t.documentChange;c.document,c.document.name,c.document.updateTime;var l=td(e,c.document.name),f=Yh(c.document.updateTime),h=c.document.createTime?Yh(c.document.createTime):Tc.min(),d=new Dl({mapValue:{fields:c.document.fields}}),p=Ll.newFoundDocument(l,f,h,d),v=c.targetIds||[],y=c.removedTargetIds||[];n=new Mh(v,y,p.key,p)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=td(e,m.document),k=m.readTime?Yh(m.readTime):Tc.min(),w=Ll.newNoDocument(g,k),b=m.removedTargetIds||[];n=new Mh([],b,w.key,w)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var E=td(e,_.document),x=_.removedTargetIds||[];n=new Mh([],x,E,null)}else{if(!("filter"in t))return sc();t.filter;var I=t.filter;I.targetId;var T=I.count,S=void 0===T?0:T,A=I.unchangedNames,C=new xh(S,A),O=I.targetId;n=new Uh(O,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Tc.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Tc.min():t.readTime?Yh(t.readTime):Tc.min()}(e);return this.listener.a_(t,n)}},{key:"u_",value:function(e){var t={};t.database=id(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=cf(r)?{documents:ud(e,r)}:{query:cd(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jh(e,t.resumeToken);var i=Wh(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Tc.min())>0){n.readTime=Qh(e,t.snapshotVersion.toTimestamp());var a=Wh(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n,r=(this.serializer,null==(n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sc()}}(e.purpose))?null:{"goog-listen-tags":n});r&&(t.labels=r),this.e_(t)}},{key:"c_",value:function(e){var t={};t.database=id(this.serializer),t.removeTarget=e,this.e_(t)}}]),r}(yp),gp=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a,o,s,c){var l;return t(u)(this,r),(l=n.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,c)).serializer=s,l.l_=!1,t(Ai)(l)}return t(c)(r,[{key:"h_",get:function(){return this.l_}},{key:"start",value:function(){this.l_=!1,this.lastStreamToken=void 0,t(Ei)(t(Si)(r.prototype),"start",this).call(this)}},{key:"r_",value:function(){this.l_&&this.P_([])}},{key:"__",value:function(e,t){return this.connection.vo("Write",e,t)}},{key:"onMessage",value:function(e){if(uc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();var t=(r=e.writeResults,i=e.commitTime,r&&r.length>0?(uc(void 0!==i),r.map((function(e){return n=i,(r=(t=e).updateTime?Yh(t.updateTime):Yh(n)).isEqual(Tc.min())&&(r=Yh(n)),new rh(r,t.transformResults||[]);var t,n,r}))):[]),n=Yh(e.commitTime);return this.listener.I_(n,t)}var r,i;return uc(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}},{key:"E_",value:function(){var e={};e.database=id(this.serializer),this.e_(e)}},{key:"P_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return sd(t.serializer,e)}))};this.e_(n)}}]),r}(yp),kp=function(e){"use strict";t(S)(r,(function e(){t(u)(this,e)}));var n=t(U)(r);function r(e,i,a,o){var s;return t(u)(this,r),(s=n.call(this)).authCredentials=e,s.appCheckCredentials=i,s.connection=a,s.serializer=o,s.d_=!1,t(Ai)(s)}return t(c)(r,[{key:"A_",value:function(){if(this.d_)throw new fc(lc.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"wo",value:function(e,n,r){var i=this;return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=t(w)(a,2),s=o[0],u=o[1];return i.connection.wo(e,n,r,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lc.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new fc(lc.UNKNOWN,e.toString())}))}},{key:"Co",value:function(e,n,r,i){var a=this;return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var s=t(w)(o,2),u=s[0],c=s[1];return a.connection.Co(e,n,r,u,c,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===lc.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new fc(lc.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.d_=!0}}]),r}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wp=function(){"use strict";function e(n,r){t(u)(this,e),this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}return t(c)(e,[{key:"g_",value:function(){var e=this;0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.m_=null,e.y_("Backend didn't respond within 10 seconds."),e.p_("Offline"),Promise.resolve()})))}},{key:"w_",value:function(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}},{key:"set",value:function(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}},{key:"p_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"y_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(ic(t),this.f_=!1):rc("OnlineStateTracker",t)}},{key:"S_",value:function(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}]),e}(),bp=function e(n,r,i,a,s){"use strict";var c=this;t(u)(this,e),this.localStore=n,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro((function(e){var n=c;i.enqueueAndForget(t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Np(n),!e.t0){e.next=5;break}return rc("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=cc(n)).C_.add(4),e.next=4,xp(r);case 4:return r.M_.set("Unknown"),r.C_.delete(4),e.next=8,_p(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(n);case 5:case"end":return e.stop()}}),e)}))))})),this.M_=new wp(i,a)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(e){return Ep.apply(this,arguments)}function Ep(){return(Ep=t(o)(t(g).mark((function e(n){var r,i,a,o,s,u;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!0,i=!1,a=void 0,!Np(n)){e.next=25;break}e.prev=2,o=n.v_[Symbol.iterator]();case 4:if(r=(s=o.next()).done){e.next=11;break}return u=s.value,e.next=8,u(!0);case 8:r=!0,e.next=4;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),i=!0,a=e.t0;case 17:e.prev=17,e.prev=18,r||null==o.return||o.return();case 20:if(e.prev=20,!i){e.next=23;break}throw a;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}}),e,null,[[2,13,17,25],[18,,20,24]])})))).apply(this,arguments)}function xp(e){return Ip.apply(this,arguments)}function Ip(){return(Ip=t(o)(t(g).mark((function e(n){var r,i,a,o,s,u;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,a=void 0,e.prev=1,o=n.v_[Symbol.iterator]();case 3:if(r=(s=o.next()).done){e.next=10;break}return u=s.value,e.next=7,u(!1);case 7:r=!0,e.next=3;break;case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),i=!0,a=e.t0;case 16:e.prev=16,e.prev=17,r||null==o.return||o.return();case 19:if(e.prev=19,!i){e.next=22;break}throw a;case 22:return e.finish(19);case 23:return e.finish(16);case 24:case"end":return e.stop()}}),e,null,[[1,12,16,24],[17,,19,23]])})))).apply(this,arguments)}function Tp(e,t){var n=cc(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Rp(n)?Op(n):sv(n).Ho()&&Ap(n,t))}function Sp(e,t){var n=cc(e),r=sv(n);n.D_.delete(t),r.Ho()&&Cp(n,t),0===n.D_.size&&(r.Ho()?r.Zo():Np(n)&&n.M_.set("Unknown"))}function Ap(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tc.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}sv(e).u_(t)}function Cp(e,t){e.x_.Oe(t),sv(e).c_(t)}function Op(e){e.x_=new Vh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},_t:function(t){return e.D_.get(t)||null},nt:function(){return e.datastore.serializer.databaseId}}),sv(e).start(),e.M_.g_()}function Rp(e){return Np(e)&&!sv(e).jo()&&e.D_.size>0}function Np(e){return 0===cc(e).C_.size}function Dp(e){e.x_=void 0}function Pp(e){return Lp.apply(this,arguments)}function Lp(){return(Lp=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.D_.forEach((function(e,t){Ap(n,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mp(e,t){return Up.apply(this,arguments)}function Up(){return(Up=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dp(n),Rp(n)?(n.M_.w_(r),Op(n)):n.M_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fp(e,t,n){return Bp.apply(this,arguments)}function Bp(){return Bp=t(o)(t(g).mark((function e(n,r,i){var a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.M_.set("Online"),!(r instanceof Fh&&2===r.state&&r.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=t(o)(t(g).mark((function e(n,r){var i,a,o,s,u,c,l;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.cause,a=!0,o=!1,s=void 0,e.prev=2,u=r.targetIds[Symbol.iterator]();case 4:if(a=(c=u.next()).done){e.next=15;break}if(l=c.value,e.t0=n.D_.has(l),!e.t0){e.next=12;break}return e.next=10,n.remoteSyncer.rejectListen(l,i);case 10:n.D_.delete(l),n.x_.removeTarget(l);case 12:a=!0,e.next=4;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(2),o=!0,s=e.t1;case 21:e.prev=21,e.prev=22,a||null==u.return||u.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}}),e,null,[[2,17,21,29],[22,,24,28]])})));return function(t,n){return e.apply(this,arguments)}}()(n,r);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),rc("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),e.t0),e.next=11,Vp(n,e.t0);case 11:case 22:e.next=29;break;case 13:if(r instanceof Mh?n.x_.$e(r):r instanceof Uh?n.x_.Je(r):n.x_.Ge(r),i.isEqual(Tc.min())){e.next=29;break}return e.prev=14,e.next=17,Qd(n.localStore);case 17:if(a=e.sent,e.t1=i.compareTo(a)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.x_.it(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.D_.get(t);if(r){e.D_.set(t,r.withResumeToken(sl.EMPTY_BYTE_STRING,r.snapshotVersion)),Cp(e,t);var i=new gd(r.target,t,n,r.sequenceNumber);Ap(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(n,i);case 24:return e.prev=24,e.t2=e.catch(14),rc("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Vp(n,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Bp.apply(this,arguments)}function Vp(e,t,n){return jp.apply(this,arguments)}function jp(){return(jp=t(o)(t(g).mark((function e(n,r,i){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qc(r)){e.next=2;break}throw r;case 2:return n.C_.add(1),e.next=5,xp(n);case 5:n.M_.set("Offline"),i||(i=function(){return Qd(n.localStore)}),n.asyncQueue.enqueueRetryable(t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rc("RemoteStore","Retrying IndexedDB access"),e.next=3,i();case 3:return n.C_.delete(1),e.next=6,_p(n);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qp(e,t){return t().catch((function(n){return Vp(e,n,t)}))}function zp(e){return Hp.apply(this,arguments)}function Hp(){return(Hp=t(o)(t(g).mark((function e(n){var r,i,a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=cc(n),i=uv(r),a=r.b_.length>0?r.b_[r.b_.length-1].batchId:-1;case 2:if(!Kp(r)){e.next=19;break}return e.prev=3,e.next=6,Yd(r.localStore,a);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===r.b_.length&&i.Zo(),e.abrupt("break",19);case 10:a=o.batchId,Gp(r,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Vp(r,e.t0);case 17:e.next=2;break;case 19:Wp(r)&&Qp(r);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Kp(e){return Np(e)&&e.b_.length<10}function Gp(e,t){e.b_.push(t);var n=uv(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Wp(e){return Np(e)&&!uv(e).jo()&&e.b_.length>0}function Qp(e){uv(e).start()}function Jp(e){return Xp.apply(this,arguments)}function Xp(){return(Xp=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uv(n).E_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yp(e){return $p.apply(this,arguments)}function $p(){return($p=t(o)(t(g).mark((function e(n){var r,i,a,o,s,u,c;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=uv(n),i=!0,a=!1,o=void 0,e.prev=2,s=n.b_[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)c=u.value,r.P_(c.mutations);e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),a=!0,o=e.t0;case 10:e.prev=10,e.prev=11,i||null==s.return||s.return();case 13:if(e.prev=13,!a){e.next=16;break}throw o;case 16:return e.finish(13);case 17:return e.finish(10);case 18:case"end":return e.stop()}}),e,null,[[2,6,10,18],[11,,13,17]])})))).apply(this,arguments)}function Zp(e,t,n){return ev.apply(this,arguments)}function ev(){return(ev=t(o)(t(g).mark((function e(n,r,i){var a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.b_.shift(),o=_h.from(a,r,i),e.next=3,qp(n,(function(){return n.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,zp(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tv(e,t){return nv.apply(this,arguments)}function nv(){return nv=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r&&uv(n).h_,!e.t0){e.next=4;break}return e.next=4,function(){var e=t(o)(t(g).mark((function e(n,r){var i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ih(t=r.code)||t===lc.ABORTED){e.next=7;break}return i=n.b_.shift(),uv(n).Yo(),e.next=5,qp(n,(function(){return n.remoteSyncer.rejectFailedWrite(i.batchId,r)}));case 5:return e.next=7,zp(n);case 7:case"end":return e.stop()}var t}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n,r);case 4:Wp(n)&&Qp(n);case 5:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e,t){return iv.apply(this,arguments)}function iv(){return(iv=t(o)(t(g).mark((function e(n,r){var i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=cc(n)).asyncQueue.verifyOperationInProgress(),rc("RemoteStore","RemoteStore received new credentials"),a=Np(i),i.C_.add(3),e.next=6,xp(i);case 6:return a&&i.M_.set("Unknown"),e.next=9,i.remoteSyncer.handleCredentialChange(r);case 9:return i.C_.delete(3),e.next=12,_p(i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function av(e,t){return ov.apply(this,arguments)}function ov(){return(ov=t(o)(t(g).mark((function e(n,r){var i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cc(n),!r){e.next=7;break}return i.C_.delete(2),e.next=5,_p(i);case 5:e.next=13;break;case 7:if(e.t0=r,e.t0){e.next=13;break}return i.C_.add(2),e.next=12,xp(i);case 12:i.M_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sv(e){return e.O_||(e.O_=(r=e.datastore,i=e.asyncQueue,a={ho:Pp.bind(null,e),Io:Mp.bind(null,e),a_:Fp.bind(null,e)},(s=cc(r)).A_(),new mp(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)),e.v_.push((n=t(o)(t(g).mark((function n(r){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=4;break}e.O_.Yo(),Rp(e)?Op(e):e.M_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.O_.stop();case 6:Dp(e);case 7:case"end":return t.stop()}}),n)}))),function(e){return n.apply(this,arguments)}))),e.O_;var n,r,i,a,s}function uv(e){return e.N_||(e.N_=(r=e.datastore,i=e.asyncQueue,a={ho:Jp.bind(null,e),Io:tv.bind(null,e),T_:Yp.bind(null,e),I_:Zp.bind(null,e)},(s=cc(r)).A_(),new gp(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)),e.v_.push((n=t(o)(t(g).mark((function n(r){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return e.N_.Yo(),t.next=4,zp(e);case 4:t.next=9;break;case 6:return t.next=8,e.N_.stop();case 8:e.b_.length>0&&(rc("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]);case 9:case"end":return t.stop()}}),n)}))),function(e){return n.apply(this,arguments)}))),e.N_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;var n,r,i,a,s}var cv=function(){"use strict";function e(n,r,i,a,o){t(u)(this,e),this.asyncQueue=n,this.timerId=r,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new hc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return t(c)(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fc(lc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function lv(e,t){if(ic("AsyncQueue","".concat(t,": ").concat(e)),qc(e))return new fc(lc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fv=function(){"use strict";function e(n){t(u)(this,e),this.comparator=n?function(e,t){return n(e,t)||Rc.comparator(e.key,t.key)}:function(e,t){return Rc.comparator(e.key,t.key)},this.keyedMap=Rf(),this.sortedSet=new Zc(this.comparator)}return t(c)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),hv=function(){"use strict";function e(){t(u)(this,e),this.B_=new Zc(Rc.comparator)}return t(c)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):sc():this.B_=this.B_.insert(t,e)}},{key:"L_",value:function(){var e=[];return this.B_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),dv=function(){"use strict";function e(n,r,i,a,o,s,c,l,f){t(u)(this,e),this.query=n,this.docs=r,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=f}return t(c)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,fv.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),pv=function e(){"use strict";t(u)(this,e),this.k_=void 0,this.listeners=[]},vv=function e(){"use strict";t(u)(this,e),this.queries=new Sf((function(e){return bf(e)}),wf),this.onlineState="Unknown",this.q_=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(e,t){return mv.apply(this,arguments)}function mv(){return(mv=t(o)(t(g).mark((function e(n,r){var i,a,o,s,u;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cc(n),a=r.query,o=!1,(s=i.queries.get(a))||(o=!0,s=new pv),!o){e.next=13;break}return e.prev=3,e.next=6,i.onListen(a);case 6:s.k_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=lv(e.t0,"Initialization of query '".concat(_f(r.query),"' failed")),e.abrupt("return",void r.onError(u));case 13:i.queries.set(a,s),s.listeners.push(r),r.Q_(i.onlineState),s.k_&&r.K_(s.k_)&&_v(i);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function gv(e,t){return kv.apply(this,arguments)}function kv(){return(kv=t(o)(t(g).mark((function e(n,r){var i,a,o,s,u;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cc(n),a=r.query,o=!1,(s=i.queries.get(a))&&(u=s.listeners.indexOf(r))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),!o){e.next=6;break}return e.abrupt("return",(i.queries.delete(a),i.onUnlisten(a)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wv(e,t){var n=cc(e),r=!1,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.query,f=n.queries.get(l);if(f){var h=!0,d=!1,p=void 0;try{for(var v,y=f.listeners[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){v.value.K_(c)&&(r=!0)}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}f.k_=c}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}r&&_v(n)}function bv(e,t,n){var r=cc(e),i=r.queries.get(t),a=!0,o=!1,s=void 0;if(i)try{for(var u,c=i.listeners[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){u.value.onError(n)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}r.queries.delete(t)}function _v(e){e.q_.forEach((function(e){e.next()}))}var Ev=function(){"use strict";function e(n,r,i){t(u)(this,e),this.query=n,this.U_=r,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}return t(c)(e,[{key:"K_",value:function(e){if(!this.options.includeMetadataChanges){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e.docChanges[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;3!==s.type&&t.push(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}e=new dv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var u=!1;return this.W_?this.z_(e)&&(this.U_.next(e),u=!0):this.j_(e,this.onlineState)&&(this.H_(e),u=!0),this.G_=e,u}},{key:"onError",value:function(e){this.U_.error(e)}},{key:"Q_",value:function(e){this.onlineState=e;var t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}},{key:"j_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"z_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"H_",value:function(e){e=dv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xv=function e(n){"use strict";t(u)(this,e),this.key=n},Iv=function e(n){"use strict";t(u)(this,e),this.key=n},Tv=function(){"use strict";function e(n,r){t(u)(this,e),this.query=n,this.ia=r,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ff(),this.mutatedKeys=Ff(),this._a=If(n),this.aa=new fv(this._a)}return t(c)(e,[{key:"ua",get:function(){return this.ia}},{key:"ca",value:function(e,t){var n=this,r=t?t.la:new hv,i=t?t.aa:this.aa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ef(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ha(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n._a(f,u)>0||c&&n._a(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{aa:o,la:r,Zi:s,mutatedKeys:a}}},{key:"ha",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;var a=e.la.L_();a.sort((function(e,t){return n=e.type,i=t.type,(a=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sc()}})(n)-a(i)||r._a(e.doc,t.doc);var n,i,a})),this.Pa(n);var o=t?this.Ia():[],s=0===this.oa.size&&this.current?1:0,u=s!==this.sa;return this.sa=s,0!==a.length||u?{snapshot:new dv(this.query,e.aa,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}},{key:"Q_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new hv,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}},{key:"Ea",value:function(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}},{key:"Pa",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ia=t.ia.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ia=t.ia.delete(e)})),this.current=e.current)}},{key:"Ia",value:function(){var e=this;if(!this.current)return[];var t=this.oa;this.oa=Ff(),this.aa.forEach((function(t){e.Ea(t.key)&&(e.oa=e.oa.add(t.key))}));var n=[];return t.forEach((function(t){e.oa.has(t)||n.push(new Iv(t))})),this.oa.forEach((function(e){t.has(e)||n.push(new xv(e))})),n}},{key:"da",value:function(e){this.ia=e.ls,this.oa=Ff();var t=this.ca(e.documents);return this.applyChanges(t,!0)}},{key:"Aa",value:function(){return dv.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}]),e}(),Sv=function e(n,r,i){"use strict";t(u)(this,e),this.query=n,this.targetId=r,this.view=i},Av=function e(n){"use strict";t(u)(this,e),this.key=n,this.Ra=!1},Cv=function(){"use strict";function e(n,r,i,a,o,s){t(u)(this,e),this.localStore=n,this.remoteStore=r,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Sf((function(e){return bf(e)}),wf),this.fa=new Map,this.ga=new Set,this.pa=new Zc(Rc.comparator),this.ya=new Map,this.wa=new Rd,this.Sa={},this.ba=new Map,this.Da=Id.Nn(),this.onlineState="Unknown",this.Ca=void 0}return t(c)(e,[{key:"isPrimaryClient",get:function(){return!0===this.Ca}}]),e}();function Ov(e,t){return Rv.apply(this,arguments)}function Rv(){return(Rv=t(o)(t(g).mark((function e(n,r){var i,a,o,s,u,c;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ay(n),!(s=i.ma.get(r))){e.next=7;break}a=s.targetId,i.sharedClientState.addLocalQueryTarget(a),o=s.view.Aa(),e.next=16;break;case 7:return e.next=9,$d(i.localStore,yf(r));case 9:return u=e.sent,c=i.sharedClientState.addLocalQueryTarget(u.targetId),a=u.targetId,e.next=14,Nv(i,r,a,"current"===c,u.resumeToken);case 14:o=e.sent,i.isPrimaryClient&&Tp(i.remoteStore,u);case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nv(e,t,n,r,i){return Dv.apply(this,arguments)}function Dv(){return Dv=t(o)(t(g).mark((function e(n,r,i,a,s){var u,c,l,f,h,d;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.va=function(e,r,i){return(a=t(o)(t(g).mark((function e(n,r,i,a){var o,s,u;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.view.ca(i),e.t0=o.Zi,!e.t0){e.next=6;break}return e.next=5,tp(n.localStore,r.query,!1).then((function(e){var t=e.documents;return r.view.ca(t,o)}));case 5:o=e.sent;case 6:return s=a&&a.targetChanges.get(r.targetId),u=r.view.applyChanges(o,n.isPrimaryClient,s),e.abrupt("return",(Yv(n,r.targetId,u.Ta),u.snapshot));case 8:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return a.apply(this,arguments)})(n,e,r,i);var a},e.next=3,tp(n.localStore,r,!0);case 3:return u=e.sent,c=new Tv(r,u.ls),l=c.ca(u.documents),f=Lh.createSynthesizedTargetChangeForCurrentChange(i,a&&"Offline"!==n.onlineState,s),h=c.applyChanges(l,n.isPrimaryClient,f),Yv(n,i,h.Ta),d=new Sv(r,i,c),e.abrupt("return",(n.ma.set(r,d),n.fa.has(i)?n.fa.get(i).push(r):n.fa.set(i,[r]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Pv(e,t){return Lv.apply(this,arguments)}function Lv(){return(Lv=t(o)(t(g).mark((function e(n,r){var i,a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=cc(n),a=i.ma.get(r),!((o=i.fa.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i.fa.set(a.targetId,o.filter((function(e){return!wf(e,r)}))),void i.ma.delete(r)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,Zd(i.localStore,a.targetId,!1).then((function(){i.sharedClientState.clearQueryState(a.targetId),Sp(i.remoteStore,a.targetId),Jv(i,a.targetId)})).catch(Bc);case 9:e.next=14;break;case 11:return Jv(i,a.targetId),e.next=14,Zd(i.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mv(e,t,n){return Uv.apply(this,arguments)}function Uv(){return Uv=t(o)(t(g).mark((function e(n,r,i){var a,o,s;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oy(n),e.prev=1,e.next=4,function(e,t){var n,r,i=cc(e),a=Ic.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Ff());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Cf(),u=Ff();return i.ss.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o=[],s=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=lh(h,n.get(h.key).overlayedDocument);null!=d&&o.push(new dh(h.key,d,Pl(d.value.mapValue),ih.exists(!0)))}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return i.mutationQueue.addMutationBatch(e,a,o,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Nf(n)}}))}(a.localStore,r);case 4:return o=e.sent,a.sharedClientState.addPendingMutation(o.batchId),t=a,u=o.batchId,c=i,l=void 0,(l=t.Sa[t.currentUser.toKey()])||(l=new Zc(Ec)),l=l.insert(u,c),t.Sa[t.currentUser.toKey()]=l,e.next=9,ey(a,o.changes);case 9:return e.next=11,zp(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s=lv(e.t0,"Failed to persist write"),i.reject(s);case 17:case"end":return e.stop()}var t,u,c,l}),e,null,[[1,13]])}))),Uv.apply(this,arguments)}function Fv(e,t){return Bv.apply(this,arguments)}function Bv(){return(Bv=t(o)(t(g).mark((function e(n,r){var i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cc(n),e.prev=1,e.next=4,Jd(i.localStore,r);case 4:return a=e.sent,r.targetChanges.forEach((function(e,t){var n=i.ya.get(t);n&&(uc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ra=!0:e.modifiedDocuments.size>0?uc(n.Ra):e.removedDocuments.size>0&&(uc(n.Ra),n.Ra=!1))})),e.next=8,ey(i,a,r);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Bc(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Vv(e,t,n){var r=cc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ma.forEach((function(e,n){var r=n.view.Q_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=cc(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i=!0,a=!1,o=void 0;try{for(var s,u=n.listeners[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.Q_(t)&&(r=!0)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}})),r&&_v(n)}(r.eventManager,t),i.length&&r.Va.a_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function jv(e,t,n){return qv.apply(this,arguments)}function qv(){return(qv=t(o)(t(g).mark((function e(n,r,i){var a,o,s,u,c,l;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=cc(n)).sharedClientState.updateQueryState(r,"rejected",i),o=a.ya.get(r),!(s=o&&o.key)){e.next=14;break}return u=(u=new Zc(Rc.comparator)).insert(s,Ll.newNoDocument(s,Tc.min())),c=Ff().add(s),l=new Ph(Tc.min(),new Map,new Zc(Ec),u,c),e.next=9,Fv(a,l);case 9:a.pa=a.pa.remove(s),a.ya.delete(r),Zv(a),e.next=16;break;case 14:return e.next=16,Zd(a.localStore,r,!1).then((function(){return Jv(a,r,i)})).catch(Bc);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zv(e,t){return Hv.apply(this,arguments)}function Hv(){return(Hv=t(o)(t(g).mark((function e(n,r){var i,a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cc(n),a=r.batch.batchId,e.prev=1,e.next=4,Wd(i.localStore,r);case 4:return o=e.sent,Qv(i,a,null),Wv(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,ey(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bc(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Kv(e,t,n){return Gv.apply(this,arguments)}function Gv(){return(Gv=t(o)(t(g).mark((function e(n,r,i){var a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cc(n),e.prev=1,e.next=4,function(e,t){var n=cc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return uc(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(a.localStore,r);case 4:return o=e.sent,Qv(a,r,i),Wv(a,r),a.sharedClientState.updateMutationState(r,"rejected",i),e.next=10,ey(a,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Bc(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Wv(e,t){(e.ba.get(t)||[]).forEach((function(e){e.resolve()})),e.ba.delete(t)}function Qv(e,t,n){var r=cc(e),i=r.Sa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function Jv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r=!0,i=!1,a=void 0;try{for(var o,s=e.fa.get(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e.ma.delete(u),n&&e.Va.Fa(u,n)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((function(t){e.wa.containsKey(t)||Xv(e,t)}))}function Xv(e,t){e.ga.delete(t.path.canonicalString());var n=e.pa.get(t);null!==n&&(Sp(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Zv(e))}function Yv(e,t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u instanceof xv?(e.wa.addReference(u.key,t),$v(e,u)):u instanceof Iv?(rc("SyncEngine","Document no longer in limbo: "+u.key),e.wa.removeReference(u.key,t),e.wa.containsKey(u.key)||Xv(e,u.key)):sc()}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}function $v(e,t){var n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(rc("SyncEngine","New document in limbo: "+n),e.ga.add(r),Zv(e))}function Zv(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){var t=e.ga.values().next().value;e.ga.delete(t);var n=new Rc(Ac.fromString(t)),r=e.Da.next();e.ya.set(r,new Av(n)),e.pa=e.pa.insert(n,r),Tp(e.remoteStore,new gd(yf(hf(n.path)),r,"TargetPurposeLimboResolution",zc._e))}}function ey(e,t,n){return ty.apply(this,arguments)}function ty(){return ty=t(o)(t(g).mark((function e(n,r,i){var a,s,u,c;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=cc(n),s=[],u=[],c=[],e.t0=a.ma.isEmpty(),e.t0){e.next=9;break}return a.ma.forEach((function(e,t){c.push(a.va(t,r,i).then((function(e){if((e||i)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);var n=Vd.Qi(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(c);case 6:return a.Va.a_(s),e.next=9,function(){var e=t(o)(t(g).mark((function e(n,r){var i,a,o,s,u,c,l,f,h,d,p;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cc(n),e.prev=1,e.next=4,i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return jc.forEach(r,(function(t){return jc.forEach(t.ki,(function(n){return i.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return jc.forEach(t.qi,(function(n){return i.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),qc(e.t0)){e.next=10;break}throw e.t0;case 10:rc("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:for(a=!0,o=!1,s=void 0,e.prev=12,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)l=c.value,f=l.targetId,l.fromCache||(h=i.ts.get(f),d=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(d),i.ts=i.ts.insert(f,p));e.next=20;break;case 16:e.prev=16,e.t1=e.catch(12),o=!0,s=e.t1;case 20:e.prev=20,e.prev=21,a||null==u.return||u.return();case 23:if(e.prev=23,!o){e.next=26;break}throw s;case 26:return e.finish(23);case 27:return e.finish(20);case 28:case"end":return e.stop()}}),e,null,[[1,6],[12,16,20,28],[21,,23,27]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,u);case 9:case"end":return e.stop()}}),e)}))),ty.apply(this,arguments)}function ny(e,t){return ry.apply(this,arguments)}function ry(){return(ry=t(o)(t(g).mark((function e(n,r){var i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=cc(n)).currentUser.isEqual(r)){e.next=11;break}return rc("SyncEngine","User change. New user:",r.toKey()),e.next=5,Kd(i.localStore,r);case 5:return a=e.sent,i.currentUser=r,function(e,t){e.ba.forEach((function(e){e.forEach((function(e){e.reject(new fc(lc.CANCELLED,t))}))})),e.ba.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(r,a.removedBatchIds,a.addedBatchIds),e.next=11,ey(i,a._s);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iy(e,t){var n=cc(e),r=n.ya.get(t);if(r&&r.Ra)return Ff().add(r.key);var i=Ff(),a=n.fa.get(t);if(!a)return i;var o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value,h=n.ma.get(f);i=i.unionWith(h.view.ua)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return i}function ay(e){var t=cc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jv.bind(null,t),t.Va.a_=wv.bind(null,t.eventManager),t.Va.Fa=bv.bind(null,t.eventManager),t}function oy(e){var t=cc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Kv.bind(null,t),t}var sy=function(){"use strict";function e(){t(u)(this,e),this.synchronizeTabs=!1}return t(c)(e,[{key:"initialize",value:function(e){var n=this;return t(o)(t(g).mark((function r(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.serializer=pp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),t.next=5,n.persistence.start();case 5:n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore);case 8:case"end":return t.stop()}}),r)})))()}},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Hd(this.persistence,new qd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Ud(Bd.jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new ip}},{key:"terminate",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.gcScheduler&&e.gcScheduler.stop(),t.next=3,e.sharedClientState.shutdown();case 3:return t.next=5,e.persistence.shutdown();case 5:case"end":return t.stop()}}),n)})))()}}]),e}(),uy=function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,[{key:"initialize",value:function(e,n){var r=this;return t(o)(t(g).mark((function i(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r.localStore,t.t0){t.next=12;break}return r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=function(e){return Vv(r.syncEngine,e,1)},r.remoteStore.remoteSyncer.handleCredentialChange=ny.bind(null,r.syncEngine),t.next=12,av(r.remoteStore,r.syncEngine.isPrimaryClient);case 12:case"end":return t.stop()}}),i)})))()}},{key:"createEventManager",value:function(e){return new vv}},{key:"createDatastore",value:function(e){var t,n=pp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new hp(t));return function(e,t,n,r){return new kp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Vv(o.syncEngine,e,0)},a=op.D()?new op:new ap,new bp(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return n=this.localStore,r=this.remoteStore,i=this.eventManager,a=this.sharedClientState,o=e.initialUser,s=e.maxConcurrentLimboResolutions,u=t,c=new Cv(n,r,i,a,o,s),u&&(c.Ca=!0),c;var n,r,i,a,o,s,u,c}},{key:"terminate",value:function(){return(e=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cc(n),rc("RemoteStore","RemoteStore shutting down."),r.C_.add(5),e.next=5,xp(r);case 5:r.F_.shutdown(),r.M_.set("Unknown");case 7:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cy=function(){"use strict";function e(n){t(u)(this,e),this.observer=n,this.muted=!1}return t(c)(e,[{key:"next",value:function(e){this.observer.next&&this.Oa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Oa(this.observer.error,e):ic("Uncaught Error in snapshot listener:",e.toString())}},{key:"Na",value:function(){this.muted=!0}},{key:"Oa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ly=function(){"use strict";function e(n,r,i,a){var s=this;t(u)(this,e);var c,l=this;this.authCredentials=n,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=a,this.user=Zu.UNAUTHENTICATED,this.clientId=_c.newId(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(i,(c=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rc("FirestoreClient","Received user=",n.uid),e.next=3,l.authCredentialListener(n);case 3:l.user=n;case 4:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})),this.appCheckCredentials.start(i,(function(e){return rc("FirestoreClient","Received new app check token=",e),s.appCheckCredentialListener(e,s.user)}))}return t(c)(e,[{key:"getConfiguration",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}}),n)})))()}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fc(lc.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){this.asyncQueue.enterRestrictedMode();var e=new hc,n=this;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.t0=n._onlineComponents,!t.t0){t.next=5;break}return t.next=5,n._onlineComponents.terminate();case 5:if(t.t1=n._offlineComponents,!t.t1){t.next=9;break}return t.next=9,n._offlineComponents.terminate();case 9:n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),e.resolve(),t.next=18;break;case 14:t.prev=14,t.t2=t.catch(0),i=lv(t.t2,"Failed to shutdown persistence"),e.reject(i);case 18:case"end":return t.stop()}}),r,null,[[0,14]])})))),e.promise}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(e,t){return hy.apply(this,arguments)}function hy(){return hy=t(o)(t(g).mark((function e(n,r){var i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.asyncQueue.verifyOperationInProgress(),rc("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,n.getConfiguration();case 3:return i=e.sent,e.next=6,r.initialize(i);case 6:a=i.initialUser,n.setCredentialChangeListener(function(){var e=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(n),e.t0){e.next=5;break}return e.next=4,Kd(r.localStore,n);case 4:a=n;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.persistence.setDatabaseDeletedListener((function(){return n.terminate()})),n._offlineComponents=r;case 8:case"end":return e.stop()}}),e)}))),hy.apply(this,arguments)}function dy(e,t){return py.apply(this,arguments)}function py(){return(py=t(o)(t(g).mark((function e(n,r){var i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.asyncQueue.verifyOperationInProgress(),e.next=3,yy(n);case 3:return i=e.sent,rc("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,n.getConfiguration();case 7:return a=e.sent,e.next=10,r.initialize(i,a);case 10:n.setCredentialChangeListener((function(e){return rv(r.remoteStore,e)})),n.setAppCheckTokenChangeListener((function(e,t){return rv(r.remoteStore,t)})),n._onlineComponents=r;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vy(e){return"FirebaseError"===e.name?e.code===lc.FAILED_PRECONDITION||e.code===lc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function yy(e){return my.apply(this,arguments)}function my(){return(my=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n._offlineComponents){e.next=21;break}if(!n._uninitializedComponentsProvider){e.next=18;break}return rc("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,fy(n,n._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),vy(r=e.t0)){e.next=13;break}throw r;case 13:return ac("Error using user provided cache. Falling back to memory cache: "+r),e.next=16,fy(n,new sy);case 16:e.next=21;break;case 18:return rc("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,fy(n,new sy);case 21:return e.abrupt("return",n._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function gy(e){return ky.apply(this,arguments)}function ky(){return(ky=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n._onlineComponents,e.t0){e.next=11;break}if(!n._uninitializedComponentsProvider){e.next=8;break}return rc("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,dy(n,n._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return rc("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,dy(n,new uy);case 11:return e.abrupt("return",(e.t0,n._onlineComponents));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wy(e){return gy(e).then((function(e){return e.syncEngine}))}function by(e){return _y.apply(this,arguments)}function _y(){return(_y=t(o)(t(g).mark((function e(n){var r,i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gy(n);case 2:return r=e.sent,i=r.eventManager,e.abrupt("return",(i.onListen=Ov.bind(null,r.syncEngine),i.onUnlisten=Pv.bind(null,r.syncEngine),i));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ey(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new hc;return e.asyncQueue.enqueueAndForget(t(o)(t(g).mark((function a(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n,r,i){var a=new cy({next:function(n){t.enqueueAndForget((function(){return gv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fc(lc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Ev(n,a,{includeMetadataChanges:!0,J_:!0});return yv(e,o)},t.next=3,by(e);case 3:return t.t1=t.sent,t.t2=e.asyncQueue,t.t3=n,t.t4=r,t.t5=i,t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3,t.t4,t.t5));case 9:case"end":return t.stop()}}),a)})))),i.promise}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xy(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Iy=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(e,t,n){if(!n)throw new fc(lc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Sy(e){if(!Rc.isDocumentKey(e))throw new fc(lc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ay(e){if(Rc.isDocumentKey(e))throw new fc(lc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Cy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=(n=e).constructor?n.constructor.name:null;return t?"a custom ".concat(t," object"):"an object"}var n;return"function"==typeof e?"a function":sc()}function Oy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fc(lc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Cy(e);throw new fc(lc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ry=function(){"use strict";function e(n){var r,i;if(t(u)(this,e),void 0===n.host){if(void 0!==n.ssl)throw new fc(lc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,this.localCache=n.localCache,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new fc(lc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new fc(lc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===n.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xy(null!==(i=n.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new fc(lc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new fc(lc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new fc(lc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!n.useFetchStreams}return t(c)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),Ny=function(){"use strict";function e(n,r,i,a){t(u)(this,e),this._authCredentials=n,this._appCheckCredentials=r,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ry({}),this._settingsFrozen=!1}return t(c)(e,[{key:"app",get:function(){if(!this._app)throw new fc(lc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fc(lc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ry(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new pc;switch(e.type){case"firstParty":return new gc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fc(lc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=Iy.get(e))&&(rc("ComponentProvider","Removing Datastore"),Iy.delete(e),t.terminate()),Promise.resolve();var e,t}}]),e}();function Dy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Oy(e,Ny))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=Zu.MOCK_USER;else{s=ve(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new fc(lc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Zu(c)}e._authCredentials=new vc(new dc(s,u))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Py=function(){"use strict";function e(n,r,i){t(u)(this,e),this.converter=r,this._query=i,this.type="query",this.firestore=n}return t(c)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Ly=function(){"use strict";function e(n,r,i){t(u)(this,e),this.converter=r,this._key=i,this.type="document",this.firestore=n}return t(c)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new My(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),My=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a){var o;return t(u)(this,r),(o=n.call(this,e,i,hf(a)))._path=a,o.type="collection",t(Ai)(o)}return t(c)(r,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ly(this.firestore,null,new Rc(e))}},{key:"withConverter",value:function(e){return new r(this.firestore,e,this._path)}}]),r}(Py);function Uy(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(e=Le(e),Ty("collection","path",n),e instanceof Ny){var o,s=(o=Ac).fromString.apply(o,[n].concat(t(h)(i)));return Ay(s),new My(e,null,s)}var u;if(!(e instanceof Ly||e instanceof My))throw new fc(lc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var c=e._path.child((u=Ac).fromString.apply(u,[n].concat(t(h)(i))));return Ay(c),new My(e.firestore,null,c)}function Fy(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(e=Le(e),1===arguments.length&&(n=_c.newId()),Ty("doc","path",n),e instanceof Ny){var o,s=(o=Ac).fromString.apply(o,[n].concat(t(h)(i)));return Sy(s),new Ly(e,null,new Rc(s))}var u;if(!(e instanceof Ly||e instanceof My))throw new fc(lc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var c=e._path.child((u=Ac).fromString.apply(u,[n].concat(t(h)(i))));return Sy(c),new Ly(e.firestore,e instanceof My?e.converter:null,new Rc(c))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var By=function(){"use strict";function e(){var n=this;t(u)(this,e),this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new vp(this,"async_queue_retry"),this.iu=function(){var e=dp();e&&rc("AsyncQueue","Visibility state changed to "+e.visibilityState),n.zo.Qo()};var r=dp();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.iu)}return t(c)(e,[{key:"isShuttingDown",get:function(){return this.Za}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.su(),this.ou(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Za){this.Za=!0,this.nu=e||!1;var t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}},{key:"enqueue",value:function(e){var t=this;if(this.su(),this.Za)return new Promise((function(){}));var n=new hc;return this.ou((function(){return t.Za&&t.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ya.push(e),t._u()}))}},{key:"_u",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.Ya.length){t.next=14;break}return t.prev=1,t.next=4,e.Ya[0]();case 4:e.Ya.shift(),e.zo.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),qc(t.t0)){t.next=12;break}throw t.t0;case 12:rc("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:e.Ya.length>0&&e.zo.ko((function(){return e._u()}));case 14:case"end":return t.stop()}}),n,null,[[1,8]])})))()}},{key:"ou",value:function(e){var t=this,n=this.Ja.then((function(){return t.tu=!0,e().catch((function(e){var n,r;throw t.eu=e,t.tu=!1,ic("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e})).then((function(e){return t.tu=!1,e}))}));return this.Ja=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.su(),this.ru.indexOf(e)>-1&&(t=0);var i=cv.createAndSchedule(this,e,t,n,(function(e){return r.au(e)}));return this.Xa.push(i),i}},{key:"su",value:function(){this.eu&&sc()}},{key:"verifyOperationInProgress",value:function(){}},{key:"uu",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 1:return r=e.Ja,t.next=4,r;case 4:if(r!==e.Ja){t.next=1;break}case 5:case"end":return t.stop()}}),n)})))()}},{key:"cu",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.Xa[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.timerId===e)return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"lu",value:function(e){var t=this;return this.uu().then((function(){t.Xa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n=!0,r=!1,i=void 0;try{for(var a,o=t.Xa[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.skipDelay(),"all"!==e&&s.timerId===e)break}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.uu()}))}},{key:"hu",value:function(e){this.ru.push(e)}},{key:"au",value:function(e){var t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}]),e}();var Vy=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a,o){var s;return t(u)(this,r),(s=n.call(this,e,i,a,o)).type="firestore",s._queue=new By,s._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]",t(Ai)(s)}return t(c)(r,[{key:"_terminate",value:function(){return this._firestoreClient||qy(this),this._firestoreClient.terminate()}}]),r}(Ny);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(e){return e._firestoreClient||qy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function qy(e){var t,n,r,i,a,o,s,u=e._freezeSettings(),c=(i=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",o=e._persistenceKey,new vl(i,a,o,(s=u).host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,xy(s.experimentalLongPollingOptions),s.useFetchStreams));e._firestoreClient=new ly(e._authCredentials,e._appCheckCredentials,e._queue,c),(null===(n=u.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=u.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zy=function(){"use strict";function e(n){t(u)(this,e),this._byteString=n}return t(c)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(sl.fromBase64String(t))}catch(e){throw new fc(lc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}},{key:"fromUint8Array",value:function(t){return new e(sl.fromUint8Array(t))}}]),e}(),Hy=function(){"use strict";function e(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t(u)(this,e);for(var a=0;a<r.length;++a)if(0===r[a].length)throw new fc(lc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oc(r)}return t(c)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ky=function e(n){"use strict";t(u)(this,e),this._methodName=n},Gy=function(){"use strict";function e(n,r){if(t(u)(this,e),!isFinite(n)||n<-90||n>90)throw new fc(lc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new fc(lc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}return t(c)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ec(this._lat,e._lat)||Ec(this._long,e._long)}}]),e}(),Wy=/^__.*__$/,Qy=function(){"use strict";function e(n,r,i){t(u)(this,e),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return t(c)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new dh(e,this.data,this.fieldMask,t,this.fieldTransforms):new hh(e,this.data,t,this.fieldTransforms)}}]),e}(),Jy=function(){"use strict";function e(n,r,i){t(u)(this,e),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return t(c)(e,[{key:"toMutation",value:function(e,t){return new dh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sc()}}var Yy=function(){"use strict";function e(n,r,i,a,o,s){t(u)(this,e),this.settings=n,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=a,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}return t(c)(e,[{key:"path",get:function(){return this.settings.path}},{key:"Iu",get:function(){return this.settings.Iu}},{key:"Tu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Eu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}},{key:"Ru",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}},{key:"Vu",value:function(e){return this.Tu({path:void 0,du:!0})}},{key:"mu",value:function(e){return pm(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Pu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Au(this.path.get(e))}},{key:"Au",value:function(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Xy(this.Iu)&&Wy.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}]),e}(),$y=function(){"use strict";function e(n,r,i){t(u)(this,e),this.databaseId=n,this.ignoreUndefinedProperties=r,this.serializer=i||pp(n)}return t(c)(e,[{key:"pu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Yy({Iu:e,methodName:t,gu:n,path:Oc.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Zy(e){var t=e._freezeSettings(),n=pp(e._databaseId);return new $y(e._databaseId,!!t.ignoreUndefinedProperties,n)}function em(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.pu(a.merge||a.mergeFields?2:0,t,n,i);lm("Data must be an object, but it was:",o,r);var s,u,c=um(r,o);if(a.merge)s=new il(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l=[],f=!0,h=!1,d=void 0;try{for(var p,v=a.mergeFields[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=p.value,m=fm(t,y,n);if(!o.contains(m))throw new fc(lc.INVALID_ARGUMENT,"Field '".concat(m,"' is specified in your field mask but missing from your input data."));vm(l,m)||l.push(m)}}catch(e){h=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}s=new il(l),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Qy(new Dl(c),s,u)}var tm=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.apply(this,arguments)}return t(c)(r,[{key:"_toFieldTransform",value:function(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof r}}]),r}(Ky);function nm(e,t,n){return new Yy({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var rm=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this,e)).yu=i,t(Ai)(a)}return t(c)(r,[{key:"_toFieldTransform",value:function(e){var t=nm(this,e,!0),n=this.yu.map((function(e){return sm(e,t)})),r=new Jf(n);return new nh(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),r}(Ky);function im(e,t,n,r){var i=e.pu(1,t,n);lm("Data must be an object, but it was:",i,r);var a=[],o=Dl.empty();Yc(r,(function(e,r){var s=dm(t,e,n);r=Le(r);var u=i.Ru(s);if(r instanceof tm)a.push(s);else{var c=sm(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new il(a);return new Jy(o,s,i.fieldTransforms)}function am(e,t,n,r,i,a){var o=e.pu(1,t,n),s=[fm(t,r,n)],u=[i];if(a.length%2!=0)throw new fc(lc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(fm(t,a[c])),u.push(a[c+1]);for(var l=[],f=Dl.empty(),h=s.length-1;h>=0;--h)if(!vm(l,s[h])){var d=s[h],p=u[h];p=Le(p);var v=o.Ru(d);if(p instanceof tm)l.push(d);else{var y=sm(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new il(l);return new Jy(f,m,o.fieldTransforms)}function om(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return sm(n,e.pu(r?4:3,t))}function sm(e,t){if(cm(e=Le(e)))return lm("Unsupported field value:",t,e),um(e,t);if(e instanceof Ky)return function(e,t){if(!Xy(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){var n=[],r=0,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=sm(s.value,t.Vu(r));null==c&&(c={nullValue:"NULL_VALUE"}),n.push(c),r++}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Le(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return zf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ic.fromDate(e);return{timestampValue:Qh(t.serializer,n)}}if(e instanceof Ic){var r=new Ic(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Qh(t.serializer,r)}}if(e instanceof Gy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zy)return{bytesValue:Jh(t.serializer,e._byteString)};if(e instanceof Ly){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.mu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:$h(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(Cy(e)))}(e,t)}function um(e,t){var n={};return $c(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yc(e,(function(e,r){var i=sm(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function cm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ic||e instanceof Gy||e instanceof zy||e instanceof Ly||e instanceof Ky)}function lm(e,t,n){if(!cm(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=Cy(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}var i}function fm(e,t,n){if((t=Le(t))instanceof Hy)return t._internalPath;if("string"==typeof t)return dm(e,t);throw pm("Field path arguments must be of type string or ",e,!1,void 0,n)}var hm=new RegExp("[~\\*/\\[\\]]");function dm(e,n,r){if(n.search(hm)>=0)throw pm("Invalid field path (".concat(n,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,r);try{return t(_i)(Hy,t(h)(n.split(".")))._internalPath}catch(t){throw pm("Invalid field path (".concat(n,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,r)}}function pm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new fc(lc.INVALID_ARGUMENT,s+e+u)}function vm(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ym=function(){"use strict";function e(n,r,i,a,o){t(u)(this,e),this._firestore=n,this._userDataWriter=r,this._key=i,this._document=a,this._converter=o}return t(c)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Ly(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new mm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),mm=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.apply(this,arguments)}return t(c)(r,[{key:"data",value:function(){return t(Ei)(t(Si)(r.prototype),"data",this).call(this)}}]),r}(ym);function gm(e,t){return"string"==typeof t?dm(e,t):t instanceof Hy?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fc(lc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wm=function e(){"use strict";t(u)(this,e)},bm=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.apply(this,arguments)}return r}(wm);function _m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=[];t instanceof wm&&a.push(t),function(e){var t=e.filter((function(e){return e instanceof Im})).length,n=e.filter((function(e){return e instanceof Em})).length;if(t>1||t>0&&n>0)throw new fc(lc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a=a.concat(r));var o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;e=f._apply(e)}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return e}var Em=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a){var o;return t(u)(this,r),(o=n.call(this))._field=e,o._op=i,o._value=a,o.type="where",t(Ai)(o)}return t(c)(r,[{key:"_apply",value:function(e){var t=this._parse(e);return Am(e._query,t),new Py(e.firestore,e.converter,gf(e._query,t))}},{key:"_parse",value:function(e){var t=Zy(e.firestore);return function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fc(lc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Sm(o,a);var u=[],c=!0,l=!1,f=void 0;try{for(var h,d=o[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;u.push(Tm(r,e,p))}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}s={arrayValue:{values:u}}}else s=Tm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Sm(o,a),s=om(n,t,o,"in"===a||"not-in"===a);return ql.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}],[{key:"_create",value:function(e,t,n){return new r(e,t,n)}}]),r}(bm);function xm(e,t,n){var r=t,i=gm("where",e);return Em._create(i,r,n)}var Im=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a;return t(u)(this,r),(a=n.call(this)).type=e,a._queryConstraints=i,t(Ai)(a)}return t(c)(r,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:zl.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n=e,r=t.getFlattenedFilters(),i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;Am(n,c),n=gf(n,c)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}(e._query,t),new Py(e.firestore,e.converter,gf(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new r(e,t)}}]),r}(wm);function Tm(e,t,n){if("string"==typeof(n=Le(n))){if(""===n)throw new fc(lc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pf(t)&&-1!==n.indexOf("/"))throw new fc(lc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ac.fromString(n));if(!Rc.isDocumentKey(r))throw new fc(lc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Il(e,new Rc(r))}if(n instanceof Ly)return Il(e,n._key);throw new fc(lc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Cy(n),"."))}function Sm(e,t){if(!Array.isArray(e)||0===e.length)throw new fc(lc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Am(e,t){var n=function(e,t){var n=!0,r=!1,i=void 0,a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;try{for(var f,h=l.getFlattenedFilters()[Symbol.iterator]();!(n=(f=h.next()).done);n=!0){var d=f.value;if(t.indexOf(d.op)>=0)return d.op}}catch(e){r=!0,i=e}finally{try{n||null==h.return||h.return()}finally{if(r)throw i}}}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new fc(lc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fc(lc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}var Cm=function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ll(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sc()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",n=this,r={};return Yc(e,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Gy(ll(e.latitude),ll(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=dl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(pl(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=cl(e);return new Ic(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ac.fromString(e);uc(md(n));var r=new yl(n.get(1),n.get(3)),i=new Rc(n.popFirst(5));return r.isEqual(t)||ic("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Rm=function(){"use strict";function e(n,r){t(u)(this,e),this.hasPendingWrites=n,this.fromCache=r}return t(c)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Nm=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a,o,s,c){var l;return t(u)(this,r),(l=n.call(this,e,i,a,o,c))._firestore=e,l._firestoreImpl=e,l.metadata=s,t(Ai)(l)}return t(c)(r,[{key:"exists",value:function(){return t(Ei)(t(Si)(r.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Dm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),r}(ym),Dm=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.apply(this,arguments)}return t(c)(r,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(Ei)(t(Si)(r.prototype),"data",this).call(this,e)}}]),r}(Nm),Pm=function(){"use strict";function e(n,r,i,a){t(u)(this,e),this._firestore=n,this._userDataWriter=r,this._snapshot=a,this.metadata=new Rm(a.hasPendingWrites,a.fromCache),this.query=i}return t(c)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Dm(n._firestore,n._userDataWriter,r.key,r,new Rm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fc(lc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Dm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Rm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Dm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Rm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Lm(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Lm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sc()}}var Mm=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e){var i;return t(u)(this,r),(i=n.call(this)).firestore=e,t(Ai)(i)}return t(c)(r,[{key:"convertBytes",value:function(e){return new zy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ly(this.firestore,null,t)}}]),r}(Cm);function Um(e){e=Oy(e,Py);var t=Oy(e.firestore,Vy),n=jy(t),r=new Mm(t);return km(e._query),Ey(n,e._query).then((function(n){return new Pm(t,r,e,n)}))}function Fm(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];e=Oy(e,Ly);var o=Oy(e.firestore,Vy),s=Zy(o);return Vm(o,[("string"==typeof(t=Le(t))||t instanceof Hy?am(s,"updateDoc",e._key,t,n,i):im(s,"updateDoc",e._key,t)).toMutation(e._key,ih.exists(!0))])}function Bm(e,t){var n=Oy(e.firestore,Vy),r=Fy(e),i=Om(e.converter,t);return Vm(n,[em(Zy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ih.exists(!1))]).then((function(){return r}))}function Vm(e,n){return r=jy(e),i=n,a=new hc,r.asyncQueue.enqueueAndForget(t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Mv,e.next=3,wy(r);case 3:return e.t1=e.sent,e.t2=i,e.t3=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e)})))),a.promise;var r,i,a}function jm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rm("arrayUnion",t)}new WeakMap;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ec=Ot,It(new Me("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Vy(new yc(e.getProvider("auth-internal")),new wc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fc(lc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Dt($u,"4.3.2",e),Dt($u,"4.3.2","esm2017")}();T=a("ds8z5"),f=a("hKHmD"),Si=a("fVNic");function qm(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;function zm(){return t(f)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Hm=zm,Km=new _e("auth","Firebase",zm()),Gm=new Qe("@firebase/auth");function Wm(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;Gm.logLevel<=Be.WARN&&(a=Gm).warn.apply(a,["Auth (".concat(Ot,"): ").concat(e)].concat(t(h)(r)))}function Qm(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;Gm.logLevel<=Be.ERROR&&(a=Gm).error.apply(a,["Auth (".concat(Ot,"): ").concat(e)].concat(t(h)(r)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw $m.apply(void 0,[e].concat(t(h)(r)))}function Xm(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return $m.apply(void 0,[e].concat(t(h)(r)))}function Ym(e,n,r){var i=Object.assign(Object.assign({},Hm()),t(f)({},n,r));return new _e("auth","Firebase",i).create(n,{appName:e.name})}function $m(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a;if("string"!=typeof e){var o,s=r[0],u=t(h)(r.slice(1));return u[0]&&(u[0].appName=e.name),(o=e._errorFactory).create.apply(o,[s].concat(t(h)(u)))}return(a=Km).create.apply(a,[e].concat(t(h)(r)))}function Zm(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(!e)throw $m.apply(void 0,[n].concat(t(h)(i)))}function eg(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Qm(t),new Error(t)}function tg(e,t){e||eg(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function rg(){return"http:"===ig()||"https:"===ig()}function ig(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ag=function(){"use strict";function e(n,r){t(u)(this,e),this.shortDelay=n,this.longDelay=r,tg(r>n,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ye())||"object"==typeof navigator&&"ReactNative"===navigator.product}return t(c)(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(rg()||me()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(e,t){tg(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sg,ug=function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void eg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void eg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void eg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),cg=(sg={},t(f)(sg,"CREDENTIAL_MISMATCH","custom-token-mismatch"),t(f)(sg,"MISSING_CUSTOM_TOKEN","internal-error"),t(f)(sg,"INVALID_IDENTIFIER","invalid-email"),t(f)(sg,"MISSING_CONTINUE_URI","internal-error"),t(f)(sg,"INVALID_PASSWORD","wrong-password"),t(f)(sg,"MISSING_PASSWORD","missing-password"),t(f)(sg,"EMAIL_EXISTS","email-already-in-use"),t(f)(sg,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),t(f)(sg,"INVALID_IDP_RESPONSE","invalid-credential"),t(f)(sg,"INVALID_PENDING_TOKEN","invalid-credential"),t(f)(sg,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),t(f)(sg,"MISSING_REQ_TYPE","internal-error"),t(f)(sg,"EMAIL_NOT_FOUND","user-not-found"),t(f)(sg,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),t(f)(sg,"EXPIRED_OOB_CODE","expired-action-code"),t(f)(sg,"INVALID_OOB_CODE","invalid-action-code"),t(f)(sg,"MISSING_OOB_CODE","internal-error"),t(f)(sg,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),t(f)(sg,"INVALID_ID_TOKEN","invalid-user-token"),t(f)(sg,"TOKEN_EXPIRED","user-token-expired"),t(f)(sg,"USER_NOT_FOUND","user-token-expired"),t(f)(sg,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),t(f)(sg,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),t(f)(sg,"INVALID_CODE","invalid-verification-code"),t(f)(sg,"INVALID_SESSION_INFO","invalid-verification-id"),t(f)(sg,"INVALID_TEMPORARY_PROOF","invalid-credential"),t(f)(sg,"MISSING_SESSION_INFO","missing-verification-id"),t(f)(sg,"SESSION_EXPIRED","code-expired"),t(f)(sg,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),t(f)(sg,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),t(f)(sg,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),t(f)(sg,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),t(f)(sg,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),t(f)(sg,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),t(f)(sg,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),t(f)(sg,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),t(f)(sg,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),t(f)(sg,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),t(f)(sg,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),t(f)(sg,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),t(f)(sg,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),t(f)(sg,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),t(f)(sg,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),t(f)(sg,"MISSING_CLIENT_TYPE","missing-client-type"),t(f)(sg,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),t(f)(sg,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),t(f)(sg,"INVALID_REQ_TYPE","invalid-req-type"),sg),lg=new ag(3e4,6e4);function fg(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function hg(e,t,n,r){return dg.apply(this,arguments)}function dg(){return dg=t(o)(t(g).mark((function e(n,r,i,a){var s,u=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=u.length>4&&void 0!==u[4]?u[4]:{},e.abrupt("return",pg(n,s,t(o)(t(g).mark((function e(){var o,s,u,c;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},s={},a&&("GET"===r?s=a:o={body:JSON.stringify(a)}),u=Ae(Object.assign({key:n.config.apiKey},s)).slice(1),e.next=6,n._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),e.abrupt("return",ug.fetch()(gg(n,n.config.apiHost,i,u),Object.assign({method:r,headers:c,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),dg.apply(this,arguments)}function pg(e,t,n){return vg.apply(this,arguments)}function vg(){return(vg=t(o)(t(g).mark((function e(n,r,i){var a,o,s,u,c,l,f,h,d;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._canInitEmulator=!1,a=Object.assign(Object.assign({},cg),r),e.prev=2,o=new wg(n),e.next=6,Promise.race([i(),o.promise]);case 6:return s=e.sent,o.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw bg(n,"account-exists-with-different-credential",u);case 13:if(!s.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=s.ok?u.errorMessage:u.error.message,l=t(w)(c.split(" : "),2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw bg(n,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw bg(n,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw bg(n,"user-disabled",u);case 29:if(d=a[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Ym(n,d,h);case 34:Jm(n,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof be)){e.next=41;break}throw e.t0;case 41:Jm(n,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function yg(e,t,n,r){return mg.apply(this,arguments)}function mg(){return mg=t(o)(t(g).mark((function e(n,r,i,a){var o,s,u=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,hg(n,r,i,a,o);case 3:return"mfaPendingCredential"in(s=e.sent)&&Jm(n,"multi-factor-auth-required",{_serverResponse:s}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)}))),mg.apply(this,arguments)}function gg(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?og(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function kg(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var wg=function(){"use strict";function e(n){var r=this;t(u)(this,e),this.auth=n,this.timer=null,this.promise=new Promise((function(e,t){var n=r;r.timer=setTimeout((function(){return t(Xm(n.auth,"network-request-failed"))}),lg.get())}))}return t(c)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function bg(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Xm(e,t,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(e){return void 0!==e&&void 0!==e.enterprise}var Eg=function(){"use strict";function e(n){if(t(u)(this,e),this.siteKey="",this.recaptchaEnforcementState=[],void 0===n.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=n.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=n.recaptchaEnforcementState}return t(c)(e,[{key:"getProviderEnforcementState",value:function(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;var t=!0,n=!1,r=void 0;try{for(var i,a=this.recaptchaEnforcementState[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.provider&&o.provider===e)return kg(o.enforcementState)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"isProviderEnabled",value:function(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}]),e}();function xg(e,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hg(n,"GET","/v2/recaptchaConfig",fg(n,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tg(e,t){return Sg.apply(this,arguments)}function Sg(){return(Sg=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hg(n,"POST","/v1/accounts:delete",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ag(e,t){return Cg.apply(this,arguments)}function Cg(){return(Cg=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hg(n,"POST","/v1/accounts:lookup",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(){return Rg=t(o)(t(g).mark((function e(n){var r,i,a,o,s,u,c=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]&&c[1],i=Le(n),e.next=4,i.getIdToken(r);case 4:return a=e.sent,Zm((o=Dg(a))&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error"),s="object"==typeof o.firebase?o.firebase:void 0,u=null==s?void 0:s.sign_in_provider,e.abrupt("return",{claims:o,token:a,authTime:Og(Ng(o.auth_time)),issuedAtTime:Og(Ng(o.iat)),expirationTime:Og(Ng(o.exp)),signInProvider:u||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Rg.apply(this,arguments)}function Ng(e){return 1e3*Number(e)}function Dg(e){var n=t(w)(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Qm("JWT malformed, contained fewer than 3 sections"),null;try{var o=se(i);return o?JSON.parse(o):(Qm("Failed to decode base64 JWT payload"),null)}catch(e){return Qm("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function Pg(e,t){return Lg.apply(this,arguments)}function Lg(){return Lg=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){var i=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.length>2&&void 0!==i[2]&&i[2])){e.next=3;break}return e.abrupt("return",r);case 3:return e.prev=3,e.next=6,r;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof be&&Mg(e.t0))){e.next=15;break}if(n.auth.currentUser!==n){e.next=15;break}return e.next=15,n.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Lg.apply(this,arguments)}function Mg(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ug=function(){"use strict";function e(n){t(u)(this,e),this.user=n,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return t(c)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(e),r=this;this.timerId=setTimeout(t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.iteration();case 2:case"end":return e.stop()}}),e)}))),n)}}},{key:"iteration",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.user.getIdToken(!0);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),"auth/network-request-failed"===(null===t.t0||void 0===t.t0?void 0:t.t0.code)&&e.schedule(!0),t.abrupt("return");case 9:e.schedule();case 10:case"end":return t.stop()}}),n,null,[[0,5]])})))()}}]),e}(),Fg=function(){"use strict";function e(n,r){t(u)(this,e),this.createdAt=n,this.lastLoginAt=r,this._initializeTime()}return t(c)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Og(this.lastLoginAt),this.creationTime=Og(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(e){return Vg.apply(this,arguments)}function Vg(){return(Vg=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n){var r,i,a,o,s,u,c,l,f,h,d;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.auth,e.next=4,n.getIdToken();case 4:return a=e.sent,e.next=7,Pg(n,Ag(i,{idToken:a}));case 7:Zm(null==(o=e.sent)?void 0:o.users.length,i,"internal-error"),s=o.users[0],n._notifyReloadListener(s),u=(null===(r=s.providerUserInfo)||void 0===r?void 0:r.length)?zg(s.providerUserInfo):[],c=qg(n.providerData,u),l=n.isAnonymous,f=!(n.email&&s.passwordHash||(null==c?void 0:c.length)),h=!!l&&f,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Fg(s.createdAt,s.lastLoginAt),isAnonymous:h},Object.assign(n,d);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jg(){return(jg=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Le(n),e.next=3,Bg(r);case 3:return e.next=5,r.auth._persistUserIfCurrent(r);case 5:r.auth._notifyListenersIfCurrent(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qg(e,n){var r=e.filter((function(e){return!n.some((function(t){return t.providerId===e.providerId}))}));return t(h)(r).concat(t(h)(n))}function zg(e){return e.map((function(e){var t=e.providerId,n=qm(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Hg(e,t){return Kg.apply(this,arguments)}function Kg(){return(Kg=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){var i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pg(n,{},t(o)(t(g).mark((function e(){var i,a,o,s,u,c;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ae({grant_type:"refresh_token",refresh_token:r}).slice(1),a=n.config,o=a.tokenApiHost,s=a.apiKey,u=gg(n,o,"/v1/token","key=".concat(s)),e.next=5,n._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ug.fetch()(u,{method:"POST",headers:c,body:i}));case 8:case"end":return e.stop()}}),e)}))));case 2:return i=e.sent,e.abrupt("return",{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gg(e,t){return Wg.apply(this,arguments)}function Wg(){return(Wg=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hg(n,"POST","/v2/accounts:revokeToken",fg(n,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qg=function(){"use strict";function e(){t(u)(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return t(c)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Zm(e.idToken,"internal-error"),Zm(void 0!==e.idToken,"internal-error"),Zm(void 0!==e.refreshToken,"internal-error");var t,n,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,Zm(n=Dg(t),"internal-error"),Zm(void 0!==n.exp,"internal-error"),Zm(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}},{key:"getToken",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return t(o)(t(g).mark((function i(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Zm(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired){t.next=3;break}return t.abrupt("return",r.accessToken);case 3:if(!r.refreshToken){t.next=7;break}return t.next=6,r.refresh(e,r.refreshToken);case 6:return t.abrupt("return",r.accessToken);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),i)})))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(e,n){var r=this;return t(o)(t(g).mark((function i(){var a,o,s,u;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Hg(e,n);case 2:a=t.sent,o=a.accessToken,s=a.refreshToken,u=a.expiresIn,r.updateTokensAndExpiration(o,s,Number(u));case 7:case"end":return t.stop()}}),i)})))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return eg("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Zm("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Zm("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Zm("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(e,t){Zm("string"==typeof e||void 0===e,"internal-error",{appName:t})}var Xg=function(){"use strict";function e(n){t(u)(this,e);var r=n.uid,i=n.auth,a=n.stsTokenManager,o=qm(n,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ug(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?t(h)(o.providerData):[],this.metadata=new Fg(o.createdAt||void 0,o.lastLoginAt||void 0)}return t(c)(e,[{key:"getIdToken",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pg(n,n.stsTokenManager.getToken(n.auth,e));case 2:if(Zm(i=t.sent,n.auth,"internal-error"),n.accessToken===i){t.next=9;break}return n.accessToken=i,t.next=8,n.auth._persistUserIfCurrent(n);case 8:n.auth._notifyListenersIfCurrent(n);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),r)})))()}},{key:"getIdTokenResult",value:function(e){return function(e){return Rg.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return jg.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Zm(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Zm(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return t(o)(t(g).mark((function i(){var a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!1,e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),a=!0),!n){t.next=5;break}return t.next=5,Bg(r);case 5:return t.next=7,r.auth._persistUserIfCurrent(r);case 7:a&&r.auth._notifyListenersIfCurrent(r);case 8:case"end":return t.stop()}}),i)})))()}},{key:"delete",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken();case 2:return r=t.sent,t.next=5,Pg(e,Tg(e.auth,{idToken:r}));case 5:return e.stsTokenManager.clearRefreshToken(),t.abrupt("return",e.auth.signOut());case 7:case"end":return t.stop()}}),n)})))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,E=n.stsTokenManager;Zm(k&&E,t,"internal-error");var x=Qg.fromJSON(this.name,E);Zm("string"==typeof k,t,"internal-error"),Jg(f,t.name),Jg(h,t.name),Zm("boolean"==typeof w,t,"internal-error"),Zm("boolean"==typeof b,t,"internal-error"),Jg(d,t.name),Jg(p,t.name),Jg(v,t.name),Jg(y,t.name),Jg(m,t.name),Jg(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:x,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t(o)(t(g).mark((function a(){var o,s;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new Qg).updateFromServerResponse(r),s=new e({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),t.next=5,Bg(s);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),a)})))()}}]),e}(),Yg=new Map;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(e){tg(e instanceof Function,"Expected a class definition");var t=Yg.get(e);return t?(tg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Yg.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zg=function(){"use strict";function e(){t(u)(this,e),this.type="NONE",this.storage={}}return t(c)(e,[{key:"_isAvailable",value:function(){return t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))()}},{key:"_set",value:function(e,n){var r=this;return t(o)(t(g).mark((function i(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.storage[e]=n;case 1:case"end":return t.stop()}}),i)})))()}},{key:"_get",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.storage[e],t.abrupt("return",void 0===i?null:i);case 2:case"end":return t.stop()}}),r)})))()}},{key:"_remove",value:function(e){var n=this;return t(o)(t(g).mark((function r(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete n.storage[e];case 1:case"end":return t.stop()}}),r)})))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Zg.type="NONE";var ek=Zg;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var nk=function(){"use strict";function e(n,r,i){t(u)(this,e),this.persistence=n,this.auth=r,this.userKey=i;var a=this.auth,o=a.config,s=a.name;this.fullUserKey=tk(this.userKey,o.apiKey,s),this.fullPersistenceKey=tk("persistence",o.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return t(c)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.persistence._get(e.fullUserKey);case 2:return r=t.sent,t.abrupt("return",r?Xg._fromJSON(e.auth,r):null);case 4:case"end":return t.stop()}}),n)})))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.persistence!==e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,n.getCurrentUser();case 4:return i=t.sent,t.next=7,n.removeCurrentUser();case 7:if(n.persistence=e,!i){t.next=10;break}return t.abrupt("return",n.setCurrentUser(i));case 10:case"end":return t.stop()}}),r)})))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return t(o)(t(g).mark((function a(){var s,u,c,l,f,h,d,p,v,y,m,k,w;return t(g).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.length){a.next=2;break}return a.abrupt("return",new e($g(ek),n,i));case 2:return a.next=4,Promise.all(r.map(function(){var e=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",n);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:s=a.sent.filter((function(e){return e})),u=s[0]||$g(ek),c=tk(i,n.config.apiKey,n.name),l=null,f=!0,h=!1,d=void 0,a.prev=9,p=r[Symbol.iterator]();case 11:if(f=(v=p.next()).done){a.next=29;break}return y=v.value,a.prev=13,a.next=16,y._get(c);case 16:if(!(m=a.sent)){a.next=22;break}return k=Xg._fromJSON(n,m),y!==u&&(l=k),u=y,a.abrupt("break",29);case 22:a.next=26;break;case 24:a.prev=24,a.t0=a.catch(13);case 26:f=!0,a.next=11;break;case 29:a.next=35;break;case 31:a.prev=31,a.t1=a.catch(9),h=!0,d=a.t1;case 35:a.prev=35,a.prev=36,f||null==p.return||p.return();case 38:if(a.prev=38,!h){a.next=41;break}throw d;case 41:return a.finish(38);case 42:return a.finish(35);case 43:if(w=s.filter((function(e){return e._shouldAllowMigration})),u._shouldAllowMigration&&w.length){a.next=46;break}return a.abrupt("return",new e(u,n,i));case 46:if(u=w[0],!l){a.next=50;break}return a.next=50,u._set(c,l.toJSON());case 50:return a.next=52,Promise.all(r.map(function(){var e=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===u){e.next=8;break}return e.prev=1,e.next=4,n._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 52:return a.abrupt("return",new e(u,n,i));case 53:case"end":return a.stop()}}),a,null,[[9,31,35,43],[13,24],[36,,38,42]])})))()}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(sk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ik(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ck(t))return"Blackberry";if(lk(t))return"Webos";if(ak(t))return"Safari";if((t.includes("chrome/")||ok(t))&&!t.includes("edge/"))return"Chrome";if(uk(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function ik(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/firefox\//i.test(e)}function ak(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ok(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/crios\//i.test(e)}function sk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/iemobile/i.test(e)}function uk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/android/i.test(e)}function ck(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/blackberry/i.test(e)}function lk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/webos/i.test(e)}function fk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hk(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return fk(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function dk(){return((e=ye()).indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0)&&10===document.documentMode;var e}function pk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return fk(e)||uk(e)||lk(e)||ck(e)||/windows phone/i.test(e)||sk(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vk(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=rk(ye());break;case"Worker":t="".concat(rk(ye()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ot,"/").concat(r)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yk=function(){"use strict";function e(n){t(u)(this,e),this.auth=n,this.queue=[]}return t(c)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(e){r(e)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a,o,s,u,c,l,f,h,d,p,v,y;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.auth.currentUser!==e){t.next=2;break}return t.abrupt("return");case 2:i=[],t.prev=3,a=!0,o=!1,s=void 0,t.prev=5,u=n.queue[Symbol.iterator]();case 7:if(a=(c=u.next()).done){t.next=15;break}return l=c.value,t.next=11,l(e);case 11:l.onAbort&&i.push(l.onAbort);case 12:a=!0,t.next=7;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(5),o=!0,s=t.t0;case 21:t.prev=21,t.prev=22,a||null==u.return||u.return();case 24:if(t.prev=24,!o){t.next=27;break}throw s;case 27:return t.finish(24);case 28:return t.finish(21);case 29:t.next=52;break;case 31:for(t.prev=31,t.t1=t.catch(3),i.reverse(),f=!0,h=!1,d=void 0,t.prev=35,p=i[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){y=v.value;try{y()}catch(e){}}t.next=43;break;case 39:t.prev=39,t.t2=t.catch(35),h=!0,d=t.t2;case 43:t.prev=43,t.prev=44,f||null==p.return||p.return();case 46:if(t.prev=46,!h){t.next=49;break}throw d;case 49:return t.finish(46);case 50:return t.finish(43);case 51:throw n.auth._errorFactory.create("login-blocked",{originalMessage:null===t.t1||void 0===t.t1?void 0:t.t1.message});case 52:case"end":return t.stop()}}),r,null,[[3,31],[5,17,21,29],[22,,24,28],[35,39,43,51],[44,,46,50]])})))()}}]),e}();function mk(e){return gk.apply(this,arguments)}function gk(){return gk=
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n){var r,i=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.abrupt("return",hg(n,"GET","/v2/passwordPolicy",fg(n,r)));case 2:case"end":return e.stop()}}),e)}))),gk.apply(this,arguments)}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kk=function(){"use strict";function e(n){var r,i,a,o;t(u)(this,e);var s=n.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(r=s.minPasswordLength)&&void 0!==r?r:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=n.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(a=null===(i=n.allowedNonAlphanumericCharacters)||void 0===i?void 0:i.join(""))&&void 0!==a?a:"",this.forceUpgradeOnSignin=null!==(o=n.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=n.schemaVersion}return t(c)(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNumericCharacter)||void 0===a||a),s.isValid&&(s.isValid=null===(o=s.containsNonAlphanumericCharacter)||void 0===o||o),s}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),wk=function(){"use strict";function e(n,r,i,a){t(u)(this,e),this.app=n,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _k(this),this.idTokenSubscription=new _k(this),this.beforeStateQueue=new yk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Km,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=n.name,this.clientVersion=a.sdkClientVersion}return t(c)(e,[{key:"_initializeWithPersistence",value:function(e,n){n&&(this._popupRedirectResolver=$g(n));var r=this;return this._initializationPromise=this.queue(t(o)(t(g).mark((function i(){var a,o;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r._deleted){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,nk.create(r,e);case 5:if(r.persistenceManager=t.sent,!r._deleted){t.next=8;break}return t.abrupt("return");case 8:if(!(null===(a=r._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){t.next=16;break}return t.prev=9,t.next=12,r._popupRedirectResolver._initialize(r);case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(9);case 16:return t.next=18,r.initializeCurrentUser(n);case 18:if(r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted){t.next=21;break}return t.abrupt("return");case 21:r._isInitialized=!0;case 22:case"end":return t.stop()}}),i,null,[[9,14]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._deleted){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.assertedPersistence.getCurrentUser();case 4:if(r=t.sent,e.currentUser||r){t.next=7;break}return t.abrupt("return");case 7:if(!e.currentUser||!r||e.currentUser.uid!==r.uid){t.next=12;break}return e._currentUser._assign(r),t.next=11,e.currentUser.getIdToken();case 11:return t.abrupt("return");case 12:return t.next=14,e._updateCurrentUser(r,!0);case 14:case"end":return t.stop()}}),n)})))()}},{key:"initializeCurrentUser",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a,o,s,u,c,l;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,n.assertedPersistence.getCurrentUser();case 3:if(a=t.sent,o=a,s=!1,!e||!n.config.authDomain){t.next=15;break}return t.next=9,n.getOrInitRedirectPersistenceManager();case 9:return u=null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId,c=null==o?void 0:o._redirectEventId,t.next=13,n.tryRedirectSignIn(e);case 13:l=t.sent,u&&u!==c||!(null==l?void 0:l.user)||(o=l.user,s=!0);case 15:if(o){t.next=17;break}return t.abrupt("return",n.directlySetCurrentUser(null));case 17:if(o._redirectEventId){t.next=33;break}if(!s){t.next=28;break}return t.prev=19,t.next=22,n.beforeStateQueue.runMiddleware(o);case 22:t.next=28;break;case 24:t.prev=24,t.t0=t.catch(19),o=a,n._popupRedirectResolver._overrideRedirectResult(n,(function(){return Promise.reject(t.t0)}));case 28:if(!o){t.next=32;break}return t.abrupt("return",n.reloadAndSetCurrentUserOrClear(o));case 32:return t.abrupt("return",n.directlySetCurrentUser(null));case 33:return Zm(n._popupRedirectResolver,n,"argument-error"),t.next=36,n.getOrInitRedirectPersistenceManager();case 36:if(!n.redirectUser||n.redirectUser._redirectEventId!==o._redirectEventId){t.next=38;break}return t.abrupt("return",n.directlySetCurrentUser(o));case 38:return t.abrupt("return",n.reloadAndSetCurrentUserOrClear(o));case 39:case"end":return t.stop()}}),r,null,[[19,24]])})))()}},{key:"tryRedirectSignIn",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=null,t.prev=1,t.next=4,n._popupRedirectResolver._completeRedirectFn(n,e,!0);case 4:i=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),t.next=11,n._setRedirectUser(null);case 11:return t.abrupt("return",i);case 12:case"end":return t.stop()}}),r,null,[[1,7]])})))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(e){var n=this;return t(o)(t(g).mark((function r(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Bg(e);case 3:t.next=9;break;case 5:if(t.prev=5,t.t0=t.catch(0),"auth/network-request-failed"===(null===t.t0||void 0===t.t0?void 0:t.t0.code)){t.next=9;break}return t.abrupt("return",n.directlySetCurrentUser(null));case 9:return t.abrupt("return",n.directlySetCurrentUser(e));case 10:case"end":return t.stop()}}),r,null,[[0,5]])})))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._deleted=!0;case 1:case"end":return t.stop()}}),n)})))()}},{key:"updateCurrentUser",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=e?Le(e):null)&&Zm(i.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),t.abrupt("return",n._updateCurrentUser(i&&i._clone(n)));case 3:case"end":return t.stop()}}),r)})))()}},{key:"_updateCurrentUser",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return t(o)(t(g).mark((function i(){return t(g).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!r._deleted){i.next=2;break}return i.abrupt("return");case 2:if(e&&Zm(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n){i.next=6;break}return i.next=6,r.beforeStateQueue.runMiddleware(e);case 6:return i.abrupt("return",r.queue(t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.directlySetCurrentUser(e);case 2:r.notifyAuthListeners();case 3:case"end":return t.stop()}}),n)})))));case 7:case"end":return i.stop()}}),i)})))()}},{key:"signOut",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.beforeStateQueue.runMiddleware(null);case 2:if(!e.redirectPersistenceManager&&!e._popupRedirectResolver){t.next=5;break}return t.next=5,e._setRedirectUser(null);case 5:return t.abrupt("return",e._updateCurrentUser(null,!0));case 6:case"end":return t.stop()}}),n)})))()}},{key:"setPersistence",value:function(e){var n=this;return this.queue(t(o)(t(g).mark((function r(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.assertedPersistence.setPersistence($g(e));case 2:case"end":return t.stop()}}),r)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n._getPasswordPolicyInternal()){t.next=3;break}return t.next=3,n._updatePasswordPolicy();case 3:if((i=n._getPasswordPolicyInternal()).schemaVersion===n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){t.next=6;break}return t.abrupt("return",Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return t.abrupt("return",i.validatePassword(e));case 7:case"end":return t.stop()}}),r)})))()}},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r,i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mk(e);case 2:r=t.sent,i=new kk(r),null===e.tenantId?e._projectPasswordPolicy=i:e._tenantPasswordPolicies[e.tenantId]=i;case 5:case"end":return t.stop()}}),n)})))()}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new _e("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"revokeAccessToken",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.currentUser){t.next=8;break}return t.next=3,n.currentUser.getIdToken();case 3:return i=t.sent,a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i},null!=n.tenantId&&(a.tenantId=n.tenantId),t.next=8,Gg(n,a);case 8:case"end":return t.stop()}}),r)})))()}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(e,n){var r=this;return t(o)(t(g).mark((function i(){var a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getOrInitRedirectPersistenceManager(n);case 2:return a=t.sent,t.abrupt("return",null===e?a.removeCurrentUser():a.setCurrentUser(e));case 4:case"end":return t.stop()}}),i)})))()}},{key:"getOrInitRedirectPersistenceManager",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.redirectPersistenceManager){t.next=9;break}return Zm(i=e&&$g(e)||n._popupRedirectResolver,n,"argument-error"),t.next=5,nk.create(n,[$g(i._redirectPersistence)],"redirectUser");case 5:return n.redirectPersistenceManager=t.sent,t.next=8,n.redirectPersistenceManager.getCurrentUser();case 8:n.redirectUser=t.sent;case 9:return t.abrupt("return",n.redirectPersistenceManager);case 10:case"end":return t.stop()}}),r)})))()}},{key:"_redirectUserForId",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a;return t(g).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._isInitialized){r.next=4;break}return r.next=4,n.queue(t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 4:if((null===(i=n._currentUser)||void 0===i?void 0:i._redirectEventId)!==e){r.next=6;break}return r.abrupt("return",n._currentUser);case 6:if((null===(a=n.redirectUser)||void 0===a?void 0:a._redirectEventId)!==e){r.next=8;break}return r.abrupt("return",n.redirectUser);case 8:return r.abrupt("return",null);case 9:case"end":return r.stop()}}),r)})))()}},{key:"_persistUserIfCurrent",value:function(e){var n=this;return t(o)(t(g).mark((function r(){return t(g).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e!==n.currentUser){r.next=2;break}return r.abrupt("return",n.queue(t(o)(t(g).mark((function r(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.directlySetCurrentUser(e));case 1:case"end":return t.stop()}}),r)})))));case 2:case"end":return r.stop()}}),r)})))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=!1,s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Zm(s,this,"internal-error"),s.then((function(){o||a(i.currentUser)})),"function"==typeof t){var u=e.addObserver(t,n,r);return function(){o=!0,u()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(e){var n=this;return t(o)(t(g).mark((function r(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,!e){t.next=8;break}return t.next=6,n.assertedPersistence.setCurrentUser(e);case 6:t.next=10;break;case 8:return t.next=10,n.assertedPersistence.removeCurrentUser();case 10:case"end":return t.stop()}}),r)})))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Zm(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vk(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r,i,a,o;return t(g).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t(f)({},"X-Client-Version",e.clientVersion),e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId),n.next=5,null===(r=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===r?void 0:r.getHeartbeatsHeader();case 5:return(a=n.sent)&&(i["X-Firebase-Client"]=a),n.next=9,e._getAppCheckToken();case 9:return(o=n.sent)&&(i["X-Firebase-AppCheck"]=o),n.abrupt("return",i);case 12:case"end":return n.stop()}}),n)})))()}},{key:"_getAppCheckToken",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r,i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,null===(r=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===r?void 0:r.getToken();case 3:return(null==(i=t.sent)?void 0:i.error)&&Wm("Error while retrieving App Check token: ".concat(i.error)),t.abrupt("return",null==i?void 0:i.token);case 6:case"end":return t.stop()}}),n)})))()}}]),e}();function bk(e){return Le(e)}var _k=function(){"use strict";function e(n){var r,i,a=this;t(u)(this,e),this.auth=n,this.observer=null,this.addObserver=(i=new Re((function(e){return a.observer=e}),r)).subscribe.bind(i)}return t(c)(e,[{key:"next",get:function(){return Zm(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(e){return new Promise((function(t,n){var r,i,a=document.createElement("script");a.setAttribute("src",e),a.onload=t,a.onerror=function(e){var t=Xm("internal-error");t.customData=e,n(t)},a.type="text/javascript",a.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(a)}))}function xk(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ik="https://www.google.com/recaptcha/enterprise.js?render=",Tk="NO_RECAPTCHA",Sk=function(){"use strict";function e(n){t(u)(this,e),this.type="recaptcha-enterprise",this.auth=bk(n)}return t(c)(e,[{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return t(o)(t(g).mark((function i(){var a,s,u;return t(g).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=function(e){return s.apply(this,arguments)},s=function(){return s=t(o)(t(g).mark((function e(r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=r.tenantId||null==r._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",r._agentRecaptchaConfig.siteKey);case 3:if(null==r.tenantId||void 0===r._tenantRecaptchaConfigs[r.tenantId]){e.next=5;break}return e.abrupt("return",r._tenantRecaptchaConfigs[r.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=t(o)(t(g).mark((function e(n,i){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xg(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var t=new Eg(e);return null==r.tenantId?r._agentRecaptchaConfig=t:r._tenantRecaptchaConfigs[r.tenantId]=t,n(t.siteKey)}i(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){i(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)},u=function(t,n,r){var i=window.grecaptcha;_g(i)?i.enterprise.ready((function(){i.enterprise.execute(t,{action:e}).then((function(e){n(e)})).catch((function(){n(Tk)}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i.abrupt("return",new Promise((function(e,t){a(r.auth).then((function(r){if(!n&&_g(window.grecaptcha))u(r,e,t);else{if("undefined"==typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Ek(Ik+r).then((function(){u(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 7:case"end":return i.stop()}}),i)})))()}}]),e}();function Ak(e,t,n){return Ck.apply(this,arguments)}function Ck(){return Ck=t(o)(t(g).mark((function e(n,r,i){var a,o,s,u,c=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],o=new Sk(n),e.prev=3,e.next=6,o.verify(i);case 6:s=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),e.next=13,o.verify(i,!0);case 13:s=e.sent;case 14:return u=Object.assign({},r),a?Object.assign(u,{captchaResp:s}):Object.assign(u,{captchaResponse:s}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 19:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ck.apply(this,arguments)}function Ok(e,t,n,r){return Rk.apply(this,arguments)}function Rk(){return Rk=t(o)(t(g).mark((function e(n,r,i,a){var s,u;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(s=n._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))){e.next=8;break}return e.next=4,Ak(n,r,i,"getOobCode"===i);case 4:return u=e.sent,e.abrupt("return",a(n,u));case 8:return e.abrupt("return",a(n,r).catch(function(){var e=t(o)(t(g).mark((function e(o){var s;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("auth/missing-recaptcha-token"!==o.code){e.next=8;break}return console.log("".concat(i," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.")),e.next=4,Ak(n,r,i,"getOobCode"===i);case 4:return s=e.sent,e.abrupt("return",a(n,s));case 8:return e.abrupt("return",Promise.reject(o));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Rk.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Nk(e,t){var n=Tt(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Te(n.getOptions(),null!=t?t:{}))return r;Jm(r,"already-initialized")}return n.initialize({options:t})}function Dk(e,n,r){var i=bk(e);Zm(i._canInitEmulator,i,"emulator-config-failed"),Zm(/^https?:\/\//.test(n),i,"invalid-emulator-scheme");var a=!!(null==r?void 0:r.disableWarnings),o=Pk(n),s=function(e){var n=Pk(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(n.length));if(!r)return{host:"",port:null};var i=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){var o=a[1];return{host:o,port:Lk(i.substr(o.length+1))}}var s=t(w)(i.split(":"),2);return{host:s[0],port:Lk(s[1])}}(n),u=s.host,c=s.port,l=null===c?"":":".concat(c);i.config.emulator={url:"".concat(o,"//").concat(u).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Pk(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Lk(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Mk=function(){"use strict";function e(n,r){t(u)(this,e),this.providerId=n,this.signInMethod=r}return t(c)(e,[{key:"toJSON",value:function(){return eg("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return eg("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return eg("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return eg("not implemented")}}]),e}();function Uk(e,t){return Fk.apply(this,arguments)}function Fk(){return(Fk=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hg(n,"POST","/v1/accounts:signUp",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bk(e,t){return Vk.apply(this,arguments)}function Vk(){return(Vk=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yg(n,"POST","/v1/accounts:signInWithPassword",fg(n,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jk(e,t){return qk.apply(this,arguments)}function qk(){return(qk=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yg(n,"POST","/v1/accounts:signInWithEmailLink",fg(n,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zk(e,t){return Hk.apply(this,arguments)}function Hk(){return(Hk=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yg(n,"POST","/v1/accounts:signInWithEmailLink",fg(n,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kk=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return t(u)(this,r),(o=n.call(this,"password",a))._email=e,o._password=i,o._tenantId=s,o}return t(c)(r,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.signInMethod,t.next="password"===t.t0?3:"emailLink"===t.t0?5:6;break;case 3:return i={returnSecureToken:!0,email:n._email,password:n._password,clientType:"CLIENT_TYPE_WEB"},t.abrupt("return",Ok(e,i,"signInWithPassword",Bk));case 5:return t.abrupt("return",jk(e,{email:n._email,oobCode:n._password}));case 6:Jm(e,"internal-error");case 7:case"end":return t.stop()}}),r)})))()}},{key:"_linkToIdToken",value:function(e,n){var r=this;return t(o)(t(g).mark((function i(){var a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r.signInMethod,t.next="password"===t.t0?3:"emailLink"===t.t0?5:6;break;case 3:return a={idToken:n,returnSecureToken:!0,email:r._email,password:r._password,clientType:"CLIENT_TYPE_WEB"},t.abrupt("return",Ok(e,a,"signUpPassword",Uk));case 5:return t.abrupt("return",zk(e,{idToken:n,email:r._email,oobCode:r._password}));case 6:Jm(e,"internal-error");case 7:case"end":return t.stop()}}),i)})))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new r(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new r(e,t,"emailLink",n)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),r}(Mk);function Gk(e,t){return Wk.apply(this,arguments)}function Wk(){return(Wk=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yg(n,"POST","/v1/accounts:signInWithIdp",fg(n,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qk=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){var e;return t(u)(this,r),(e=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).pendingToken=null,e}return t(c)(r,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Gk(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Gk(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Gk(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ae(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new r(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jm("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,n=t.providerId,i=t.signInMethod,a=qm(t,["providerId","signInMethod"]);if(!n||!i)return null;var o=new r(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),r}(Mk);function Jk(e,t){return Xk.apply(this,arguments)}function Xk(){return(Xk=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hg(n,"POST","/v1/accounts:sendVerificationCode",fg(n,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yk(){return(Yk=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yg(n,"POST","/v1/accounts:signInWithPhoneNumber",fg(n,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $k(){return($k=t(o)(t(g).mark((function e(n,r){var i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yg(n,"POST","/v1/accounts:signInWithPhoneNumber",fg(n,r));case 2:if(!(i=e.sent).temporaryProof){e.next=5;break}throw bg(n,"account-exists-with-different-credential",i);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zk=t(f)({},"USER_NOT_FOUND","user-not-found");function ew(){return(ew=t(o)(t(g).mark((function e(n,r){var i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object.assign(Object.assign({},r),{operation:"REAUTH"}),e.abrupt("return",yg(n,"POST","/v1/accounts:signInWithPhoneNumber",fg(n,i),Zk));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tw=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e){var i;return t(u)(this,r),(i=n.call(this,"phone","phone")).params=e,i}return t(c)(r,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Yk.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return $k.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ew.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new r({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new r({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e.verificationId,n=e.verificationCode,i=e.phoneNumber,a=e.temporaryProof;return n||t||i||a?new r({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:a}):null}}]),r}(Mk);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nw=function(){"use strict";function e(n){var r,i,a,o,s,c;t(u)(this,e);var l=Ce(Oe(n)),f=null!==(r=l.apiKey)&&void 0!==r?r:null,h=null!==(i=l.oobCode)&&void 0!==i?i:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=l.mode)&&void 0!==a?a:null);Zm(f&&h&&d,"argument-error"),this.apiKey=f,this.operation=d,this.code=h,this.continueUrl=null!==(o=l.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=l.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(c=l.tenantId)&&void 0!==c?c:null}return t(c)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ce(Oe(e)).link,n=t?Ce(Oe(t)).deep_link_id:null,r=Ce(Oe(e)).deep_link_id;return(r?Ce(Oe(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(e){return null}}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rw=function(){"use strict";function e(){t(u)(this,e),this.providerId=e.PROVIDER_ID}return t(c)(e,null,[{key:"credential",value:function(e,t){return Kk._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=nw.parseLink(t);return Zm(n,"argument-error"),Kk._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();rw.PROVIDER_ID="password",rw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",rw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var iw=function(){"use strict";function e(n){t(u)(this,e),this.providerId=n,this.defaultLanguageCode=null,this.customParameters={}}return t(c)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),aw=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){var e;return t(u)(this,r),(e=n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))).scopes=[],e}return t(c)(r,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return t(h)(this.scopes)}}]),r}(iw),ow=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.call(this,"facebook.com")}return t(c)(r,null,[{key:"credential",value:function(e){return Qk._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(e){return null}}}]),r}(aw);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ow.FACEBOOK_SIGN_IN_METHOD="facebook.com",ow.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sw=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){var e;return t(u)(this,r),(e=n.call(this,"google.com")).addScope("profile"),e}return t(c)(r,null,[{key:"credential",value:function(e,t){return Qk._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthIdToken,i=t.oauthAccessToken;if(!n&&!i)return null;try{return r.credential(n,i)}catch(e){return null}}}]),r}(aw);sw.GOOGLE_SIGN_IN_METHOD="google.com",sw.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var uw=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.call(this,"github.com")}return t(c)(r,null,[{key:"credential",value:function(e){return Qk._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return r.credential(t.oauthAccessToken)}catch(e){return null}}}]),r}(aw);uw.GITHUB_SIGN_IN_METHOD="github.com",uw.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cw=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.call(this,"twitter.com")}return t(c)(r,null,[{key:"credential",value:function(e,t){return Qk._fromParams({providerId:r.PROVIDER_ID,signInMethod:r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return r.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return r.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.oauthAccessToken,i=t.oauthTokenSecret;if(!n||!i)return null;try{return r.credential(n,i)}catch(e){return null}}}]),r}(aw);function lw(e,t){return fw.apply(this,arguments)}function fw(){return(fw=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yg(n,"POST","/v1/accounts:signUp",fg(n,r)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cw.TWITTER_SIGN_IN_METHOD="twitter.com",cw.PROVIDER_ID="twitter.com";var hw=function(){"use strict";function e(n){t(u)(this,e),this.user=n.user,this.providerId=n.providerId,this._tokenResponse=n._tokenResponse,this.operationType=n.operationType}return t(c)(e,null,[{key:"_fromIdTokenResponse",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t(o)(t(g).mark((function o(){var s,u,c;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xg._fromIdTokenResponse(n,i,a);case 2:return s=t.sent,u=dw(i),c=new e({user:s,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 6:case"end":return t.stop()}}),o)})))()}},{key:"_forOperation",value:function(n,r,i){return t(o)(t(g).mark((function a(){var o;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=dw(i),t.abrupt("return",new e({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),a)})))()}}]),e}();function dw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pw=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a,o){var s,c;return t(u)(this,r),(s=n.call(this,i.code,i.message)).operationType=a,s.user=o,Object.setPrototypeOf(t(T)(s),r.prototype),s.customData={appName:e.name,tenantId:null!==(c=e.tenantId)&&void 0!==c?c:void 0,_serverResponse:i.customData._serverResponse,operationType:a},s}return t(c)(r,null,[{key:"_fromErrorAndOperation",value:function(e,t,n,i){return new r(e,t,n,i)}}]),r}(be);function vw(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if("auth/multi-factor-auth-required"===n.code)throw pw._fromErrorAndOperation(e,n,t,r);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(e,t){return mw.apply(this,arguments)}function mw(){return mw=t(o)(t(g).mark((function e(n,r){var i,a,o=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>2&&void 0!==o[2]&&o[2],e.t0=Pg,e.t1=n,e.t2=r,e.t3=n.auth,e.next=7,n.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=i,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",hw._forOperation(n,"link",a));case 14:case"end":return e.stop()}}),e)}))),mw.apply(this,arguments)}function gw(e,t){return kw.apply(this,arguments)}function kw(){return kw=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){var i,a,o,s,u,c,l=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]&&l[2],a=n.auth,o="reauthenticate",e.prev=3,e.next=6,Pg(n,vw(a,o,r,n),i);case 6:return Zm((s=e.sent).idToken,a,"internal-error"),Zm(u=Dg(s.idToken),a,"internal-error"),c=u.sub,Zm(n.uid===c,a,"user-mismatch"),e.abrupt("return",hw._forOperation(n,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),"auth/user-not-found"===(null===e.t0||void 0===e.t0?void 0:e.t0.code)&&Jm(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),kw.apply(this,arguments)}function ww(e,t){return bw.apply(this,arguments)}function bw(){return bw=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n,r){var i,a,o,s,u=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],a="signIn",e.next=4,vw(n,a,r);case 4:return o=e.sent,e.next=7,hw._fromIdTokenResponse(n,a,o);case 7:if(s=e.sent,i){e.next=11;break}return e.next=11,n._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function _w(e,t){return Ew.apply(this,arguments)}function Ew(){return(Ew=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ww(bk(n),r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xw(e){return Iw.apply(this,arguments)}function Iw(){return(Iw=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=bk(n))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,r._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tw(e,t,n){return Sw.apply(this,arguments)}function Sw(){return(Sw=t(o)(t(g).mark((function e(n,r,i){var a,o,s,u;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=bk(n),o=Ok(a,{returnSecureToken:!0,email:r,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lw),e.next=5,o.catch((function(e){throw"auth/password-does-not-meet-requirements"===e.code&&xw(n),e}));case 5:return s=e.sent,e.next=8,hw._fromIdTokenResponse(a,"signIn",s);case 8:return u=e.sent,e.next=11,a._updateCurrentUser(u.user);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aw(e,n,r){return _w(Le(e),rw.credential(n,r)).catch((i=t(o)(t(g).mark((function n(r){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw"auth/password-does-not-meet-requirements"===r.code&&xw(e),r;case 2:case"end":return t.stop()}}),n)}))),function(e){return i.apply(this,arguments)}));var i}function Cw(e,t,n,r){return Le(e).onIdTokenChanged(t,n,r)}function Ow(e,t,n){return Le(e).beforeAuthStateChanged(t,n)}function Rw(e){return Le(e).signOut()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Nw(e,t){return hg(e,"POST","/v2/accounts/mfaEnrollment:start",fg(e,t))}function Dw(e,t){return hg(e,"POST","/v2/accounts/mfaEnrollment:finalize",fg(e,t))}new WeakMap;var Pw="__sak",Lw=function(){"use strict";function e(n,r){t(u)(this,e),this.storageRetriever=n,this.type=r}return t(c)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Pw,"1"),this.storage.removeItem(Pw),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mw=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){var e,i;return t(u)(this,r),(e=n.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=(ak(i=ye())||fk(i))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=pk(),e._shouldAllowMigration=!0,e}return t(c)(r,[{key:"forAllChangedKeys",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Object.keys(this.listeners)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=this.storage.getItem(o),u=this.localCache[o];s!==u&&e(o,u,s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"onStorageEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;if(e.key){var r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}var a=function(){var e=n.storage.getItem(r);(t||n.localCache[r]!==e)&&n.notifyListeners(r,e)},o=this.storage.getItem(r);dk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else{var s=this;this.forAllChangedKeys((function(e,t,n){s.notifyListeners(e,n)}))}}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e],r=!0,i=!1,a=void 0;if(n)try{for(var o,s=Array.from(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(0,o.value)(t?JSON.parse(t):t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){var t=e;e.forAllChangedKeys((function(e,n,r){t.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(e,n){var i=this,a=this;return t(o)(t(g).mark((function o(){return t(g).wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t(Ei)(t(Si)(r.prototype),"_set",i).call(a,e,n);case 2:a.localCache[e]=JSON.stringify(n);case 3:case"end":return o.stop()}}),o)})))()}},{key:"_get",value:function(e){var n=this,i=this;return t(o)(t(g).mark((function a(){var o;return t(g).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(Ei)(t(Si)(r.prototype),"_get",n).call(i,e);case 2:return o=a.sent,i.localCache[e]=JSON.stringify(o),a.abrupt("return",o);case 5:case"end":return a.stop()}}),a)})))()}},{key:"_remove",value:function(e){var n=this,i=this;return t(o)(t(g).mark((function a(){return t(g).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(Ei)(t(Si)(r.prototype),"_remove",n).call(i,e);case 2:delete i.localCache[e];case 3:case"end":return a.stop()}}),a)})))()}}]),r}(Lw);Mw.type="LOCAL";var Uw=Mw,Fw=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(){return t(u)(this,r),n.call(this,(function(){return window.sessionStorage}),"SESSION")}return t(c)(r,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),r}(Lw);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fw.type="SESSION";var Bw=Fw;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(e){return Promise.all(e.map((n=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n;case 3:return r=e.sent,e.abrupt("return",{fulfilled:!0,value:r});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e){return n.apply(this,arguments)})));var n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jw=function(){"use strict";function e(n){t(u)(this,e),this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return t(c)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a,s,u,c,l,f,h;return t(g).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(i=e).data,s=a.eventId,u=a.eventType,c=a.data,null==(l=n.handlersMap[u])?void 0:l.size){r.next=5;break}return r.abrupt("return");case 5:return i.ports[0].postMessage({status:"ack",eventId:s,eventType:u}),f=Array.from(l).map(function(){var e=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(i.origin,c));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.next=9,Vw(f);case 9:h=r.sent,i.ports[0].postMessage({status:"done",eventId:s,eventType:u,response:h});case 11:case"end":return r.stop()}}),r)})))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function qw(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jw.receivers=[];var zw=function(){"use strict";function e(n){t(u)(this,e),this.target=n,this.handlers=new Set}return t(c)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=this;return t(o)(t(g).mark((function a(){var o,s,u;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="undefined"!=typeof MessageChannel?new MessageChannel:null){t.next=3;break}throw new Error("connection_unavailable");case 3:return t.abrupt("return",new Promise((function(t,a){var c=qw("",20);o.port1.start();var l=setTimeout((function(){a(new Error("unsupported_event"))}),r);u={messageChannel:o,onMessage:function(e){var n=e;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),s=setTimeout((function(){a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),t(n.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},i.handlers.add(u),o.port1.addEventListener("message",u.onMessage),i.target.postMessage({eventType:e,eventId:c,data:n},[o.port2])})).finally((function(){u&&i.removeMessageHandler(u)})));case 6:case"end":return t.stop()}}),a)})))()}}]),e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(){return window}function Kw(e){Hw().location.href=e}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(){return void 0!==Hw().WorkerGlobalScope&&"function"==typeof Hw().importScripts}function Ww(){return Qw.apply(this,arguments)}function Qw(){return(Qw=t(o)(t(g).mark((function e(){var n;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return n=e.sent,e.abrupt("return",n.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Jw="firebaseLocalStorageDb",Xw="firebaseLocalStorage",Yw="fbase_key",$w=function(){"use strict";function e(n){t(u)(this,e),this.request=n}return t(c)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){var r=e;e.request.addEventListener("success",(function(){t(r.request.result)})),e.request.addEventListener("error",(function(){n(r.request.error)}))}))}}]),e}();function Zw(e,t){return e.transaction([Xw],t?"readwrite":"readonly").objectStore(Xw)}function eb(){var e=indexedDB.deleteDatabase(Jw);return new $w(e).toPromise()}function tb(){var e=indexedDB.open(Jw,1);return new Promise((function(n,r){e.addEventListener("error",(function(){r(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Xw,{keyPath:Yw})}catch(e){r(e)}})),e.addEventListener("success",t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=e.result).objectStoreNames.contains(Xw)){t.next=12;break}return i.close(),t.next=5,eb();case 5:return t.t0=n,t.next=8,tb();case 8:t.t1=t.sent,(0,t.t0)(t.t1),t.next=13;break;case 12:n(i);case 13:case"end":return t.stop()}}),r)}))))}))}function nb(e,t,n){return rb.apply(this,arguments)}function rb(){return(rb=t(o)(t(g).mark((function e(n,r,i){var a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Zw(n,!0).put((a={},t(f)(a,Yw,r),t(f)(a,"value",i),a)),e.abrupt("return",new $w(o).toPromise());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ib(e,t){return ab.apply(this,arguments)}function ab(){return(ab=t(o)(t(g).mark((function e(n,r){var i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Zw(n,!1).get(r),e.next=3,new $w(i).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ob(e,t){var n=Zw(e,!0).delete(t);return new $w(n).toPromise()}var sb=function(){"use strict";function e(){t(u)(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return t(c)(e,[{key:"_openDb",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.db){t.next=2;break}return t.abrupt("return",e.db);case 2:return t.next=4,tb();case 4:return e.db=t.sent,t.abrupt("return",e.db);case 6:case"end":return t.stop()}}),n)})))()}},{key:"_withRetries",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:return t.prev=2,t.next=5,n._openDb();case 5:return a=t.sent,t.next=8,e(a);case 8:return t.abrupt("return",t.sent);case 11:if(t.prev=11,t.t0=t.catch(2),!(i++>3)){t.next=15;break}throw t.t0;case 15:n.db&&(n.db.close(),n.db=void 0);case 16:t.next=1;break;case 18:case"end":return t.stop()}}),r,null,[[2,11]])})))()}},{key:"initializeServiceWorkerMessaging",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Gw()?e.initializeReceiver():e.initializeSender());case 1:case"end":return t.stop()}}),n)})))()}},{key:"initializeReceiver",value:function(){var e=this;return t(o)(t(g).mark((function n(){return t(g).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.receiver=jw._getInstance(Gw()?self:null),e.receiver._subscribe("keyChanged",function(){var n=t(o)(t(g).mark((function n(r,i){var a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._poll();case 2:return a=t.sent,t.abrupt("return",{keyProcessed:a.includes(i.key)});case 4:case"end":return t.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()}},{key:"initializeSender",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r,i,a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Ww();case 3:if(e.activeServiceWorker=t.sent,e.activeServiceWorker){t.next=6;break}return t.abrupt("return");case 6:return e.sender=new zw(e.activeServiceWorker),t.next=9,e.sender._send("ping",{},800);case 9:if(a=t.sent){t.next=12;break}return t.abrupt("return");case 12:(null===(r=a[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=a[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0);case 13:case"end":return t.stop()}}),n)})))()}},{key:"notifyServiceWorker",value:function(e){var n=this;return t(o)(t(g).mark((function r(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.sender&&n.activeServiceWorker&&(r=void 0,((null===(r=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null)===n.activeServiceWorker)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,n.sender._send("keyChanged",{key:e},n.serviceWorkerReceiverAvailable?800:50);case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}var r}),r,null,[[2,7]])})))()}},{key:"_isAvailable",value:function(){return t(o)(t(g).mark((function e(){var n;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,tb();case 5:return n=e.sent,e.next=8,nb(n,Pw,"1");case 8:return e.next=10,ob(n,Pw);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()}},{key:"_withPendingWrite",value:function(e){var n=this;return t(o)(t(g).mark((function r(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.pendingWrites++,t.prev=1,t.next=4,e();case 4:return t.prev=4,n.pendingWrites--,t.finish(4);case 7:case"end":return t.stop()}}),r,null,[[1,,4,7]])})))()}},{key:"_set",value:function(e,n){var r=this;return t(o)(t(g).mark((function i(){return t(g).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r._withPendingWrite(t(o)(t(g).mark((function i(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r._withRetries((function(t){return nb(t,e,n)}));case 2:return r.localCache[e]=n,t.abrupt("return",r.notifyServiceWorker(e));case 4:case"end":return t.stop()}}),i)})))));case 1:case"end":return i.stop()}}),i)})))()}},{key:"_get",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._withRetries((function(t){return ib(t,e)}));case 2:return i=t.sent,n.localCache[e]=i,t.abrupt("return",i);case 5:case"end":return t.stop()}}),r)})))()}},{key:"_remove",value:function(e){var n=this;return t(o)(t(g).mark((function r(){return t(g).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite(t(o)(t(g).mark((function r(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._withRetries((function(t){return ob(t,e)}));case 2:return delete n.localCache[e],t.abrupt("return",n.notifyServiceWorker(e));case 4:case"end":return t.stop()}}),r)})))));case 1:case"end":return r.stop()}}),r)})))()}},{key:"_poll",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r,i,a,o,s,u,c,l,f,h,d,p,v,y,m,k,w;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._withRetries((function(e){var t=Zw(e,!1).getAll();return new $w(t).toPromise()}));case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:if(0===e.pendingWrites){t.next=7;break}return t.abrupt("return",[]);case 7:for(i=[],a=new Set,o=!0,s=!1,u=void 0,t.prev=10,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)f=l.value,h=f.fbase_key,d=f.value,a.add(h),JSON.stringify(e.localCache[h])!==JSON.stringify(d)&&(e.notifyListeners(h,d),i.push(h));t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),s=!0,u=t.t0;case 18:t.prev=18,t.prev=19,o||null==c.return||c.return();case 21:if(t.prev=21,!s){t.next=24;break}throw u;case 24:return t.finish(21);case 25:return t.finish(18);case 26:for(p=!0,v=!1,y=void 0,t.prev=27,m=Object.keys(e.localCache)[Symbol.iterator]();!(p=(k=m.next()).done);p=!0)w=k.value,e.localCache[w]&&!a.has(w)&&(e.notifyListeners(w,null),i.push(w));t.next=35;break;case 31:t.prev=31,t.t1=t.catch(27),v=!0,y=t.t1;case 35:t.prev=35,t.prev=36,p||null==m.return||m.return();case 38:if(t.prev=38,!v){t.next=41;break}throw y;case 41:return t.finish(38);case 42:return t.finish(35);case 43:return t.abrupt("return",i);case 44:case"end":return t.stop()}}),n,null,[[10,14,18,26],[19,,21,25],[27,31,35,43],[36,,38,42]])})))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e],r=!0,i=!1,a=void 0;if(n)try{for(var o,s=Array.from(n)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){(0,o.value)(t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"startPolling",value:function(){this.stopPolling();var e=this;this.pollTimer=setInterval(t(o)(t(g).mark((function n(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),n)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();sb.type="LOCAL";var ub=sb;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(e,t){return hg(e,"POST","/v2/accounts/mfaSignIn:start",fg(e,t))}function lb(e,t){return hg(e,"POST","/v2/accounts/mfaSignIn:finalize",fg(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
xk("rcb"),new ag(3e4,6e4);var fb="recaptcha";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(e,t,n){return db.apply(this,arguments)}function db(){return(db=t(o)(t(g).mark((function e(n,r,i){var a,o,s,u,c,l,f,h;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,i.verify();case 3:if(o=e.sent,e.prev=4,Zm("string"==typeof o,n,"argument-error"),Zm(i.type===fb,n,"argument-error"),!("session"in(s="string"==typeof r?{phoneNumber:r}:r))){e.next=28;break}if(u=s.session,!("phoneNumber"in s)){e.next=19;break}return Zm("enroll"===u.type,n,"internal-error"),e.next=15,Nw(n,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:o}});case 15:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 19:return Zm("signin"===u.type,n,"internal-error"),Zm(l=(null===(a=s.multiFactorHint)||void 0===a?void 0:a.uid)||s.multiFactorUid,n,"missing-multi-factor-info"),e.next=24,cb(n,{mfaPendingCredential:u.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:o}});case 24:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 26:e.next=32;break;case 28:return e.next=30,Jk(n,{phoneNumber:s.phoneNumber,recaptchaToken:o});case 30:return h=e.sent.sessionInfo,e.abrupt("return",h);case 32:return e.prev=32,i._reset(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[4,,32,35]])})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pb=function(){"use strict";function e(n){t(u)(this,e),this.providerId=e.PROVIDER_ID,this.auth=bk(n)}return t(c)(e,[{key:"verifyPhoneNumber",value:function(e,t){return hb(this.auth,e,Le(t))}}],[{key:"credential",value:function(e,t){return tw._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?tw._fromTokenResponse(n,r):null}}]),e}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vb(e,t){return t?$g(t):(Zm(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pb.PROVIDER_ID="phone",pb.PHONE_SIGN_IN_METHOD="phone";var yb=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e){var i;return t(u)(this,r),(i=n.call(this,"custom","custom")).params=e,i}return t(c)(r,[{key:"_getIdTokenResponse",value:function(e){return Gk(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Gk(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Gk(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),r}(Mk);function mb(e){return ww(e.auth,new yb(e),e.bypassAuthState)}function gb(e){var t=e.auth,n=e.user;return Zm(n,t,"internal-error"),gw(n,new yb(e),e.bypassAuthState)}function kb(e){return wb.apply(this,arguments)}function wb(){return(wb=t(o)(t(g).mark((function e(n){var r,i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.auth,Zm(i=n.user,r,"internal-error"),e.abrupt("return",yw(i,new yb(n),n.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bb=function(){"use strict";function e(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t(u)(this,e),this.auth=n,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}return t(c)(e,[{key:"execute",value:function(){var e,n=this;return new Promise((e=t(o)(t(g).mark((function e(r,i){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.pendingPromise={resolve:r,reject:i},e.prev=1,e.next=4,n.resolver._initialize(n.auth);case 4:return n.eventManager=e.sent,e.next=7,n.onExecution();case 7:n.eventManager.registerConsumer(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n.reject(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),function(t,n){return e.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a,o,s,u,c,l;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.urlResponse,a=e.sessionId,o=e.postBody,s=e.tenantId,u=e.error,c=e.type,!u){t.next=4;break}return n.reject(u),t.abrupt("return");case 4:return l={auth:n.auth,requestUri:i,sessionId:a,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState},t.prev=5,t.t0=n,t.next=9,n.getIdpTask(c)(l);case 9:t.t1=t.sent,t.t0.resolve.call(t.t0,t.t1),t.next=16;break;case 13:t.prev=13,t.t2=t.catch(5),n.reject(t.t2);case 16:case"end":return t.stop()}}),r,null,[[5,13]])})))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mb;case"linkViaPopup":case"linkViaRedirect":return kb;case"reauthViaPopup":case"reauthViaRedirect":return gb;default:Jm(this.auth,"internal-error")}}},{key:"resolve",value:function(e){tg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){tg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),_b=new ag(2e3,1e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eb=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a,o,s){var c;return t(u)(this,r),(c=n.call(this,e,i,o,s)).provider=a,c.authWindow=null,c.pollId=null,r.currentPopupAction&&r.currentPopupAction.cancel(),r.currentPopupAction=t(T)(c),c}return t(c)(r,[{key:"executeNotNull",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.execute();case 2:return Zm(r=t.sent,e.auth,"internal-error"),t.abrupt("return",r);case 5:case"end":return t.stop()}}),n)})))()}},{key:"onExecution",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return tg(1===e.filter.length,"Popup operations only handle one event"),r=qw(),t.next=4,e.resolver._openPopup(e.auth,e.provider,e.filter[0],r);case 4:e.authWindow=t.sent,e.authWindow.associatedEvent=r,e.resolver._originValidation(e.auth).catch((function(t){e.reject(t)})),e.resolver._isIframeWebStorageSupported(e.auth,(function(t){t||e.reject(Xm(e.auth,"web-storage-unsupported"))})),e.pollUserCancellation();case 9:case"end":return t.stop()}}),n)})))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Xm(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,r.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this,t=function(){var n,r;if(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed){var i=e;e.pollId=window.setTimeout((function(){i.pollId=null,i.reject(Xm(i.auth,"popup-closed-by-user"))}),8e3)}else e.pollId=window.setTimeout(t,_b.get())};t()}}]),r}(bb);Eb.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xb=new Map,Ib=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t(u)(this,r),(a=n.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,o)).eventId=null,a}return t(c)(r,[{key:"execute",value:function(){var e=this,n=this;return t(o)(t(g).mark((function i(){var a,o;return t(g).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=xb.get(n.auth._key())){i.next=21;break}return i.prev=2,i.next=5,Tb(n.resolver,n.auth);case 5:if(!i.sent){i.next=12;break}return i.next=9,t(Ei)(t(Si)(r.prototype),"execute",e).call(n);case 9:i.t0=i.sent,i.next=13;break;case 12:i.t0=null;case 13:o=i.t0,a=function(){return Promise.resolve(o)},i.next=20;break;case 17:i.prev=17,i.t1=i.catch(2),a=function(){return Promise.reject(i.t1)};case 20:xb.set(n.auth._key(),a);case 21:return n.bypassAuthState||xb.set(n.auth._key(),(function(){return Promise.resolve(null)})),i.abrupt("return",a());case 23:case"end":return i.stop()}}),i,null,[[2,17]])})))()}},{key:"onAuthEvent",value:function(e){var n=this,i=this,a=function(){return t(Ei)(t(Si)(r.prototype),"onAuthEvent",n)};return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("signInViaRedirect"!==e.type){t.next=4;break}return t.abrupt("return",a().call(i,e));case 4:if("unknown"!==e.type){t.next=7;break}return i.resolve(null),t.abrupt("return");case 7:if(!e.eventId){t.next=17;break}return t.next=10,i.auth._redirectUserForId(e.eventId);case 10:if(!(r=t.sent)){t.next=16;break}return i.user=r,t.abrupt("return",a().call(i,e));case 16:i.resolve(null);case 17:case"end":return t.stop()}}),n)})))()}},{key:"onExecution",value:function(){return t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},{key:"cleanUp",value:function(){}}]),r}(bb);function Tb(e,t){return Sb.apply(this,arguments)}function Sb(){return(Sb=t(o)(t(g).mark((function e(n,r){var i,a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ob(r),a=Cb(n),e.next=4,a._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,a._get(i);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,a._remove(i);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ab(e,t){xb.set(e._key(),t)}function Cb(e){return $g(e._redirectPersistence)}function Ob(e){return tk("pendingRedirect",e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=t(o)(t(g).mark((function e(n,r){var i,a,o,s,u,c=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]&&c[2],a=bk(n),o=vb(a,r),s=new Ib(a,o,i),e.next=6,s.execute();case 6:if(!(u=e.sent)||i){e.next=13;break}return delete u.user._redirectEventId,e.next=11,a._persistUserIfCurrent(u.user);case 11:return e.next=13,a._setRedirectUser(null,r);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Db=function(){"use strict";function e(n){t(u)(this,e),this.auth=n,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return t(c)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lb(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Lb(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xm(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pb(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Pb(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Pb(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Lb(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function Mb(e){return Ub.apply(this,arguments)}function Ub(){return Ub=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t(o)(t(g).mark((function e(n){var r,i=arguments;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.abrupt("return",hg(n,"GET","/v1/projects",r));case 2:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bb=/^https?/;function Vb(){return(Vb=t(o)(t(g).mark((function e(n){var r,i,a,o,s,u,c;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Mb(n);case 4:r=e.sent.authorizedDomains,i=!0,a=!1,o=void 0,e.prev=6,s=r[Symbol.iterator]();case 8:if(i=(u=s.next()).done){e.next=20;break}if(c=u.value,e.prev=10,!jb(c)){e.next=13;break}return e.abrupt("return");case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(10);case 17:i=!0,e.next=8;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(6),a=!0,o=e.t1;case 26:e.prev=26,e.prev=27,i||null==s.return||s.return();case 29:if(e.prev=29,!a){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:Jm(n,"unauthorized-domain");case 35:case"end":return e.stop()}}),e,null,[[6,22,26,34],[10,15],[27,,29,33]])})))).apply(this,arguments)}function jb(e){var t=ng(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Bb.test(r))return!1;if(Fb.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qb=new ag(3e4,6e4);function zb(){var e=Hw().___jsl,n=!0,r=!1,i=void 0;if(null==e?void 0:e.H)try{for(var a,o=Object.keys(e.H)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(e.H[s].r=e.H[s].r||[],e.H[s].L=e.H[s].L||[],e.H[s].r=t(h)(e.H[s].L),e.CP)for(var u=0;u<e.CP.length;u++)e.CP[u]=null}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}var Hb=null;function Kb(e){return Hb=Hb||function(e){return new Promise((function(t,n){var r,i,a;function o(){zb(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){zb(),n(Xm(e,"network-request-failed"))},timeout:qb.get()})}if(null===(i=null===(r=Hw().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Hw().gapi)||void 0===a?void 0:a.load)){var s=xk("iframefcb");return Hw()[s]=function(){gapi.load?o():n(Xm(e,"network-request-failed"))},Ek("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Hb=null,e}))}(e),Hb}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gb=new ag(5e3,15e3),Wb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jb(e){var t=e.config;Zm(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?og(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ot},i=Qb.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ae(r).slice(1))}function Xb(e){return Yb.apply(this,arguments)}function Yb(){return Yb=t(o)(t(g).mark((function e(n){var r,i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kb(n);case 2:return r=e.sent,Zm(i=Hw().gapi,n,"internal-error"),e.abrupt("return",r.open({where:document.body,url:Jb(n),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wb,dontclear:!0},(function(e){return new Promise((r=t(o)(t(g).mark((function r(i,a){var o,s,u;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=function(){Hw().clearTimeout(s),i(e)},t.next=3,e.restyle({setHideOnLeave:!1});case 3:o=Xm(n,"network-request-failed"),s=Hw().setTimeout((function(){a(o)}),Gb.get()),e.ping(u).then(u,(function(){a(o)}));case 7:case"end":return t.stop()}}),r)}))),function(e,t){return r.apply(this,arguments)}));var r})));case 6:case"end":return e.stop()}}),e)}))),Yb.apply(this,arguments)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $b={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zb="_blank",e_="http://localhost",t_=function(){"use strict";function e(n){t(u)(this,e),this.window=n,this.associatedEvent=null}return t(c)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function n_(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),u="",c=Object.assign(Object.assign({},$b),{width:i.toString(),height:a.toString(),top:o,left:s}),l=ye().toLowerCase();r&&(u=ok(l)?Zb:r),ik(l)&&(n=n||e_,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,n){var r=t(w)(n,2),i=r[0],a=r[1];return"".concat(e).concat(i,"=").concat(a,",")}),"");if(hk(l)&&"_self"!==u)return r_(n||"",u),new t_(null);var h=window.open(n||"",u,f);Zm(h,e,"popup-blocked");try{h.focus()}catch(e){}return new t_(h)}function r_(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i_=encodeURIComponent("fac");function a_(e,t,n,r,i,a){return o_.apply(this,arguments)}function o_(){return(o_=t(o)(t(g).mark((function e(n,r,i,a,o,s){var u,c,l,f,h,d,p,v,y,m,k,b,_,E,x,I,T,S,A;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zm(n.config.authDomain,n,"auth-domain-config-required"),Zm(n.config.apiKey,n,"invalid-api-key"),u={apiKey:n.config.apiKey,appName:n.name,authType:i,redirectUrl:a,v:Ot,eventId:o},!(r instanceof iw)){e.next=24;break}for(r.setDefaultLanguage(n.languageCode),u.providerId=r.providerId||"",Ie(r.getCustomParameters())||(u.customParameters=JSON.stringify(r.getCustomParameters())),c=!0,l=!1,f=void 0,e.prev=8,h=Object.entries(s||{})[Symbol.iterator]();!(c=(d=h.next()).done);c=!0)p=t(w)(d.value,2),v=p[0],y=p[1],u[v]=y;e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),l=!0,f=e.t0;case 16:e.prev=16,e.prev=17,c||null==h.return||h.return();case 19:if(e.prev=19,!l){e.next=22;break}throw f;case 22:return e.finish(19);case 23:return e.finish(16);case 24:for(r instanceof aw&&(m=r.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=m.join(",")),n.tenantId&&(u.tid=n.tenantId),k=u,b=!0,_=!1,E=void 0,e.prev=28,x=Object.keys(k)[Symbol.iterator]();!(b=(I=x.next()).done);b=!0)T=I.value,void 0===k[T]&&delete k[T];e.next=36;break;case 32:e.prev=32,e.t1=e.catch(28),_=!0,E=e.t1;case 36:e.prev=36,e.prev=37,b||null==x.return||x.return();case 39:if(e.prev=39,!_){e.next=42;break}throw E;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return e.next=46,n._getAppCheckToken();case 46:return S=e.sent,A=S?"#".concat(i_,"=").concat(encodeURIComponent(S)):"",e.abrupt("return","".concat(s_(n),"?").concat(Ae(k).slice(1)).concat(A));case 49:case"end":return e.stop()}}),e,null,[[8,12,16,24],[17,,19,23],[28,32,36,44],[37,,39,43]])})))).apply(this,arguments)}function s_(e){var t=e.config;return t.emulator?og(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/").concat("__/auth/handler")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u_="webStorageSupport",c_=function(){"use strict";function e(){t(u)(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bw,this._completeRedirectFn=Rb,this._overrideRedirectResult=Ab}return t(c)(e,[{key:"_openPopup",value:function(e,n,r,i){var a=this;return t(o)(t(g).mark((function o(){var s,u;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return tg(null===(s=a.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),t.next=4,a_(e,n,r,ng(),i);case 4:return u=t.sent,t.abrupt("return",n_(e,u,qw()));case 6:case"end":return t.stop()}}),o)})))()}},{key:"_openRedirect",value:function(e,n,r,i){var a=this;return t(o)(t(g).mark((function o(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a._originValidation(e);case 2:return t.next=4,a_(e,n,r,ng(),i);case 4:return Kw(t.sent),t.abrupt("return",new Promise((function(){})));case 7:case"end":return t.stop()}}),o)})))()}},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(tg(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i,a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xb(e);case 2:return i=t.sent,a=new Db(e),i.register("authEvent",(function(t){return Zm(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:a.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:a},n.iframes[e._key()]=i,t.abrupt("return",a);case 8:case"end":return t.stop()}}),r)})))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(u_,{type:u_},(function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Jm(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vb.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return pk()||ak()||fk()}}]),e}(),l_=c_,f_=function(){"use strict";function e(n){t(u)(this,e),this.factorId=n}return t(c)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return eg("unexpected MultiFactorSessionType")}}}]),e}(),h_=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e){var i;return t(u)(this,r),(i=n.call(this,"phone")).credential=e,i}return t(c)(r,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return hg(e,"POST","/v2/accounts/mfaEnrollment:finalize",fg(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return hg(e,"POST","/v2/accounts/mfaSignIn:finalize",fg(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new r(e)}}]),r}(f_);(function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,null,[{key:"assertion",value:function(e){return h_._fromCredential(e)}}]),e}()).FACTOR_ID="phone",(function(){"use strict";function e(){t(u)(this,e)}return t(c)(e,null,[{key:"assertionForEnrollment",value:function(e,t){return d_._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return d_._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(e){return t(o)(t(g).mark((function n(){var r,i,a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Zm(void 0!==(null===(r=(i=e).user)||void 0===r?void 0:r.auth),"internal-error"),t.next=5,n=i.user.auth,o={idToken:i.credential,totpEnrollmentInfo:{}},hg(n,"POST","/v2/accounts/mfaEnrollment:start",fg(n,o));case 5:return a=t.sent,t.abrupt("return",p_._fromStartTotpMfaEnrollmentResponse(a,i.user.auth));case 7:case"end":return t.stop()}var n,o}),n)})))()}}]),e}()).FACTOR_ID="totp";var d_=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i,a){var o;return t(u)(this,r),(o=n.call(this,"totp")).otp=e,o.enrollmentId=i,o.secret=a,o}return t(c)(r,[{key:"_finalizeEnroll",value:function(e,n,r){var i=this;return t(o)(t(g).mark((function a(){return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Zm(void 0!==i.secret,e,"argument-error"),t.abrupt("return",Dw(e,{idToken:n,displayName:r,totpVerificationInfo:i.secret._makeTotpVerificationInfo(i.otp)}));case 2:case"end":return t.stop()}}),a)})))()}},{key:"_finalizeSignIn",value:function(e,n){var r=this;return t(o)(t(g).mark((function i(){var a;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Zm(void 0!==r.enrollmentId&&void 0!==r.otp,e,"argument-error"),a={verificationCode:r.otp},t.abrupt("return",lb(e,{mfaPendingCredential:n,mfaEnrollmentId:r.enrollmentId,totpVerificationInfo:a}));case 3:case"end":return t.stop()}}),i)})))()}}],[{key:"_fromSecret",value:function(e,t){return new r(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new r(t,e)}}]),r}(f_),p_=function(){"use strict";function e(n,r,i,a,o,s,c){t(u)(this,e),this.sessionInfo=s,this.auth=c,this.secretKey=n,this.hashingAlgorithm=r,this.codeLength=i,this.codeIntervalSeconds=a,this.enrollmentCompletionDeadline=o}return t(c)(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(v_(e)||v_(t))&&(r=!0),r&&(v_(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),v_(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function v_(e){return void 0===e||0===(null==e?void 0:e.length)}var y_="@firebase/auth",m_="1.4.0",g_=function(){"use strict";function e(n){t(u)(this,e),this.auth=n,this.internalListeners=new Map}return t(c)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(e){var n=this;return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.assertAuthConfigured(),t.next=3,n.auth._initializationPromise;case 3:if(n.auth.currentUser){t.next=5;break}return t.abrupt("return",null);case 5:return t.next=7,n.auth.currentUser.getIdToken(e);case 7:return i=t.sent,t.abrupt("return",{accessToken:i});case 9:case"end":return t.stop()}}),r)})))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Zm(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var k_,w_=de("authIdTokenMaxAge")||300,b_=null,__=function(e){return n=t(o)(t(g).mark((function n(r){var i,a,o;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r,!t.t0){t.next=5;break}return t.next=4,r.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(i=t.t0,!((a=i&&((new Date).getTime()-Date.parse(i.issuedAtTime))/1e3)&&a>w_)){t.next=9;break}return t.abrupt("return");case 9:if(o=null==i?void 0:i.token,b_!==o){t.next=12;break}return t.abrupt("return");case 12:return b_=o,t.next=15,fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:"Bearer ".concat(o)}:{}});case 15:case"end":return t.stop()}}),n)}))),function(e){return n.apply(this,arguments)};var n};k_="Browser",It(new Me("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;Zm(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:k_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vk(k_)},l=new wk(r,i,a,c);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map($g);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),It(new Me("auth-internal",(function(e){var t=bk(e.getProvider("auth").getImmediate());return new g_(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),Dt(y_,m_,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(k_)),Dt(y_,m_,"esm2017");T=a("ds8z5");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E_,x_,I_="firebasestorage.googleapis.com",T_=function(e){"use strict";t(S)(r,e);var n=t(U)(r);function r(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t(u)(this,r),(a=n.call(this,S_(e),"Firebase Storage: ".concat(i," (").concat(S_(e),")"))).status_=o,a.customData={serverResponse:null},a._baseMessage=a.message,Object.setPrototypeOf(t(T)(a),r.prototype),a}return t(c)(r,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return S_(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),r}(be);function S_(e){return"storage/"+e}function A_(){return new T_(E_.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function C_(){return new T_(E_.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O_(){return new T_(E_.CANCELED,"User canceled the upload/download.")}function R_(e){return new T_(E_.INVALID_ARGUMENT,e)}function N_(){return new T_(E_.APP_DELETED,"The Firebase app was deleted.")}(x_=E_||(E_={})).UNKNOWN="unknown",x_.OBJECT_NOT_FOUND="object-not-found",x_.BUCKET_NOT_FOUND="bucket-not-found",x_.PROJECT_NOT_FOUND="project-not-found",x_.QUOTA_EXCEEDED="quota-exceeded",x_.UNAUTHENTICATED="unauthenticated",x_.UNAUTHORIZED="unauthorized",x_.UNAUTHORIZED_APP="unauthorized-app",x_.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",x_.INVALID_CHECKSUM="invalid-checksum",x_.CANCELED="canceled",x_.INVALID_EVENT_NAME="invalid-event-name",x_.INVALID_URL="invalid-url",x_.INVALID_DEFAULT_BUCKET="invalid-default-bucket",x_.NO_DEFAULT_BUCKET="no-default-bucket",x_.CANNOT_SLICE_BLOB="cannot-slice-blob",x_.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",x_.NO_DOWNLOAD_URL="no-download-url",x_.INVALID_ARGUMENT="invalid-argument",x_.INVALID_ARGUMENT_COUNT="invalid-argument-count",x_.APP_DELETED="app-deleted",x_.INVALID_ROOT_OPERATION="invalid-root-operation",x_.INVALID_FORMAT="invalid-format",x_.INTERNAL_ERROR="internal-error",x_.UNSUPPORTED_ENVIRONMENT="unsupported-environment";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var D_,P_,L_=function(){"use strict";function e(n,r){t(u)(this,e),this.bucket=n,this.path_=r}return t(c)(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(n){return new e(t,"")}if(""===r.path)return r;throw i=t,new T_(E_.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===I_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new T_(E_.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),M_=function(){"use strict";function e(n){t(u)(this,e),this.promise_=Promise.reject(n)}return t(c)(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function U_(e,t,n,r){if(r<t)throw R_("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw R_("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function B_(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(P_=D_||(D_={}))[P_.NO_ERROR=0]="NO_ERROR",P_[P_.NETWORK_ERROR=1]="NETWORK_ERROR",P_[P_.ABORT=2]="ABORT";var V_=function(){"use strict";function e(n,r,i,a,o,s,c,l,f,h,d){var p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],v=this;t(u)(this,e),this.url_=n,this.method_=r,this.headers_=i,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=c,this.errorCallback_=l,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){v.resolve_=e,v.reject_=t,v.start_()}))}return t(c)(e,[{key:"start_",value:function(){var e=this,n=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());void 0!==o?r(o):r()}catch(e){i(e)}else if(null!==a){var s=A_();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else if(n.canceled){i(e.appDelete_?N_():O_())}else{i(C_())}};this.canceled_?n(0,new j_(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,n,r){var i=1,a=null,o=null,s=!1,u=0;function c(){return 2===u}var l=!1;function f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l||(l=!0,n.apply(null,t))}function d(t){a=setTimeout((function(){a=null,e(v,c())}),t)}function p(){o&&clearTimeout(o)}function v(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(l)p();else{var o,v,y;if(e)return p(),void(o=f).call.apply(o,[null,e].concat(t(h)(r)));if(c()||s)return p(),void(v=f).call.apply(v,[null,e].concat(t(h)(r)));i<64&&(i*=2),1===u?(u=2,y=0):y=1e3*(i+Math.random()),d(y)}}var y=!1;function m(e){y||(y=!0,p(),l||(null!==a?(e||(u=2),clearTimeout(a),d(0)):e||(u=1)))}return d(0),o=setTimeout((function(){s=!0,m(!0)}),r),m}((function(t,n){var r=e;if(n)t(!1,new j_(!1,null,!0));else{var i=e.connectionFactory_();e.pendingConnection_=i;var a=function(e){var t=e.loaded,n=e.lengthComputable?e.total:-1;null!==r.progressCallback_&&r.progressCallback_(t,n)};null!==e.progressCallback_&&i.addUploadProgressListener(a),i.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==r.progressCallback_&&i.removeUploadProgressListener(a),r.pendingConnection_=null;var e=i.getErrorCode()===D_.NO_ERROR,n=i.getStatus();if(!e||B_(n,r.additionalRetryCodes_)&&r.retry){var o=i.getErrorCode()===D_.ABORT;t(!1,new j_(!1,null,o))}else{var s=-1!==r.successCodes_.indexOf(n);t(!0,new j_(s,i))}}))}}),n,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),j_=function e(n,r,i){"use strict";t(u)(this,e),this.wasSuccessCode=n,this.connection=r,this.canceled=!!i};function q_(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function z_(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}function H_(e,t){t&&(e["X-Firebase-GMPID"]=t)}function K_(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function G_(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=F_(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return H_(c,t),q_(c,n),z_(c,a),K_(c,r),new V_(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Q_=function(){"use strict";function e(n,r){t(u)(this,e),this._service=n,this._location=r instanceof L_?r:L_.makeFromUrl(r,n.host)}return t(c)(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new L_(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return W_(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new L_(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw t=e,new T_(E_.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var t}}]),e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:L_.makeFromBucketSpec(n,e)}var X_=function(){"use strict";function e(n,r,i,a,o){t(u)(this,e),this.app=n,this._authProvider=r,this._appCheckProvider=i,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host=I_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?L_.makeFromBucketSpec(a,this._host):J_(this._host,this.app.options)}return t(c)(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=L_.makeFromBucketSpec(this._url,e):this._bucket=J_(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){U_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){U_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r,i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._overrideAuthToken){t.next=2;break}return t.abrupt("return",e._overrideAuthToken);case 2:if(!(r=e._authProvider.getImmediate({optional:!0}))){t.next=9;break}return t.next=6,r.getToken();case 6:if(null===(i=t.sent)){t.next=9;break}return t.abrupt("return",i.accessToken);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}}),n)})))()}},{key:"_getAppCheckToken",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r,i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e._appCheckProvider.getImmediate({optional:!0}))){t.next=6;break}return t.next=4,r.getToken();case 4:return i=t.sent,t.abrupt("return",i.token);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),n)})))()}},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Q_(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new M_(N_());var a=this,o=G_(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((function(){return a._requests.delete(o)}),(function(){return a._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(e,n){var r=this;return t(o)(t(g).mark((function i(){var a,o,s;return t(g).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=t(w),i.next=3,Promise.all([r._getAuthToken(),r._getAppCheckToken()]);case 3:return i.t1=i.sent,a=(0,i.t0)(i.t1,2),o=a[0],s=a[1],i.abrupt("return",r._makeRequest(e,n,o,s).getPromise());case 8:case"end":return i.stop()}}),i)})))()}}]),e}(),Y_="@firebase/storage",$_="0.11.2",Z_="storage";function eE(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new X_(r,i,a,n,Ot)}It(new Me(Z_,eE,"PUBLIC").setMultipleInstances(!0)),Dt(Y_,$_,""),Dt(Y_,$_,"esm2017");var tE=Rt({apiKey:"AIzaSyCfjG-RLGh4VqAL5XSxS9EG4IVK4R8XF-E",authDomain:"filmoteka-23.firebaseapp.com",projectId:"filmoteka-23",storageBucket:"filmoteka-23.appspot.com",messagingSenderId:"1050534310211",appId:"1:1050534310211:web:687145a2426964cba8fff6",measurementId:"G-0W38ZQRK92"}),nE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt(),t=Tt(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Nk(e,{popupRedirectResolver:l_,persistence:[ub,Uw,Bw]}),r=de("authTokenSyncURL");if(r){var i=__(r);Ow(n,i,(function(){return i(n.currentUser)})),Cw(n,(function(e){return i(e)}))}var a=le("auth");return a&&Dk(n,"http://".concat(a)),n}(tE),rE=function(e,n){var r="string"==typeof e?e:n||"(default)",i=Tt("object"==typeof e?e:Nt(),"firestore").getImmediate({identifier:r});if(!i._initialized){var a=fe("firestore");a&&Dy.apply(void 0,[i].concat(t(h)(a)))}return i}(tE),iE={form:document.querySelector(".form"),input:document.getElementById("search-input"),button:document.querySelector(".search-button"),mobileMenu:document.querySelector(".menu-container"),openBurgerBtn:document.getElementById("open_burger_btn"),closeBurgerBtn:document.getElementById("close_burger_btn"),gallery:document.querySelector(".gallery"),buttonLoadMore:document.querySelector(".load-more"),modal:document.querySelector(".modal"),modalContent:document.querySelector(".modal_data"),movieImage:document.querySelector(".movie_image"),movieDescr:document.querySelector(".movie_descr"),buttonClose:document.querySelectorAll(".modal_close"),modalBackdrop:document.querySelectorAll(".modal_body"),body:document.querySelector("body"),content:document.getElementById("content"),thumb:document.querySelector(".thumb"),headerNavLinks:document.querySelectorAll(".nav_item"),headerNavButtons:document.querySelector(".nav_list_button"),buttonWatched:document.getElementById("watched"),buttonQueue:document.getElementById("queue"),butttonsLibrary:document.querySelector(".modal_nav"),buttonHeaderNav:document.querySelector(".nav_list_button"),logo:document.querySelector(".logo"),homeBtn:document.getElementById("home_btn"),libraryBtn:document.getElementById("library_btn"),signOut:document.getElementById("auth_btn"),user:document.querySelector(".user"),modalLogin:document.getElementById("login"),modalRegister:document.getElementById("register"),formsAuth:document.querySelectorAll(".form_auth"),registerLink:document.getElementById("register_link"),loginLink:document.getElementById("login_link"),loginButton:document.getElementById("login_btn"),registerButton:document.getElementById("register_btn"),txtEmail:document.getElementById("txtEmail"),txtPassword:document.getElementById("txtPassword"),regEmail:document.getElementById("regEmail"),regPassword:document.getElementById("regPassword"),regPassword_:document.getElementById("regPassword_")};iE.loginButton.addEventListener("click",(function(){return oE.apply(this,arguments)})),iE.registerButton.addEventListener("click",(function(){return sE.apply(this,arguments)})),iE.signOut.addEventListener("click",(function(e){return uE.apply(this,arguments)}));var aE=iE.formsAuth||[];function oE(){return(oE=t(o)(t(g).mark((function e(){var n,r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=iE.txtEmail.value,r=iE.txtPassword.value,e.next=5,Aw(nE,n,r);case 5:e.sent,iE.signOut.classList.remove("not-visible"),cE(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function sE(){return(sE=t(o)(t(g).mark((function e(){var n,r,i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=iE.regEmail.value,r=iE.regPassword.value,e.next=5,Tw(nE,n,r);case 5:i=e.sent,console.log(i.user),iE.signOut.classList.remove("not-visible"),cE(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function uE(){return(uE=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.preventDefault(),window.location.assign("#/"),e.next=5,Rw(nE);case 5:iE.signOut.classList.add("not-visible"),console.log("user is successfully logout"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function cE(){for(var e=0;e<aE.length;e++)for(var t=aE[e],n=0;n<t.elements.length;n++)"text"===t.elements[n].type&&(t.elements[n].value="")}f=a("hKHmD"),Ci=a("l5bVx");function lE(e,t){return function(){return e.apply(t,arguments)}}var fE,hE=Object.prototype.toString,dE=Object.getPrototypeOf,pE=(fE=Object.create(null),function(e){var t=hE.call(e);return fE[t]||(fE[t]=t.slice(8,-1).toLowerCase())}),vE=function(e){return e=e.toLowerCase(),function(t){return pE(t)===e}},yE=function(e){return function(n){return(void 0===n?"undefined":t(Ci)(n))===e}},mE=Array.isArray,gE=yE("undefined");var kE=vE("ArrayBuffer");var wE=yE("string"),bE=yE("function"),_E=yE("number"),EE=function(e){return null!==e&&"object"==typeof e},xE=function(e){if("object"!==pE(e))return!1;var t=dE(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},IE=vE("Date"),TE=vE("File"),SE=vE("Blob"),AE=vE("FileList"),CE=vE("URLSearchParams");function OE(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!=e)if("object"!=typeof e&&(e=[e]),mE(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var s,u=o?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;for(n=0;n<c;n++)s=u[n],t.call(null,e[s],s,e)}}function RE(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var NE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n,DE=function(e){return!gE(e)&&e!==NE};var PE,LE,ME=(PE="undefined"!=typeof Uint8Array&&dE(Uint8Array),function(e){return PE&&e instanceof PE}),UE=vE("HTMLFormElement"),FE=(LE=Object.prototype.hasOwnProperty,function(e,t){return LE.call(e,t)}),BE=vE("RegExp"),VE=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};OE(n,(function(n,i){var a;!1!==(a=t(n,i,e))&&(r[i]=a||n)})),Object.defineProperties(e,r)},jE="abcdefghijklmnopqrstuvwxyz",qE="0123456789",zE={DIGIT:qE,ALPHA:jE,ALPHA_DIGIT:jE+jE.toUpperCase()+qE};var HE=vE("AsyncFunction"),KE={isArray:mE,isArrayBuffer:kE,isBuffer:function(e){return null!==e&&!gE(e)&&null!==e.constructor&&!gE(e.constructor)&&bE(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"==typeof FormData&&e instanceof FormData||bE(e.append)&&("formdata"===(t=pE(e))||"object"===t&&bE(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&kE(e.buffer)},isString:wE,isNumber:_E,isBoolean:function(e){return!0===e||!1===e},isObject:EE,isPlainObject:xE,isUndefined:gE,isDate:IE,isFile:TE,isBlob:SE,isRegExp:BE,isFunction:bE,isStream:function(e){return EE(e)&&bE(e.pipe)},isURLSearchParams:CE,isTypedArray:ME,isFileList:AE,forEach:OE,merge:function e(){for(var t=(DE(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&RE(n,i)||i;xE(n[a])&&xE(r)?n[a]=e(n[a],r):xE(r)?n[a]=e({},r):mE(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&OE(arguments[i],r);return n},extend:function(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys;return OE(t,(function(t,r){n&&bE(t)?e[r]=lE(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&dE(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:pE,kindOfTest:vE,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(mE(e))return e;var t=e.length;if(!_E(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:UE,hasOwnProperty:FE,hasOwnProp:FE,reduceDescriptors:VE,freezeMethods:function(e){VE(e,(function(t,n){if(bE(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];bE(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return mE(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:RE,global:NE,isContextDefined:DE,ALPHABET:zE,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zE.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&bE(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10),n=function(e,r){if(EE(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;var i=mE(e)?[]:{};return OE(e,(function(e,t){var a=n(e,r+1);!gE(a)&&(i[t]=a)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:HE,isThenable:function(e){return e&&(EE(e)||bE(e))&&bE(e.then)&&bE(e.catch)}};function GE(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}KE.inherits(GE,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:KE.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var WE=GE.prototype,QE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){QE[e]={value:e}})),Object.defineProperties(GE,QE),Object.defineProperty(WE,"isAxiosError",{value:!0}),GE.from=function(e,t,n,r,i,a){var o=Object.create(WE);return KE.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),GE.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var JE,XE,YE,$E=GE;T=a("ds8z5"),Ci=a("l5bVx");XE=function(e){var t,n,r=sx(e),i=r[0],a=r[1],o=new rx(function(e,t,n){return 3*(t+n)/4-n}(0,i,a)),s=0,u=a>0?i-4:i;for(n=0;n<u;n+=4)t=nx[e.charCodeAt(n)]<<18|nx[e.charCodeAt(n+1)]<<12|nx[e.charCodeAt(n+2)]<<6|nx[e.charCodeAt(n+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;2===a&&(t=nx[e.charCodeAt(n)]<<2|nx[e.charCodeAt(n+1)]>>4,o[s++]=255&t);1===a&&(t=nx[e.charCodeAt(n)]<<10|nx[e.charCodeAt(n+1)]<<4|nx[e.charCodeAt(n+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t);return o},YE=function(e){for(var t,n=e.length,r=n%3,i=[],a=16383,o=0,s=n-r;o<s;o+=a)i.push(ux(e,o,o+a>s?s:o+a));1===r?(t=e[n-1],i.push(tx[t>>2]+tx[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(tx[t>>10]+tx[t>>4&63]+tx[t<<2&63]+"="));return i.join("")}
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */;for(var ZE,ex,tx=[],nx=[],rx="undefined"!=typeof Uint8Array?Uint8Array:Array,ix="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ax=0,ox=ix.length;ax<ox;++ax)tx[ax]=ix[ax],nx[ix.charCodeAt(ax)]=ax;function sx(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function ux(e,t,n){for(var r,i,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(tx[(i=r)>>18&63]+tx[i>>12&63]+tx[i>>6&63]+tx[63&i]);return a.join("")}nx["-".charCodeAt(0)]=62,nx["_".charCodeAt(0)]=63,ZE=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},ex=function(e,t,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+d]=255&o,d+=p,o/=256,c-=8);e[n+d-p]|=128*v};var cx="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;JE=hx;var lx=2147483647;function fx(e){if(e>lx)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,hx.prototype),t}function hx(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return vx(e)}return dx(e,t,n)}function dx(e,n,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!hx.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|kx(e,t),r=fx(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,n);if(ArrayBuffer.isView(e))return function(e){if(Zx(e,Uint8Array)){var t=new Uint8Array(e);return mx(t.buffer,t.byteOffset,t.byteLength)}return yx(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===e?"undefined":t(Ci)(e)));if(Zx(e,ArrayBuffer)||e&&Zx(e.buffer,ArrayBuffer))return mx(e,n,r);if("undefined"!=typeof SharedArrayBuffer&&(Zx(e,SharedArrayBuffer)||e&&Zx(e.buffer,SharedArrayBuffer)))return mx(e,n,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return hx.from(i,n,r);var a=function(e){if(hx.isBuffer(e)){var t=0|gx(e.length),n=fx(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||eI(e.length)?fx(0):yx(e);if("Buffer"===e.type&&Array.isArray(e.data))return yx(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return hx.from(e[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===e?"undefined":t(Ci)(e)))}function px(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function vx(e){return px(e),fx(e<0?0:0|gx(e))}function yx(e){for(var t=e.length<0?0:0|gx(e.length),n=fx(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function mx(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,hx.prototype),r}function gx(e){if(e>=lx)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+lx.toString(16)+" bytes");return 0|e}function kx(e,n){if(hx.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Zx(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+(void 0===e?"undefined":t(Ci)(e)));var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var a=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Xx(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Yx(e).length;default:if(a)return i?-1:Xx(e).length;n=(""+n).toLowerCase(),a=!0}}function wx(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Px(this,t,n);case"utf8":case"utf-8":return Ox(this,t,n);case"ascii":return Nx(this,t,n);case"latin1":case"binary":return Dx(this,t,n);case"base64":return Cx(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lx(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function bx(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _x(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),eI(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=hx.from(t,r)),hx.isBuffer(t))return 0===t.length?-1:Ex(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ex(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Ex(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(e,a+h)!==c(t,h)){f=!1;break}if(f)return a}return-1}function xx(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a,o=t.length;for(r>o/2&&(r=o/2),a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(eI(s))return a;e[n+a]=s}return a}function Ix(e,t,n,r){return $x(Xx(t,e.length-n),e,n,r)}function Tx(e,t,n,r){return $x(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Sx(e,t,n,r){return $x(Yx(t),e,n,r)}function Ax(e,t,n,r){return $x(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function Cx(e,t,n){return 0===t&&n===e.length?YE(e):YE(e.slice(t,n))}function Ox(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:a<128&&(o=a);break;case 2:128==(192&(u=e[i+1]))&&(f=(31&a)<<6|63&u)>127&&(o=f);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(f=(15&a)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&a)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){var t=e.length;if(t<=Rx)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Rx));return n}(r)}hx.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),hx.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(hx.prototype,"parent",{enumerable:!0,get:function(){if(hx.isBuffer(this))return this.buffer}}),Object.defineProperty(hx.prototype,"offset",{enumerable:!0,get:function(){if(hx.isBuffer(this))return this.byteOffset}}),hx.poolSize=8192,hx.from=function(e,t,n){return dx(e,t,n)},Object.setPrototypeOf(hx.prototype,Uint8Array.prototype),Object.setPrototypeOf(hx,Uint8Array),hx.alloc=function(e,t,n){return function(e,t,n){return px(e),e<=0?fx(e):void 0!==t?"string"==typeof n?fx(e).fill(t,n):fx(e).fill(t):fx(e)}(e,t,n)},hx.allocUnsafe=function(e){return vx(e)},hx.allocUnsafeSlow=function(e){return vx(e)},hx.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==hx.prototype},hx.compare=function(e,t){if(Zx(e,Uint8Array)&&(e=hx.from(e,e.offset,e.byteLength)),Zx(t,Uint8Array)&&(t=hx.from(t,t.offset,t.byteLength)),!hx.isBuffer(e)||!hx.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},hx.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},hx.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return hx.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=hx.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(Zx(a,Uint8Array))i+a.length>r.length?(hx.isBuffer(a)||(a=hx.from(a)),a.copy(r,i)):Uint8Array.prototype.set.call(r,a,i);else{if(!hx.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},hx.byteLength=kx,hx.prototype._isBuffer=!0,hx.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)bx(this,t,t+1);return this},hx.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)bx(this,t,t+3),bx(this,t+1,t+2);return this},hx.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)bx(this,t,t+7),bx(this,t+1,t+6),bx(this,t+2,t+5),bx(this,t+3,t+4);return this},hx.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?Ox(this,0,e):wx.apply(this,arguments)},hx.prototype.toLocaleString=hx.prototype.toString,hx.prototype.equals=function(e){if(!hx.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===hx.compare(this,e)},hx.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},cx&&(hx.prototype[cx]=hx.prototype.inspect),hx.prototype.compare=function(e,n,r,i,a){if(Zx(e,Uint8Array)&&(e=hx.from(e,e.offset,e.byteLength)),!hx.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+(void 0===e?"undefined":t(Ci)(e)));if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),n<0||r>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&n>=r)return 0;if(i>=a)return-1;if(n>=r)return 1;if(this===e)return 0;for(var o=(a>>>=0)-(i>>>=0),s=(r>>>=0)-(n>>>=0),u=Math.min(o,s),c=this.slice(i,a),l=e.slice(n,r),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},hx.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},hx.prototype.indexOf=function(e,t,n){return _x(this,e,t,n,!0)},hx.prototype.lastIndexOf=function(e,t,n){return _x(this,e,t,n,!1)},hx.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return xx(this,e,t,n);case"utf8":case"utf-8":return Ix(this,e,t,n);case"ascii":case"latin1":case"binary":return Tx(this,e,t,n);case"base64":return Sx(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ax(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},hx.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Rx=4096;function Nx(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function Dx(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Px(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=tI[e[a]];return i}function Lx(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function Mx(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Ux(e,t,n,r,i,a){if(!hx.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Fx(e,t,n,r,i){Gx(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function Bx(e,t,n,r,i){Gx(t,r,i,e,n,7);var a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;var o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function Vx(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function jx(e,t,n,r,i){return t=+t,n>>>=0,i||Vx(e,0,n,4),ex(e,t,n,r,23,4),n+4}function qx(e,t,n,r,i){return t=+t,n>>>=0,i||Vx(e,0,n,8),ex(e,t,n,r,52,8),n+8}hx.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,hx.prototype),r},hx.prototype.readUintLE=hx.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Mx(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},hx.prototype.readUintBE=hx.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Mx(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},hx.prototype.readUint8=hx.prototype.readUInt8=function(e,t){return e>>>=0,t||Mx(e,1,this.length),this[e]},hx.prototype.readUint16LE=hx.prototype.readUInt16LE=function(e,t){return e>>>=0,t||Mx(e,2,this.length),this[e]|this[e+1]<<8},hx.prototype.readUint16BE=hx.prototype.readUInt16BE=function(e,t){return e>>>=0,t||Mx(e,2,this.length),this[e]<<8|this[e+1]},hx.prototype.readUint32LE=hx.prototype.readUInt32LE=function(e,t){return e>>>=0,t||Mx(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},hx.prototype.readUint32BE=hx.prototype.readUInt32BE=function(e,t){return e>>>=0,t||Mx(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},hx.prototype.readBigUInt64LE=nI((function(e){Wx(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Qx(e,this.length-8);var r=t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24),i=this[++e]+256*this[++e]+65536*this[++e]+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),hx.prototype.readBigUInt64BE=nI((function(e){Wx(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Qx(e,this.length-8);var r=t*Math.pow(2,24)+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),hx.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Mx(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},hx.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Mx(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},hx.prototype.readInt8=function(e,t){return e>>>=0,t||Mx(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},hx.prototype.readInt16LE=function(e,t){e>>>=0,t||Mx(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},hx.prototype.readInt16BE=function(e,t){e>>>=0,t||Mx(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},hx.prototype.readInt32LE=function(e,t){return e>>>=0,t||Mx(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},hx.prototype.readInt32BE=function(e,t){return e>>>=0,t||Mx(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},hx.prototype.readBigInt64LE=nI((function(e){Wx(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Qx(e,this.length-8);var r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24))})),hx.prototype.readBigInt64BE=nI((function(e){Wx(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Qx(e,this.length-8);var r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+n)})),hx.prototype.readFloatLE=function(e,t){return e>>>=0,t||Mx(e,4,this.length),ZE(this,e,!0,23,4)},hx.prototype.readFloatBE=function(e,t){return e>>>=0,t||Mx(e,4,this.length),ZE(this,e,!1,23,4)},hx.prototype.readDoubleLE=function(e,t){return e>>>=0,t||Mx(e,8,this.length),ZE(this,e,!0,52,8)},hx.prototype.readDoubleBE=function(e,t){return e>>>=0,t||Mx(e,8,this.length),ZE(this,e,!1,52,8)},hx.prototype.writeUintLE=hx.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Ux(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},hx.prototype.writeUintBE=hx.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Ux(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},hx.prototype.writeUint8=hx.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,1,255,0),this[t]=255&e,t+1},hx.prototype.writeUint16LE=hx.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},hx.prototype.writeUint16BE=hx.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},hx.prototype.writeUint32LE=hx.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},hx.prototype.writeUint32BE=hx.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},hx.prototype.writeBigUInt64LE=nI((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Fx(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),hx.prototype.writeBigUInt64BE=nI((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Bx(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),hx.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Ux(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},hx.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Ux(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},hx.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},hx.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},hx.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},hx.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},hx.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Ux(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},hx.prototype.writeBigInt64LE=nI((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Fx(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),hx.prototype.writeBigInt64BE=nI((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Bx(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),hx.prototype.writeFloatLE=function(e,t,n){return jx(this,e,t,!0,n)},hx.prototype.writeFloatBE=function(e,t,n){return jx(this,e,t,!1,n)},hx.prototype.writeDoubleLE=function(e,t,n){return qx(this,e,t,!0,n)},hx.prototype.writeDoubleBE=function(e,t,n){return qx(this,e,t,!1,n)},hx.prototype.copy=function(e,t,n,r){if(!hx.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},hx.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!hx.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=hx.isBuffer(e)?e:hx.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var zx={};function Hx(e,n,r){zx[e]=function(r){t(S)(a,r);var i=t(U)(a);function a(){var r;return t(u)(this,a),r=i.call(this),Object.defineProperty(t(T)(r),"message",{value:n.apply(t(T)(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(e,"]"),r.stack,delete r.name,r}return t(c)(a,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),a}(r)}function Kx(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function Gx(e,n,r,i,a,o){if(e>r||e<n){var s,u="bigint"===(void 0===n?"undefined":t(Ci)(n))?"n":"";throw s=o>3?0===n||n===BigInt(0)?">= 0".concat(u," and < 2").concat(u," ** ").concat(8*(o+1)).concat(u):">= -(2".concat(u," ** ").concat(8*(o+1)-1).concat(u,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(u):">= ".concat(n).concat(u," and <= ").concat(r).concat(u),new zx.ERR_OUT_OF_RANGE("value",s,e)}!function(e,t,n){Wx(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Qx(t,e.length-(n+1))}(i,a,o)}function Wx(e,t){if("number"!=typeof e)throw new zx.ERR_INVALID_ARG_TYPE(t,"number",e)}function Qx(e,t,n){if(Math.floor(e)!==e)throw Wx(e,n),new zx.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new zx.ERR_BUFFER_OUT_OF_BOUNDS;throw new zx.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}Hx("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),Hx("ERR_INVALID_ARG_TYPE",(function(e,n){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(void 0===n?"undefined":t(Ci)(n))}),TypeError),Hx("ERR_OUT_OF_RANGE",(function(e,n,r){var i='The value of "'.concat(e,'" is out of range.'),a=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?a=Kx(String(r)):"bigint"===(void 0===r?"undefined":t(Ci)(r))&&(a=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(a=Kx(a)),a+="n"),i+=" It must be ".concat(n,". Received ").concat(a)}),RangeError);var Jx=/[^+/0-9A-Za-z-_]/g;function Xx(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Yx(e){return XE(function(e){if((e=(e=e.split("=")[0]).trim().replace(Jx,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $x(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Zx(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function eI(e){return e!=e}var tI=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function nI(e){return"undefined"==typeof BigInt?rI:e}function rI(){throw new Error("BigInt not supported")}var iI=JE;function aI(e){return KE.isPlainObject(e)||KE.isArray(e)}function oI(e){return KE.endsWith(e,"[]")?e.slice(0,-2):e}function sI(e,t,n){return e?e.concat(t).map((function(e,t){return e=oI(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var uI=KE.toFlatObject(KE,{},null,(function(e){return/^is[A-Z]/.test(e)}));var cI=function(e,t,n){if(!KE.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=KE.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!KE.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&KE.isSpecCompliantForm(t);if(!KE.isFunction(i))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(KE.isDate(e))return e.toISOString();if(!s&&KE.isBlob(e))throw new $E("Blob is not supported. Use a Buffer instead.");return KE.isArrayBuffer(e)||KE.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):iI.from(e):e}function c(e,n,i){var s=e;if(e&&!i&&"object"==typeof e)if(KE.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(KE.isArray(e)&&function(e){return KE.isArray(e)&&!e.some(aI)}(e)||(KE.isFileList(e)||KE.endsWith(n,"[]"))&&(s=KE.toArray(e)))return n=oI(n),s.forEach((function(e,r){!KE.isUndefined(e)&&null!==e&&t.append(!0===o?sI([n],r,a):null===o?n:n+"[]",u(e))})),!1;return!!aI(e)||(t.append(sI(i,n,a),u(e)),!1)}var l=[],f=Object.assign(uI,{defaultVisitor:c,convertValue:u,isVisitable:aI});if(!KE.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!KE.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),KE.forEach(n,(function(n,a){!0===(!(KE.isUndefined(n)||null===n)&&i.call(t,n,KE.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function lI(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function fI(e,t){this._pairs=[],e&&cI(e,this,t)}var hI=fI.prototype;hI.append=function(e,t){this._pairs.push([e,t])},hI.toString=function(e){var t=e?function(t){return e.call(this,t,lI)}:lI;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var dI=fI;function pI(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vI(e,t,n){if(!t)return e;var r,i=n&&n.encode||pI,a=n&&n.serialize;if(r=a?a(t,n):KE.isURLSearchParams(t)?t.toString():new dI(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var yI,mI=function(){function e(){t(u)(this,e),this.handlers=[]}return t(c)(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){KE.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),gI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kI={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:dI,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:("undefined"==typeof navigator||"ReactNative"!==(yI=navigator.product)&&"NativeScript"!==yI&&"NS"!==yI)&&"undefined"!=typeof window&&"undefined"!=typeof document,isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function wI(e,t){return cI(e,new kI.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return kI.isNode&&KE.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}var bI=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),s=i>=e.length;return a=!a&&KE.isArray(r)?r.length:a,s?(KE.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&KE.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&KE.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(KE.isFormData(e)&&KE.isFunction(e.entries)){var n={};return KE.forEachEntry(e,(function(e,r){t(function(e){return KE.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var _I={transitional:gI,adapter:kI.isNode?"http":"xhr",transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=KE.isObject(e);if(a&&KE.isHTMLForm(e)&&(e=new FormData(e)),KE.isFormData(e))return i&&i?JSON.stringify(bI(e)):e;if(KE.isArrayBuffer(e)||KE.isBuffer(e)||KE.isStream(e)||KE.isFile(e)||KE.isBlob(e))return e;if(KE.isArrayBufferView(e))return e.buffer;if(KE.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return wI(e,this.formSerializer).toString();if((n=KE.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return cI(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(KE.isString(e))try{return(t||JSON.parse)(e),KE.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||_I.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&KE.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw $E.from(e,$E.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kI.classes.FormData,Blob:kI.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};KE.forEach(["delete","get","head","post","put","patch"],(function(e){_I.headers[e]={}}));var EI=_I,xI=KE.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),II=Symbol("internals");function TI(e){return e&&String(e).trim().toLowerCase()}function SI(e){return!1===e||null==e?e:KE.isArray(e)?e.map(SI):String(e)}function AI(e,t,n,r,i){return KE.isFunction(r)?r.call(this,t,n):(i&&(t=n),KE.isString(t)?KE.isString(r)?-1!==t.indexOf(r):KE.isRegExp(r)?r.test(t):void 0:void 0)}var CI=Symbol.iterator,OI=Symbol.toStringTag,RI=function(){function e(n){t(u)(this,e),n&&this.set(n)}return t(c)(e,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=TI(t);if(!i)throw new Error("header name must be a non-empty string");var a=KE.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=SI(e))}var a,o,s,u,c,l=function(e,t){return KE.forEach(e,(function(e,n){return i(e,n,t)}))};return KE.isPlainObject(e)||e instanceof this.constructor?l(e,t):KE.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?l((c={},(a=e)&&a.split("\n").forEach((function(e){u=e.indexOf(":"),o=e.substring(0,u).trim().toLowerCase(),s=e.substring(u+1).trim(),!o||c[o]&&xI[o]||("set-cookie"===o?c[o]?c[o].push(s):c[o]=[s]:c[o]=c[o]?c[o]+", "+s:s)})),c),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=TI(e)){var n=KE.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(KE.isFunction(t))return t.call(this,r,n);if(KE.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=TI(e)){var n=KE.findKey(this,e);return!(!n||void 0===this[n]||t&&!AI(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=TI(e)){var i=KE.findKey(n,e);!i||t&&!AI(0,n[i],i,t)||(delete n[i],r=!0)}}return KE.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!AI(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return KE.forEach(this,(function(r,i){var a=KE.findKey(n,i);if(a)return t[a]=SI(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=SI(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i;return(i=this.constructor).concat.apply(i,[this].concat(t(h)(n)))}},{key:"toJSON",value:function(e){var t=Object.create(null);return KE.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&KE.isArray(n)?n.join(", "):n)})),t}},{key:CI,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var n=t(w)(e,2);return n[0]+": "+n[1]})).join("\n")}},{key:OI,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=new this(e);return n.forEach((function(e){return i.set(e)})),i}},{key:"accessor",value:function(e){var t=(this[II]=this[II]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=TI(e);t[r]||(!function(e,t){var n=KE.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return KE.isArray(e)?e.forEach(r):r(e),this}}]),e}();RI.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),KE.reduceDescriptors(RI.prototype,(function(e,t){var n=e.value,r=t[0].toUpperCase()+t.slice(1);return{get:function(){return n},set:function(e){this[r]=e}}})),KE.freezeMethods(RI);var NI=RI;function DI(e,t){var n=this||EI,r=t||n,i=NI.from(r.headers),a=r.data;return KE.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function PI(e){return!(!e||!e.__CANCEL__)}function LI(e,t,n){$E.call(this,null==e?"canceled":e,$E.ERR_CANCELED,t,n),this.name="CanceledError"}KE.inherits(LI,$E,{__CANCEL__:!0});var MI=LI;function UI(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new $E("Request failed with status code "+n.status,[$E.ERR_BAD_REQUEST,$E.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}var FI=kI.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),KE.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),KE.isString(r)&&o.push("path="+r),KE.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function BI(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function VI(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?BI(e,t):t}var jI=kI.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=KE.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var qI=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),c=i[o];n||(n=u),r[a]=s,i[a]=u;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(u-n<t)){var h=c&&u-c;return h?Math.round(1e3*f/h):void 0}}};function zI(e,t){var n=0,r=qI(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,u=r(s);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&a<=o?(o-a)/u:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var HI={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=NI.from(e.headers).normalize(),o=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}KE.isFormData(i)&&(kI.isStandardBrowserEnv||kI.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));var u=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=VI(e.baseURL,e.url);function h(){if(u){var r=NI.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());UI((function(e){t(e),s()}),(function(e){n(e),s()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}}if(u.open(e.method.toUpperCase(),vI(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(h)},u.onabort=function(){u&&(n(new $E("Request aborted",$E.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new $E("Network Error",$E.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||gI;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new $E(t,r.clarifyTimeoutError?$E.ETIMEDOUT:$E.ECONNABORTED,e,u)),u=null},kI.isStandardBrowserEnv){var d=(e.withCredentials||jI(f))&&e.xsrfCookieName&&FI.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in u&&KE.forEach(a.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),KE.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&"json"!==o&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",zI(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",zI(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){u&&(n(!t||t.type?new MI(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p,v=(p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f))&&p[1]||"";v&&-1===kI.protocols.indexOf(v)?n(new $E("Unsupported protocol "+v+":",$E.ERR_BAD_REQUEST,e)):u.send(i||null)}))}};KE.forEach(HI,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));var KI={getAdapter:function(e){for(var t,n,r=(e=KE.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=KE.isString(t)?HI[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new $E("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(KE.hasOwnProp(HI,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!KE.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:HI};function GI(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new MI(null,e)}function WI(e){return GI(e),e.headers=NI.from(e.headers),e.data=DI.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),KI.getAdapter(e.adapter||EI.adapter)(e).then((function(t){return GI(e),t.data=DI.call(e,e.transformResponse,t),t.headers=NI.from(t.headers),t}),(function(t){return PI(t)||(GI(e),t&&t.response&&(t.response.data=DI.call(e,e.transformResponse,t.response),t.response.headers=NI.from(t.response.headers))),Promise.reject(t)}))}var QI=function(e){return e instanceof NI?e.toJSON():e};function JI(e,t){t=t||{};var n={};function r(e,t,n){return KE.isPlainObject(e)&&KE.isPlainObject(t)?KE.merge.call({caseless:n},e,t):KE.isPlainObject(t)?KE.merge({},t):KE.isArray(t)?t.slice():t}function i(e,t,n){return KE.isUndefined(t)?KE.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!KE.isUndefined(t))return r(void 0,t)}function o(e,t){return KE.isUndefined(t)?KE.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:function(e,t){return i(QI(e),QI(t),!0)}};return KE.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=u[r]||i,o=a(e[r],t[r],r);KE.isUndefined(o)&&a!==s||(n[r]=o)})),n}Ci=a("l5bVx");var XI="1.5.0",YI={};["object","boolean","number","function","string","symbol"].forEach((function(e,n){YI[e]=function(r){return(void 0===r?"undefined":t(Ci)(r))===e||"a"+(n<1?"n ":" ")+e}}));var $I={};YI.transitional=function(e,t,n){function r(e,t){return"[Axios v1.5.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new $E(r(i," has been removed"+(t?" in "+t:"")),$E.ERR_DEPRECATED);return t&&!$I[i]&&($I[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var ZI={assertOptions:function(e,t,n){if("object"!=typeof e)throw new $E("options must be an object",$E.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var s=e[a],u=void 0===s||o(s,a,e);if(!0!==u)throw new $E("option "+a+" must be "+u,$E.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new $E("Unknown option "+a,$E.ERR_BAD_OPTION)}},validators:YI},eT=ZI.validators,tT=function(){function e(n){t(u)(this,e),this.defaults=n,this.interceptors={request:new mI,response:new mI}}return t(c)(e,[{key:"request",value:function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};var n=(t=JI(this.defaults,t)).transitional,r=t.paramsSerializer,i=t.headers;void 0!==n&&ZI.assertOptions(n,{silentJSONParsing:eT.transitional(eT.boolean),forcedJSONParsing:eT.transitional(eT.boolean),clarifyTimeoutError:eT.transitional(eT.boolean)},!1),null!=r&&(KE.isFunction(r)?t.paramsSerializer={serialize:r}:ZI.assertOptions(r,{encode:eT.function,serialize:eT.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=i&&KE.merge(i.common,i[t.method]);i&&KE.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete i[e]})),t.headers=NI.concat(a,i);var o=[],s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var u,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var l,f=0;if(!s){var h=[WI.bind(this),void 0];for(h.unshift.apply(h,o),h.push.apply(h,c),l=h.length,u=Promise.resolve(t);f<l;)u=u.then(h[f++],h[f++]);return u}l=o.length;var d=t;for(f=0;f<l;){var p=o[f++],v=o[f++];try{d=p(d)}catch(e){v.call(this,e);break}}try{u=WI.call(this,d)}catch(e){return Promise.reject(e)}for(f=0,l=c.length;f<l;)u=u.then(c[f++],c[f++]);return u}},{key:"getUri",value:function(e){return vI(VI((e=JI(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();KE.forEach(["delete","get","head","options"],(function(e){tT.prototype[e]=function(t,n){return this.request(JI(n||{},{method:e,url:t,data:(n||{}).data}))}})),KE.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(JI(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}tT.prototype[e]=t(),tT.prototype[e+"Form"]=t(!0)}));var nT=tT,rT=function(){function e(n){if(t(u)(this,e),"function"!=typeof n)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(e){r=e}));var i=this;this.promise.then((function(e){if(i._listeners){for(var t=i._listeners.length;t-- >0;)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},n((function(e,t,n){i.reason||(i.reason=new MI(e,t,n),r(i.reason))}))}return t(c)(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}();var iT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(iT).forEach((function(e){var n=t(w)(e,2),r=n[0],i=n[1];iT[i]=r}));var aT=iT;var oT=function e(t){var n=new nT(t),r=lE(nT.prototype.request,n);return KE.extend(r,nT.prototype,n,{allOwnKeys:!0}),KE.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(JI(t,n))},r}(EI);oT.Axios=nT,oT.CanceledError=MI,oT.CancelToken=rT,oT.isCancel=PI,oT.VERSION=XI,oT.toFormData=cI,oT.AxiosError=$E,oT.Cancel=oT.CanceledError,oT.all=function(e){return Promise.all(e)},oT.spread=function(e){return function(t){return e.apply(null,t)}},oT.isAxiosError=function(e){return KE.isObject(e)&&!0===e.isAxiosError},oT.mergeConfig=JI,oT.AxiosHeaders=NI,oT.formToJSON=function(e){return bI(KE.isHTMLForm(e)?new FormData(e):e)},oT.getAdapter=KI.getAdapter,oT.HttpStatusCode=aT,oT.default=oT;var sT=oT,uT=(sT.Axios,sT.AxiosError,sT.CanceledError,sT.isCancel,sT.CancelToken,sT.VERSION,sT.all,sT.Cancel,sT.isAxiosError,sT.spread,sT.toFormData,sT.AxiosHeaders,sT.HttpStatusCode,sT.formToJSON,sT.getAdapter,sT.mergeConfig,"6de1479941bef67a0c224787b78603f1"),cT=sT.create({baseURL:"https://api.themoviedb.org/3/"}),lT=function(){"use strict";function e(){t(u)(this,e),this.page=1,this.word="",this._movieId=null}return t(c)(e,[{key:"fetchMovies",value:function(){var e=this;return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cT.get("/trending/movie/day?api_key=".concat(uT,"&page=").concat(e.page));case 2:return r=t.sent,t.abrupt("return",r.data.results);case 4:case"end":return t.stop()}}),n)})))()}},{key:"fetchMovieDetailsById",value:function(e){return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cT.get("movie/".concat(e,"?api_key=").concat(uT));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),n)})))()}},{key:"fetchMoviesByQuery",value:function(e,n){return t(o)(t(g).mark((function r(){var i;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cT.get("/search/movie?api_key=".concat(uT,"&query=").concat(e,"&page=").concat(n));case 2:return i=t.sent,t.abrupt("return",i.data.results);case 4:case"end":return t.stop()}}),r)})))()}},{key:"fetchMoviesByPage",value:function(e){return t(o)(t(g).mark((function n(){var r;return t(g).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cT.get("/trending/movie/day?api_key=".concat(uT,"&page=").concat(e));case 2:return r=t.sent,t.abrupt("return",r.data.results);case 4:case"end":return t.stop()}}),n)})))()}},{key:"fetchGenresListByIds",value:function(){return t(o)(t(g).mark((function e(){var n;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cT.get("/genre/movie/list?api_key=".concat(uT,"&language=en"));case 2:return n=e.sent,e.abrupt("return",n.data.genres);case 4:case"end":return e.stop()}}),e)})))()}},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}},{key:"resetQuery",value:function(){this.word=""}},{key:"query",get:function(){return this.word},set:function(e){return this.word=e}},{key:"movieId",get:function(){return this._movieId},set:function(e){return this._movieId=e}}]),e}();function fT(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.log(e.message)}}function hT(e){try{var t=localStorage.getItem(e);if(t)return JSON.parse(t)}catch(e){console.log(e.message)}}function dT(e){var t=hT("genres")||[];if(t)return t.filter((function(t){return e.includes(t.id)})).map((function(e){return e.name}))}a("aNJCr").getBundleURL("EVgbq"),a("iE7OH").resolve("6n1Ny");var pT;pT=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("02qM7");var vT;function yT(e){var t=e.map((function(e){return function(e){var t=e.poster_path,n=e.original_title,r=e.id,i=e.genre_ids,a=e.genres,o=e.release_date,s=e.vote_average,u=new Date(o).getFullYear(),c=t?'<li class="gallery_card">\n         <a\n           class="gallery_link"\n          href="https://image.tmdb.org/t/p/w500'.concat(t,'"\n         >\n           <img\n           id="').concat(r,'"\n             class="movie_img"\n             src="https://image.tmdb.org/t/p/w500').concat(t,'"\n             alt="').concat(n,'"\n           \n           />\n             <p class="movie_title card">').concat(n,'</p>\n         <div class="movie_describtion">\n          <ul class="movie_genresList">').concat(_T(a,i),"</ul>\n           <p>").concat(u,'</p>\n           <p class="movie_average">').concat(s.toFixed(1),"</p>\n         </div>\n         </a>      \n  </li>"):'<li class="gallery_card">\n         <a\n           class="gallery__link"\n          href="https://raw.githubusercontent.com/MarynaDanyliuk/goit-react-hw-05-movies/main/src/img/default_image_large.jpg"\n         >\n           <img\n           id="'.concat(r,'"\n            class="movie_img"\n             src="https://raw.githubusercontent.com/MarynaDanyliuk/goit-react-hw-05-movies/main/src/img/default_image_large.jpg"\n             alt="').concat(n,'"\n             loading="lazy"\n           />\n          <p class="movie_title card">').concat(n,'</p>\n         <div class="movie_describtion">\n           <ul>').concat(_T(a,i),"</ul>\n           <p>").concat(u,'</p>\n           <p class="movie_average">').concat(s.toFixed(1),"</p>\n         </div>\n         </a>\n      </li>");iE.gallery.insertAdjacentHTML("beforeend",c)}({poster_path:e.poster_path,original_title:e.original_title,id:e.id,genre_ids:e.genre_ids,genres:e.genres,release_date:e.release_date,vote_average:e.vote_average})})).join("");iE.gallery.insertAdjacentHTML("beforeend",t)}function mT(e){var n=e.poster_path,r=e.original_title,i=n?'<img\n          src="https://image.tmdb.org/t/p/w500'.concat(n,'"\n          alt=').concat(r,'\n          class="image"\n          \n        />'):"<img\n          src='".concat(t(pT),'\'\n          alt="default image"\n          class="image"\n          style="width: 375px; height: 478px"\n        />');iE.movieImage.insertAdjacentHTML("beforeend",i)}function gT(e){var t=e.original_title,n=e.vote_average,r=e.vote_count,i=e.popularity,a=e.genres,o=e.overview,s=a.map((function(e){return e.name})).join(", "),u='\n        <div class="movie_descr">\n          <h1 class="movie_title">'.concat(t,'</h1>\n          <table class="movie_inform">\n            <tr class="movie_info_item">\n              <td class="list_category">Vote/Votes</td>\n              <td class="list_data"><span class="average">').concat(n.toFixed(1),'</span> / <span class="count">').concat(r,'</span></td>\n            </tr>\n            <tr class="movie_info_item">\n              <td class="list_category">Popularity</td>\n              <td class="list_data">').concat(i.toFixed(1),'</td>\n            </tr>\n            <tr class="movie_info_item">\n              <td class="list_category">Original Title</td>\n              <td class="list_data" style="text-transform: uppercase">').concat(t,'</td>\n            </tr>\n            <tr class="movie_info_item">\n              <td class="list_category">Genre</td>\n              <td class="list_data genres">').concat(s,'</td>\n            </tr>\n          </table>\n          <p class="movie_title about">About</p>\n          <p class="movie_about">\n          ').concat(o,"\n          </p>\n        </div>\n\n  ");iE.movieDescr.insertAdjacentHTML("beforeend",u)}function kT(){iE.gallery.innerHTML="",iE.thumb.innerHTML=""}function wT(e){iE.input.value="",iE.homeBtn.classList.add("nav_item--current"),iE.libraryBtn.classList.remove("nav_item--current"),iE.headerNavButtons.classList.add("not-visible"),iE.form.classList.remove("not-visible"),e||(iE.user.innerHTML="",iE.signOut.classList.add("not-visible"))}function bT(){iE.homeBtn.classList.remove("nav_item--current"),iE.libraryBtn.classList.add("nav_item--current"),iE.buttonWatched.classList.add("active_btn"),iE.headerNavButtons.classList.remove("not-visible"),iE.form.classList.add("not-visible")}vT=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("jONvu");var _T=function(e,t){if(e){var n=e.splice(0,2).map((function(e){return e.name})).join(", ");return e.length>=3?'<li class="movie_gnr">'.concat(n,", Other</li>"):'<li class="movie_gnr">'.concat(n,"</li>")}if(t){var r=dT(t).splice(0,2).join(", ");return t.length>=3?'<li class="movie_gnr">'.concat(r,", Other</li>"):'<li class="movie_gnr">'.concat(r,"</li>")}};var ET=new lT;function xT(){return IT.apply(this,arguments)}function IT(){return(IT=t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ET.fetchMovies().then((function(e){yT(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function TT(e,t){return ST.apply(this,arguments)}function ST(){return(ST=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ET.fetchMoviesByQuery(n,r).then((function(e){yT(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function AT(e){return CT.apply(this,arguments)}function CT(){return(CT=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ET.fetchMovieDetailsById(n).then((function(e){mT(e),gT(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function OT(e){return RT.apply(this,arguments)}function RT(){return(RT=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ET.fetchMoviesByPage(n).then((function(e){yT(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function NT(){return DT.apply(this,arguments)}function DT(){return(DT=t(o)(t(g).mark((function e(){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ET.fetchGenresListByIds();case 3:fT("genres",e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var PT=new lT,LT=null,MT="";function UT(){return(UT=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=nE.currentUser,"IMG"===n.target.nodeName){e.next=4;break}return e.abrupt("return");case 4:if(r){e.next=8;break}iE.modalLogin.classList.add("open"),e.next=17;break;case 8:if(!r){e.next=17;break}return LT=n.target.getAttribute("id"),PT.movieId=LT,console.log(LT),e.next=14,AT(LT);case 14:return iE.modal.classList.add("open"),iE.body.classList.add("lock"),e.abrupt("return",LT);case 17:return e.abrupt("return",LT);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}iE.gallery.addEventListener("click",(function(e){return UT.apply(this,arguments)})),iE.libraryBtn.addEventListener("click",zT),iE.registerLink.addEventListener("click",zT),iE.loginLink.addEventListener("click",zT);var FT=iE.buttonClose;if(FT)for(var BT=0;BT<FT.length;BT++)FT[BT].addEventListener("click",qT);var VT=iE.modalBackdrop;if(VT)for(var jT=0;jT<VT.length;jT++)VT[jT].addEventListener("click",qT);function qT(e){iE.modal.classList.remove("open"),"A"===e.target.nodeName&&e.target.closest(".modal").classList.remove("open"),iE.body.classList.remove("lock"),iE.movieImage.innerHTML="",iE.movieDescr.innerHTML="",e.preventDefault()}function zT(e){e.preventDefault(),MT=e.target.getAttribute("id");var t=nE.currentUser;if("library_btn"===MT&&t)return window.location.assign("#/library"),void iE.modalRegister.classList.remove("open");"library_btn"!==MT||t?(iE.modalRegister.classList.toggle("open"),iE.modalLogin.classList.toggle("open")):iE.modalLogin.classList.add("open")}var HT,KT=new lT,GT=Uy(rE,"users"),WT=(HT=t(o)(t(g).mark((function e(n){var r,i,a;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_m(GT,xm("userId","==",n.uid)),e.prev=1,e.next=4,Um(r);case 4:if((i=e.sent).forEach((function(e){console.log(e.id," => ",e.data())})),!(i.size>0)){e.next=10;break}console.log("Пользователь с таким email уже существует"),e.next=14;break;case 10:return e.next=12,Bm(Uy(rE,"users"),{userId:n.uid,email:n.email,watched:[],queue:[]});case 12:a=e.sent,console.log("Document written with ID: ",a.id);case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(1),console.error("Error adding document: ",e.t0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),function(e){return HT.apply(this,arguments)}),QT=function(){var e=t(o)(t(g).mark((function e(n,r){var i,a,o,s,u,c,l;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=_m(GT,xm("userId","==",n.uid)),e.next=4,Um(i);case 4:return a=e.sent,console.log(a.docs[0].id),o=a.docs[0].id,s=Fy(rE,"users",o),console.log(s),e.next=11,KT.fetchMovieDetailsById(LT);case 11:if(u=e.sent,console.log(u),"watched"===r?(c="watched",l=u):"queue"===r&&(c="queue",l=u),!c||!l){e.next=19;break}return e.next=19,Fm(s,t(f)({},c,jm(l)));case 19:console.log("document updated"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,n){return e.apply(this,arguments)}}();function JT(){iE.buttonLoadMore.classList.remove("not-visible")}function XT(e){return YT.apply(this,arguments)}function YT(){return(YT=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kT(),wT(n),e.next=4,NT();case 4:return e.next=6,xT();case 6:JT();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $T(e,t){return ZT.apply(this,arguments)}function ZT(){return(ZT=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kT(),bT(),fS(n,r),JT();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eS(){var e;kT(),e='\n   <img \n   src="'.concat(t(vT),'"\n   alt="pageNotFound"\n   class="page-not-found"\n />\n   '),iE.thumb.insertAdjacentHTML("beforeend",e),iE.buttonLoadMore.classList.add("not-visible")}function tS(){return(tS=t(o)(t(g).mark((function e(n,r){var i;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.location.hash.substring(1),console.log(i),"/"!==i&&""!==i){e.next=7;break}return e.next=5,XT(r);case 5:e.next=14;break;case 7:if("/library"!==i){e.next=13;break}return console.log(n,r),e.next=11,$T(n,r);case 11:e.next=14;break;case 13:console.log("rere"),eS();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}iE.logo.addEventListener("click",XT);var nS=new lT,rS="watched",iS=[],aS=[],oS=(nE.currentUser,Uy(rE,"users"));iE.homeBtn.addEventListener("click",XT),iE.buttonHeaderNav.addEventListener("click",(function(e){return dS.apply(this,arguments)})),iE.logo.addEventListener("click",XT),iE.butttonsLibrary.addEventListener("click",(function(e){return pS.apply(this,arguments)}));var sS,uS,cS,lS=function(){var e=t(o)(t(g).mark((function e(n,r){var i,a,o;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_m(oS,xm("userId","==",r.uid)),e.prev=1,e.next=4,Um(i);case 4:if(!((a=e.sent).size>0)){e.next=17;break}if(o=a.docs[0].data(),iS.push(o.watched),aS.push(o.queue),"watched"!==n){e.next=13;break}return e.abrupt("return",o.watched);case 13:if("queue"!==n){e.next=15;break}return e.abrupt("return",o.queue);case 15:e.next=19;break;case 17:return console.log("No matching documents."),e.abrupt("return",[]);case 19:e.next=25;break;case 21:throw e.prev=21,e.t0=e.catch(1),console.error("Error adding document: ",e.t0),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t,n){return e.apply(this,arguments)}}();function fS(e,t){return hS.apply(this,arguments)}function hS(){return(hS=t(o)(t(g).mark((function e(n,r){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lS(n,r).then((function(e){yT(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dS(){return(dS=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kT(),r=nE.currentUser,"watched"===(rS=n.target.getAttribute("id"))?(iE.buttonWatched.classList.add("active_btn"),iE.buttonQueue.classList.remove("active_btn"),fS(rS,r)):"queue"===rS&&(iE.buttonQueue.classList.add("active_btn"),iE.buttonWatched.classList.remove("active_btn"),fS(rS,r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pS(){return pS=t(o)(t(g).mark((function e(n){var r;return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=nE.currentUser,console.log(LT),rS=n.target.getAttribute("id"),console.log("key:",rS),"BUTTON"===n.target.nodeName){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,lS(rS,r);case 9:return e.next=11,nS.fetchMovieDetailsById(LT).then((function(e){console.log(e),QT(r,rS),"watched"===rS?(iS.push(e),QT(r)):"queue"===rS&&(aS.push(e),QT(r))})).catch((function(e){return console.log(e.message)})).finally((function(){alert("фільм додано в бібліотеку")}));case 11:case"end":return e.stop()}}),e)}))),pS.apply(this,arguments)}sS=function(e){null!==e?(console.log("user logged in",e),WT(e),function(e,t){tS.apply(this,arguments)}(rS,e),iE.libraryBtn.addEventListener("click",(function(t){e&&(rS="watched",t.preventDefault(),$T(rS,e))}))):(XT(),console.log("no user"))},Le(nE).onAuthStateChanged(sS,uS,cS);var vS=new lT,yS="",mS=1;function gS(){return(gS=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),kT(),vS.resetPage(),vS.query=n.currentTarget.elements.searchQuery.value.trim(),""!==vS.query){e.next=6;break}return e.abrupt("return");case 6:return mS=vS.page,yS=vS.query,e.next=10,TT(yS,mS);case 10:console.log("BEFORE scroll",vS);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kS(){return(kS=t(o)(t(g).mark((function e(n){return t(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),console.log("BEFORE FETCH",vS),vS.incrementPage(),mS=vS.page,""!==yS){e.next=7;break}return e.next=7,OT(mS);case 7:return yS=vS.query,e.next=10,TT(yS,mS);case 10:console.log("AFTER FETCH",vS);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wS(e){console.log("hello"),e.preventDefault();var t=nE.currentUser;t?t&&iE.mobileMenu.classList.toggle("open"):iE.modalLogin.classList.add("open")}iE.form.addEventListener("submit",(function(e){return gS.apply(this,arguments)})),iE.buttonLoadMore.addEventListener("click",(function(e){return kS.apply(this,arguments)})),iE.openBurgerBtn.addEventListener("click",wS),iE.closeBurgerBtn.addEventListener("click",wS)}();
//# sourceMappingURL=index.b8eefde7.js.map
